<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://Z1Nhouse.github.io/</id>
    <title>Z1N&apos;s house</title>
    <updated>2020-02-27T18:15:57.878Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://Z1Nhouse.github.io/"/>
    <link rel="self" href="https://Z1Nhouse.github.io//atom.xml"/>
    <subtitle>System.out.print(&quot;Welcome to Z1N&apos;s houseï¼&quot;);</subtitle>
    <logo>https://Z1Nhouse.github.io//images/avatar.png</logo>
    <icon>https://Z1Nhouse.github.io//favicon.ico</icon>
    <rights>All rights reserved 2020, Z1N&apos;s house</rights>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·æ”¹loginç™»å…¥é é¢èƒŒæ™¯]]></title>
        <id>https://Z1Nhouse.github.io//post/XA05N8tyr</id>
        <link href="https://Z1Nhouse.github.io//post/XA05N8tyr">
        </link>
        <updated>2020-02-27T12:53:24.000Z</updated>
        <content type="html"><![CDATA[<p>å¾ˆç°¡å–®ä¹Ÿå¾ˆç„¡è¶£ã€‚<br>
èƒŒæ™¯å¤§å°æ˜¯800x600ã€‚</p>
<p>120åŸç‰ˆèƒŒæ™¯åœ–ï¼š<br>
<img src="https://Z1Nhouse.github.io//post-images/1582808101653.png" alt=""></p>
<h2 id="æ”¹æ³•">æ”¹æ³•</h2>
<p>æ‰“é–‹<code>Map.wz/Back/login.img/11</code>ä¿®æ”¹å³å¯<br>
<img src="https://Z1Nhouse.github.io//post-images/1582808155380.PNG" alt=""></p>
<p>è‡³æ–¼é‚Šæ¡†å‰‡åœ¨UI.wzè£¡é ­ï¼Œè‡ªå·±æ…¢æ…¢æ‰¾å§ã€‚</p>
<p>ä¸€äº›ä¸éŒ¯çš„æ¥“ä¹‹è°·800x600åœ–ç‰‡ä¸‹è¼‰ï¼š<a href="https://maplestory.nexon.com/Media/ArtWork">Here</a></p>
<p>Like this<br>
<img src="https://Z1Nhouse.github.io//post-images/1582808199982.jpg" alt=""></p>
<p>Have fun!</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœ - è‡ªç”±æ³¡é» è…³æœ¬+æ”¹æ³•]]></title>
        <id>https://Z1Nhouse.github.io//post/pkwH7k6t-</id>
        <link href="https://Z1Nhouse.github.io//post/pkwH7k6t-">
        </link>
        <updated>2020-02-27T12:38:50.000Z</updated>
        <content type="html"><![CDATA[<p>é€™å€‹æ˜¯åƒè€ƒå°å²¸äº†å…¶ä»–è…³æœ¬éš¨ä¾¿æ”¹çš„ï¼Œæ‰€ä»¥å°±ç›´æ¥æ”¾å‡ºä¾†äº†ã€‚<br>
æ‡‰è©²é©ç”¨æ–¼113,118,120...ç­‰ç‰ˆæœ¬ï¼Œæ›´æ–°çš„æˆ‘å°±ä¸æ›‰å¾—äº†ã€‚</p>
<p>é è¨­æ˜¯æ›æ©Ÿ3åˆ†é˜å¾—EXPã€10åˆ†é˜å¾—é»æ•¸ï¼Œä½ å¯ä»¥è‡ªç”±æ›´æ”¹ã€‚<br>
å¦‚æœåªéœ€è¦æ³¡é»ä¸éœ€è¦ç¶“é©—çš„è©±ï¼Œå¯ä»¥è‡ªè¡Œçœç•¥ä¸€äº›æ­¥é©Ÿã€‚</p>
<h2 id="src">SRC</h2>
<ol>
<li>æ‰“é–‹<code>ChannelServer.java</code>ï¼Œåœ¨æœ€å¾Œä¸€å€‹}å‰åŠ ä¸Šï¼š</li>
</ol>
<pre><code>//æ³¡é»
   
   public void AutoGain(int jsexp) {
        this.mapFactory.getMap(910000000).AutoGain(jsexp);
    }

    public void AutoNx(int jsNx) {
        this.mapFactory.getMap(910000000).AutoNx(jsNx);
    }

    public void AutoPaoDian() {
        for (MapleCharacter chr : this.players.getAllCharacters()) {
            chr.setBossLog(&quot;åœ¨ç·šæ³¡é»&quot;);
        }
    }
</code></pre>
<ol start="2">
<li>æ‰“é–‹<code>MapleMap.java</code> åœ¨æœ€å¾Œä¸€å€‹}å‰åŠ ä¸Šï¼š</li>
</ol>
<pre><code>//æ³¡é»
    public void AutoNx(int jsNx) { //cash
        if (this.mapid != 999999992) { //é€™è£¡æ”¹ä½ æƒ³æ³¡é»çš„åœ°åœ–
            return;
        }
        for (MapleCharacter chr : this.characters) {
            int givNx = chr.getLevel() / 10 + jsNx;
            chr.modifyCSPoints(1, givNx);
            chr.dropMessage(5, new StringBuilder().append(&quot;[ç³»çµ±çå‹µ] åœ¨ç·šæ™‚é–“çå‹µç²å¾— [&quot;).append(givNx).append(&quot;] é»CASH.&quot;).toString());
        }
    }

    public void AutoGain(int jsexp) {
        if (this.mapid != 999999992) { //é€™è£¡æ”¹ä½ æƒ³æ³¡é»çš„åœ°åœ–
            return;
        }
        for (MapleCharacter chr : this.characters) {
            if (chr.getLevel() &gt;= 200) {
                return;
            }
            int givExp = jsexp * chr.getLevel() + chr.getClient().getChannelServer().getExpRate();
            givExp *= 3;
            chr.gainExp(givExp, true, false, true);
            chr.dropMessage(5, new StringBuilder().append(&quot;[ç³»çµ±çå‹µ] åœ¨ç·šæ™‚é–“çå‹µç²å¾— [&quot;).append(givExp).append(&quot;] é»ç¶“é©—.&quot;).toString());
        }
    }
</code></pre>
<h2 id="event">Event</h2>
<p>æ–°å¢3å€‹jsåˆ†åˆ¥ç‚ºAutoGain.jsã€AutoNx.jsã€AutoPaoDian.js</p>
<ul>
<li>AutoGain.js</li>
</ul>
<pre><code>var setupTask;

function init() {
    scheduleNew();
}

function scheduleNew() {
    var cal = java.util.Calendar.getInstance();
    cal.set(java.util.Calendar.HOUR, 3);
    cal.set(java.util.Calendar.MINUTE, 50);
    cal.set(java.util.Calendar.SECOND, 0);
    var nextTime = cal.getTimeInMillis();
    while (nextTime &lt;= java.lang.System.currentTimeMillis()) {
        nextTime += 1000 * 60 * 3;
    }
    setupTask = em.scheduleAtTimestamp(&quot;start&quot;, nextTime);
}

function cancelSchedule() {
    setupTask.cancel(true);
}

function start() {
    scheduleNew();
    em.getChannelServer().AutoGain(10);
}
</code></pre>
<ul>
<li>AutoNx.js</li>
</ul>
<pre><code>var setupTask;

function init() {
    scheduleNew();
}

function scheduleNew() {
    var cal = java.util.Calendar.getInstance();
    cal.set(java.util.Calendar.HOUR, 3);
    cal.set(java.util.Calendar.MINUTE, 50);
    cal.set(java.util.Calendar.SECOND, 0);
    var nextTime = cal.getTimeInMillis();
    while (nextTime &lt;= java.lang.System.currentTimeMillis()) {
        nextTime += 1000 * 60 * 10;
    }
    setupTask = em.scheduleAtTimestamp(&quot;start&quot;, nextTime);
}

function cancelSchedule() {
    setupTask.cancel(true);
}

function start() {
    scheduleNew();
    em.getChannelServer().AutoNx(10);
}
</code></pre>
<ul>
<li>AutoPaoDian.js</li>
</ul>
<pre><code>var setupTask;

function init() {
    scheduleNew();
}

function scheduleNew() {
    var cal = java.util.Calendar.getInstance();
    cal.set(java.util.Calendar.HOUR, 0);
    cal.set(java.util.Calendar.MINUTE, 0);
    cal.set(java.util.Calendar.SECOND, 0);
    var nextTime = cal.getTimeInMillis();
    while (nextTime &lt;= java.lang.System.currentTimeMillis()) {
        nextTime += 1000 * 60 * 1;
    }
    setupTask = em.scheduleAtTimestamp(&quot;start&quot;, nextTime);
}

function cancelSchedule() {
    setupTask.cancel(true);
}

function start() {
    scheduleNew();
    em.getChannelServer().AutoPaoDian();
    var iter = em.getInstances().iterator();
    while (iter.hasNext()) {
        var eim = iter.next();
    }
}
</code></pre>
<p>ä»¥ä¸Šä¸‰å€‹jséƒ½å¯«å¥½å¾Œæ”¾åˆ°ç«¯å£çš„Eventè£¡ï¼Œæ‰“é–‹ç«¯å£è¨­å®šæª”(ä¸€èˆ¬éƒ½æ˜¯<code>Settings</code>æˆ–è€…<code>world.properties</code>ä¹‹é¡çš„)åœ¨<code>tms.Events:</code>å¾Œæ–¹åŠ ä¸ŠAutoGain,AutoNx,AutoPaoDian<br>
è¨˜å¾—è¦ç”¨<strong>é€—è™Ÿ</strong>éš”é–‹ï¼Œå°±é€™æ¨£ã€‚</p>
<p>ğŸ“¢3å€‹æ³¡é»Eventä¸‹è¼‰ï¼š<a href="http://www.mediafire.com/file/1ouhrk1b4o7n5no/%25E6%25B3%25A1%25E9%25BB%259EEvent.rar/file">Download</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœ - å‘Šåˆ¥æ¥“ç¥¨! ç°¡æ˜“éŠ€è¡Œç³»çµ±]]></title>
        <id>https://Z1Nhouse.github.io//post/Jynb6paEp</id>
        <link href="https://Z1Nhouse.github.io//post/Jynb6paEp">
        </link>
        <updated>2020-02-26T08:36:16.000Z</updated>
        <content type="html"><![CDATA[<p>å…¶å¯¦æ¦‚å¿µéå¸¸ç°¡å–®..å°±æ˜¯æ–°å¢ä¸€å€‹è³‡æ–™è¡¨å„²å­˜ å­˜æ¬¾ ç½·äº†ã€‚<br>
ç›´æ¥å‘Šåˆ¥æ¥“ç¥¨ï¼Œä¸å¿…å†è·‘å»æ›éŒ¢è¢‹<br>
<img src="https://Z1Nhouse.github.io//post-images/1582706523573.PNG" alt=""></p>
<h2 id="æ–°å¢è³‡æ–™è¡¨">æ–°å¢è³‡æ–™è¡¨</h2>
<p>sqlèªæ³•ï¼š</p>
<pre><code>SET FOREIGN_KEY_CHECKS=0; 
-- ---------------------------- 
-- Table structure for bank 
-- ---------------------------- 
DROP TABLE IF EXISTS `bank`; 
CREATE TABLE `bank` ( 
  `id` int(11) NOT NULL auto_increment, 
  `charid` int(11) NOT NULL UNIQUE, 
  `money` int(11) NOT NULL, 
  PRIMARY KEY  (`id`) 
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
</code></pre>
<h2 id="src">SRC</h2>
<p>æ‰“é–‹<code>Scripting/NPCConversationManager.java</code>ï¼Œåœ¨æœ€å¾Œä¸€å€‹}å‰åŠ ä¸Šï¼š</p>
<pre><code>//éŠ€è¡Œç³»çµ±
    
    public int getMoney() 
        { 
            int money=0; 
            try { 
                int cid = getPlayer().getId(); 
                Connection con = DatabaseConnection.getConnection(); 
                PreparedStatement limitCheck = con.prepareStatement(&quot;SELECT * FROM Bank WHERE charid=&quot;+cid+&quot;&quot;); 
                ResultSet rs = limitCheck.executeQuery(); 
                if(rs.next()) 
                { 
                    money=rs.getInt(&quot;money&quot;); 
                } 
                limitCheck.close(); 
                rs.close(); 
                } catch (SQLException ex) { 
                } 
                return money; 
        } 
        
        public int addMoney(int money,int type) 
        {    
            try { 
                int cid = getPlayer().getId(); 
              
                Connection con = DatabaseConnection.getConnection(); 
                PreparedStatement ps = con.prepareStatement(&quot;select * from bank where charid=?&quot;); 
                ps.setInt(1, cid); 
                ResultSet rs=ps.executeQuery(); 
                if(rs.next()) 
                { 
                    if(type==1) 
                    { 
                        if(money&gt;rs.getInt(&quot;money&quot;)) 
                        { 
                            return -1; 
                        } 
                    } 
                    ps = con.prepareStatement(&quot;UPDATE Bank SET money =money+ &quot; + money + &quot; WHERE charid = &quot; + cid + &quot;&quot;); 
                    return ps.executeUpdate();                    
                } 
                
            } catch (SQLException ex) {                
            } 
              return 0; 
        } 
        public int addBank() 
        { 
            int r=0; 
        try { 
            Connection con = DatabaseConnection.getConnection(); 
            PreparedStatement ps = con.prepareStatement(&quot;insert into bank (charid,money) values (?,0)&quot;); 
            ps.setInt(1, getPlayer().getId());            
            r=ps.executeUpdate(); 
            ps.close(); 
            
        } catch (SQLException ex) { 
          r=0; 
        } 
            return r; 
        } 
</code></pre>
<h2 id="npcè…³æœ¬">NPCè…³æœ¬</h2>
<p>å¯¦åœ¨å¤ªéç°¡å–®ï¼Œä¸æƒ³è§£é‡‹äº†ï¼Œé‡‘é¡å¯ä»¥éš¨æ„æ›´æ”¹ï¼Œä¹Ÿå¯ä»¥æ–°å¢é‡‘é¡ã€‚</p>
<pre><code>/*ç°¡æ˜“éŠ€è¡Œç³»çµ±*/
var status = 0;
var t=new Array(&quot;å­˜éŒ¢&quot;,&quot;å–éŒ¢&quot;,&quot;æŸ¥çœ‹&quot;,&quot;é–‹æˆ¶&quot;);
var money=new Array(&quot;500W&quot;,&quot;1000W&quot;,&quot;5000W&quot;,&quot;1E&quot;); 
var money1=new Array(&quot;5000000&quot;,&quot;10000000&quot;,&quot;50000000&quot;,&quot;100000000&quot;); 
var x=0;
function start() {
status = -1;
action(1, 0, 0);
}
function action(mode, type, selection) {
    if (mode == -1) {
      cm.dispose();
    } else {
          if (mode == 0 &amp;&amp; status == 0) {
          cm.dispose();
          return;
      }
      if (mode == 1)
      status++;
      else
      status--;
      if (status == 0) 
      {
        cm.sendNext(&quot;æ­¡è¿ä½¿ç”¨ #béŠ€è¡Œç³»çµ±#k æˆ‘çš„æœ‹å‹! è«‹å…ˆé–‹æˆ¶å¾Œå†é€²è¡Œå­˜æ¬¾ä»¥åŠå–éŒ¢çš„å‹•ä½œï¼Œè«‹æ³¨æ„#rå­˜éŒ¢ä¹‹å¾Œéœ€è¦ä¸€é»æ™‚é–“æ‰èƒ½å–éŒ¢#kï¼Œå¦å‰‡ç³»çµ±æŠ“ä¸åˆ°æ•¸æ“šå“¦ï¼&quot;); 
      } 
      else if (status == 1) { 
        var a = &quot;è«‹é¸æ“‡ä½ éœ€è¦çš„åŠŸèƒ½.#b&quot;; 
                    for (var i=0; i &lt; t.length; i++) { 
                    a += &quot;\r\n#L&quot; + i + &quot;#&quot; + t[ i ]+&quot;&quot;; 
                    } 
                  cm.sendSimple(a); 
        }
      else if(status == 2)
      {
            x=selection;
          if(x==2)
          {
            cm.sendOk(&quot;æ‚¨çš„å­˜æ¬¾æœ‰&quot;+cm.getMoney()+&quot; &quot;);
            cm.dispose();
          }
          else if (x==3)
            {
                if(cm.addBank()&gt;0)
                {
                    cm.sendOk(&quot;æ­å–œæ‚¨,é–‹æˆ¶æˆåŠŸ!&quot;); 
                    }
                    else
                    {
                        cm.sendOk(&quot;å¾ˆæŠ±æ­‰,é–‹æˆ¶å¤±æ•—!å¯èƒ½æ‚¨å·²ç¶“é–‹æˆ¶éäº†å“¦!&quot;);
                    }
                    cm.dispose();
            }
          else
          {
          
          var b = &quot; è«‹é¸æ“‡é‡‘é¡.#b&quot;; 
                        for (var i=0; i &lt; money.length; i++) { 
                        b += &quot;\r\n#L&quot; + i + &quot;#&quot; + money[ i ]+&quot;&quot;; 
                        } 
                        cm.sendSimple(b); 
          }
      }
      else if (status == 3) { 
          var choose=money1[selection];
          if(x==0)//å­˜ 
            { 
            if(cm.getMeso()&lt;choose)
            {
                cm.sendOk(&quot;Oh,Sorry,æ‚¨çš„éŒ¢ä¸å¤ !&quot;);    
            }
            else if(cm.addMoney(choose,0)&gt;0)
                {
                cm.gainMeso(-choose);
                cm.sendOk(&quot;å¥½çš„,å·²ç¶“å­˜å…¥!&quot;);
                }
                else
                {
                cm.sendOk(&quot;Error:è«‹åé¥‹çµ¦ç®¡ç†å“¡!&quot;);

                }
                cm.dispose();
            } 
            else if(x==1)//å– 
            { 
            if(cm.getMoney()&lt;choose)
            {
                cm.sendOk(&quot;Oh,Sorry,æ‚¨å­˜æ¬¾æ²’æœ‰é‚£éº¼å¤šå‘¢!&quot;);    
            }
                else if(cm.addMoney(-choose,1)&gt;0)
                {
                cm.gainMeso(choose);
                cm.sendOk(&quot;å¥½çš„,è«‹æ”¶å¥½æ‚¨çš„éŒ¢!&quot;);
                }
                else
                {
                cm.sendOk(&quot;Error:è«‹åé¥‹çµ¦ç®¡ç†å“¡!&quot;);
                }
                cm.dispose();
              }
            
      
      }
      else
      {
      cm.dispose();
      }
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœ - é»è£é ˜å–ç³»çµ±/å°ä¾¿ç³»çµ±/è³é‡‘ä»»å‹™/ç­”é¡Œæ´»å‹•]]></title>
        <id>https://Z1Nhouse.github.io//post/Y6qQpOypx</id>
        <link href="https://Z1Nhouse.github.io//post/Y6qQpOypx">
        </link>
        <updated>2020-02-22T16:59:12.000Z</updated>
        <content type="html"><![CDATA[<p>æ­¤ç¯‡æ–‡ç« å…ˆç”¨ä¾†è¨˜éŒ„æˆ‘é‚„æ²’ä¾†å¾—åŠæˆ–è€…ä¸æƒ³å¯«æ•™ç¨‹çš„é‚£äº›ç³»çµ±...</p>
<h2 id="é»è£é ˜å–ç³»çµ±">é»è£é ˜å–ç³»çµ±</h2>
<p>emmmm... æˆ‘æ˜¯ä¸çŸ¥é“åˆ¥çš„æœæ€éº¼è¨­è¨ˆçš„ï¼Œæˆ‘å°±è‡ªå·±éš¨æ„å¯«çš„</p>
<p>åŸç†å¾ˆç°¡å–®<br>
é¦–å…ˆç¢ºèªä½ çš„ç«¯å£æœ‰æ²’æœ‰ä»¥ä¸‹å…©ç¨®å‡½æ•¸(99.99999%éƒ½æœ‰)</p>
<ul>
<li>sendGetNumber</li>
<li>isCash</li>
</ul>
<p>å…©å€‹éƒ½æœ‰å°±99.99999%èƒ½å¯«å‡ºä¾†</p>
<ol>
<li>å…ˆå¯«é¸å–®ï¼Œçœ‹ä½ è¦æ€éº¼åˆ†é¡</li>
<li>å†ä¾†æ¯å€‹é¸å–®éƒ½sendGetNumberä¸¦è¦ç¯„ä¸€å€‹ç¯„åœ</li>
<li>æ–°å¢è®Šæ•¸id = ç©å®¶è¼¸å…¥çš„ä»£ç¢¼</li>
<li>å¾—åˆ°id ç‰©å“</li>
</ol>
<p>é€™æ¨£å°±èƒ½å¯«å‡ºä¾†äº†ï¼Œå…¶ä»–æƒ³æ–°å¢ä»€éº¼åˆ¤æ–·å†ä¿®ä¸€ä¿®å°±è¡Œã€‚</p>
<p><img src="https://Z1Nhouse.github.io//post-images/1582390992222.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582390994724.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582390996883.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582391000227.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582391002899.PNG" alt=""></p>
<p>æˆ‘é€™æ˜¯å¾ˆç²—ç³™ç‰ˆæœ¬çš„ï¼Œä½ å¯ä»¥å¤šå¯«ä¸€å€‹æ˜¯å¦åŒæ„é ˜å–è©²é“å…·ï¼Œè¬ä¸€ç©å®¶è¼¸å…¥éŒ¯èª¤å°±å¯ä»¥åæ‚”ã€‚</p>
<h2 id="å°ä¾¿ç³»çµ±">å°ä¾¿ç³»çµ±</h2>
<p>æ²’æ‰“ç®—å¯«æ•™ç¨‹ï¼Œå› ç‚ºæµ·å¤–è«–å£‡å°±æœ‰äº†å¾ˆè©³ç´°çš„æ•™å­¸ï¼š<a href="http://forum.ragezone.com/f427/pee-system-671884/">Pee System!</a></p>
<p>é€™å€‹ç³»çµ±å¯ä»¥ç”¨ä¾†é˜²æ›æ©Ÿï¼Œä½ å¯ä»¥ä¿®æ”¹éœ€è¦ä¸Šå»æ‰€çš„æ™‚é–“ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹åœ¨å“ªè£¡ä¸Šå»æ‰€<br>
<img src="https://Z1Nhouse.github.io//post-images/1582706783158.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582706786330.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582706788967.PNG" alt=""></p>
<p>è¼¸å…¥æŒ‡ä»¤@peeå°±å¯ä»¥ä¸Šå»æ‰€ï¼Œä¸ä¸Šæœƒæ­»è·Ÿäººä¸€æ¨£ï¼Œå“ˆå“ˆã€‚</p>
<h2 id="è³é‡‘ä»»å‹™">è³é‡‘ä»»å‹™</h2>
<p>ä¸éœ€è¦æ‰‹å‹•æ”¹WZå°±å¯ä»¥æ–°å¢ä»»å‹™ï¼Œéå¸¸æ–¹ä¾¿ã€‚<br>
éœ€è¦æ–°å¢ä¸€å€‹è³‡æ–™è¡¨ç”¨ä¾†è¨˜éŒ„ç©å®¶ä»»å‹™é€²è¡Œçš„ç‹€æ…‹ï¼Œé™¤æ­¤ä¹‹å¤–çœŸçš„ç´”ç²¹é JSã€‚<br>
<img src="https://Z1Nhouse.github.io//post-images/1582706841070.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582706942332.PNG" alt=""></p>
<h2 id="ç­”é¡Œæ´»å‹•">ç­”é¡Œæ´»å‹•</h2>
<p>çœŸçš„å¾ˆæœ‰è¶£<br>
ä»£ç¢¼ä¹Ÿæ˜¯çœŸçš„é•·...<br>
ps.è«‹å‡è£ä»–çœŸçš„æ˜¯å­”æ˜ å“ˆ!<br>
<img src="https://Z1Nhouse.github.io//post-images/1582827269133.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582827271754.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582827321332.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582827273931.PNG" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœæ•™å­¸ - å¦‚ä½•æ–°å¢å…¨æ–°çš„ä»»å‹™?(æ‰“æ€ª/è’é›†ç‰©å“)]]></title>
        <id>https://Z1Nhouse.github.io//post/pv4fc18vn</id>
        <link href="https://Z1Nhouse.github.io//post/pv4fc18vn">
        </link>
        <updated>2020-02-22T13:35:31.000Z</updated>
        <content type="html"><![CDATA[<p>æ”¹ä»»å‹™åªéœ€è¦æ”¹åˆ°WZï¼Œå› æ­¤ç®—æ˜¯éå¸¸å®¹æ˜“çš„ã€‚<br>
åªè¦æ‡‚å¾—æ¯å€‹ç¯€é»ä¹‹é–“çš„æ¶µç¾©å°±å¯ä»¥è¼•é¬†çš„æ–°å¢ä»»å‹™ã€‚<br>
æœ¬ç¯‡æ–‡ç« éå¸¸è©³ç´°çš„è¬›è§£æ¯å€‹å¸¸ç”¨ç¯€é»çš„æ„ç¾©ï¼Œå¦‚æœé‚„æ˜¯ä¸æœƒ...æˆ‘ä¹Ÿæ²’è¾¦æ³•ã€‚</p>
<p>é¦–å…ˆï¼Œæ‰“é–‹ä½ çš„Quest.wzï¼Œä½ å¯ä»¥çœ‹è¦‹<br>
<code>Act,Check,PQuest,Exclusive,QuestInfo,Say</code>ã€€é€™å¹¾å€‹ç¯€é»</p>
<p>PQçš„æ˜¯é å¾éšŠçš„å¯ä»¥ä¸å»ç®¡å®ƒï¼Œæ–°å¢ä»»å‹™å¸¸ç”¨åˆ°çš„åªæœ‰å…¶ä¸­å››å€‹ç¯€é»ï¼š<code>Actã€Checkã€QuestInfoã€Say</code><br>
æ¯ä¸€å€‹å„æœ‰å®ƒè‡ªå·±çš„åŠŸç”¨ï¼Œæ¯”å¦‚<strong>Act</strong>ä»£è¡¨ä»»å‹™éœ€è¦çš„ç‰©å“ã€ç¶“é©—ã€æ¥“å¹£ï¼Œä»¥åŠä»»å‹™å®Œæˆä¹‹å¾Œç²å¾—çš„çå‹µï¼›<br>
è€Œ<strong>Check</strong>å‰‡å¯ä»¥æŒ‡å®šä»»å‹™æ¥å–ã€å®Œæˆçš„NPCä»¥åŠæª¢æŸ¥ä»»å‹™é“å…·æˆ–è€…æ€ªç‰©æ“Šæ®ºæ•¸é‡æ˜¯å¦æ­£ç¢ºï¼›<br>
<strong>QuestInfo</strong>ä»£è¡¨ä»»å‹™åœ¨ä»»å‹™æ¬„è£¡é ­é¡¯ç¤ºçš„æ–‡å­—ï¼›<br>
<strong>Say</strong>å‰‡æ˜¯æ¥ä»»å‹™ä»¥åŠå›å ±ä»»å‹™æ™‚NPCæ‰€èªªçš„è©±ã€‚</p>
<h2 id="ï¸act">âš ï¸ACT</h2>
<p>é¦–å…ˆä¾†çœ‹actï¼š</p>
<p><strong>0ä»£è¡¨æœªå®Œæˆï¼Œ1ä»£è¡¨å®Œæˆ</strong></p>
<p>1 - exp ä»£è¡¨å®Œæˆå¾Œå¯å¾—åˆ°çš„ç¶“é©—å€¼<br>
1 - item ä»£è¡¨ä»»å‹™æ‰€éœ€è¦çš„ç‰©å“æˆ–è€…çå‹µçš„ç‰©å“</p>
<p>è‹¥ä½ ä»Šå¤©ä»»å‹™å®Œæˆè¦çµ¦äºˆç©å®¶å…©å€‹é“å…·ï¼Œå‰‡è¦æ–°å¢å…©å€‹ç¯€é»(0,1)<br>
1 - item - 0<br>
1 - item - 1</p>
<p>è€Œ0,1åº•ä¸‹é‚„è¦å†æ–°å¢idèˆ‡countï¼Œé€™é‚Šæ²’æœ‰æåˆ°çš„propå‰‡å¯ä»¥æ§åˆ¶å¾—åˆ°çå‹µçš„æ©Ÿç‡ã€‚</p>
<p>idä»£è¡¨é“å…·çš„ä»£ç¢¼<br>
countä»£è¡¨æ•¸é‡ï¼Œè‹¥æ˜¯è¦å¾ç©å®¶é‚£è£¡å¾—åˆ°è¨˜å¾—è¦åŠ ä¸Šè² è™Ÿ</p>
<figure data-type="image" tabindex="1"><img src="https://Z1Nhouse.github.io//post-images/1582381147067.PNG" alt=""></figure>
<p>ä½ å¯ä»¥å…ˆå¾å¹¾å€‹ç†Ÿæ‚‰çš„ä»»å‹™é–‹å§‹ç ”ç©¶å…¶ç¯€é»å„è‡ªä»£è¡¨çš„å«æ„ï¼Œæ¯”å¦‚èªªæˆ‘æœƒæ‹¿&lt;è­‰æ˜æœ¬é ˜-2&gt;(28222)é€™å€‹ä»»å‹™ä¾†åšç ”ç©¶ï¼Œé€™å€‹ä»»å‹™éœ€è¦ç©å®¶è’é›†20å€‹(4000001)è‡è‡å¯¶è²å‚˜ï¼Œå®Œæˆå¾Œå¯ä»¥å¾—åˆ°ç¶“é©—å€¼1600ã€‚<br>
PS.ä¸€å€‹å°æŠ€å·§ï¼Œä½ å¯ä»¥ç”¨ç·¨è¼¯å™¨æ‰“é–‹<code>wz/Quest.wz/QuestInfo.img</code> çœ‹çœ‹ä»»å‹™ç°¡ä»‹ä¾†åšåƒè€ƒã€‚</p>
<h2 id="ï¸check">âš ï¸CHECK</h2>
<p>å†ä¾†èªªèªªCheckï¼ŒCheckæ‰®æ¼”äº†å¾ˆé‡è¦çš„è§’è‰²ï¼Œ</p>
<p><strong>0ä¸»è¦æ˜¯è™•ç†ã€Œå¯æ¥å–å°è±¡çš„æ¢ä»¶ã€</strong></p>
<p>0 - job ä»£è¡¨å¯ä»¥æ¥å–ä»»å‹™çš„è·æ¥­<br>
0 - lvmax(lvmin) ä»£è¡¨å¯ä»¥æ¥å–ä»»å‹™çš„æœ€ä½ç­‰ç´šä»¥åŠç­‰ç´šé™åˆ¶<br>
0 - npc ä»£è¡¨æ¥å–ä»»å‹™çš„NPC<br>
0 - quest ä»£è¡¨ä»»å‹™æœ‰æ²’æœ‰å‰ç½®<br>
questè£¡é ­çš„idå°±æ˜¯ä»»å‹™ä»£ç¢¼</p>
<p><strong>1å‰‡æ˜¯ã€Œæ¥å–ä»»å‹™å¾Œè‡³çµæŸã€</strong></p>
<p>1 - item ä»£è¡¨ä»»å‹™æ‰€éœ€çš„é“å…·</p>
<ul>
<li>item - 0 ç¬¬ä¸€å€‹é“å…· (id,count)</li>
<li>item - 1 ç¬¬äºŒå€‹é“å…· (id,count)<br>
...ä»¥æ­¤é¡æ¨</li>
</ul>
<p>1 - npc ä»£è¡¨å®Œæˆä»»å‹™çš„NPC</p>
<figure data-type="image" tabindex="2"><img src="https://Z1Nhouse.github.io//post-images/1582381835841.PNG" alt=""></figure>
<h2 id="ï¸quest-info">âš ï¸QUEST INFO</h2>
<p>QuestInfoå°±æ¯”è¼ƒå®¹æ˜“äº†ï¼Œéš¨ä¾¿é»é–‹ä¸€å€‹ä»»å‹™çœ‹ä¸€ä¸‹å°±çŸ¥é“æ¯å€‹ç¯€é»çš„æ„ç¾©ã€‚</p>
<p>0 ä»£è¡¨ ä»»å‹™åœ¨ã€Œå¯æ¥å–ä»»å‹™ã€æ¬„ä½æ™‚é¡¯ç¤ºçš„å…§å®¹<br>
1 ä»£è¡¨ ä»»å‹™æ¥å–å¾Œåœ¨ä»»å‹™æ¬„é¡¯ç¤ºçš„å…§å®¹<br>
2 ä»£è¡¨ ä»»å‹™å®Œæˆå¾Œåœ¨ã€Œå·²å®Œæˆä»»å‹™ã€æ¬„ä½é¡¯ç¤ºçš„å…§å®¹</p>
<p>areaä»£è¡¨ä»»å‹™å±¬æ–¼çš„é¡åˆ¥<br>
ç›®å‰çŸ¥é“çš„æ˜¯10ä»£è¡¨ã€Œè·æ¥­ã€<br>
å…¶ä»–å°±è‡ªè¡Œç ”ç©¶äº†</p>
<p>demandSummaryæ˜¯åœ¨ä»»å‹™æ¬„ã€Œä»»å‹™éœ€æ±‚ã€é¡¯ç¤ºçš„å…§å®¹<br>
rewardSummaryæ˜¯åœ¨ä»»å‹™æ¬„ã€Œä»»å‹™çå‹µã€é¡¯ç¤ºçš„å…§å®¹</p>
<p>nameå°±æ˜¯ä»»å‹™çš„åç¨±</p>
<figure data-type="image" tabindex="3"><img src="https://Z1Nhouse.github.io//post-images/1582380437039.PNG" alt=""></figure>
<h2 id="ï¸say">âš ï¸Say</h2>
<p><strong>0ä»£è¡¨æœªå®Œæˆï¼Œ1ä»£è¡¨å®Œæˆ</strong></p>
<p>sayæ–¹é¢æˆ‘ç ”ç©¶çš„ä¸å¤šï¼Œå„ä½å¯ä»¥è‡ªå·±ç†è§£ã€‚<br>
æ˜¯èˆ‡NPCç›¸é—œçš„éƒ¨åˆ†ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://Z1Nhouse.github.io//post-images/1582382805930.PNG" alt=""></figure>
<p>è¦æ–°å¢ä»»å‹™çš„è©±å°±æ–°å¢Subç¯€é»å–ä¸€å€‹æ²’ç”¨åˆ°çš„ä»»å‹™ä»£ç¢¼å³å¯ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœv120 æ–°å¢ æ‰“æ€ªæ‰é» åŠŸèƒ½]]></title>
        <id>https://Z1Nhouse.github.io//post/cb3av_hPP</id>
        <link href="https://Z1Nhouse.github.io//post/cb3av_hPP">
        </link>
        <updated>2020-02-20T14:32:31.000Z</updated>
        <content type="html"><![CDATA[<p>ä¾†è‡ªå¤¢å¤¢è°·ç«¯å£ã€‚<br>
å¾ˆç°¡å–®ï¼Œåªéœ€è¦æ”¹SRCï¼Œå…©æ­¥é©Ÿå°±è§£æ±ºã€‚</p>
<h2 id="æ”¹src">æ”¹SRC</h2>
<ol>
<li>æ‰“é–‹<code>constants.ServerConstants.java</code></li>
</ol>
<p>æœç´¢<code>//End of Poll</code> ä¸‹æ–¹åŠ ä¸Šï¼š</p>
<pre><code>public static String é»æ•¸æ‰è½ = &quot;1,3,15&quot;;
</code></pre>
<ol start="2">
<li>æ‰“é–‹<code>server.maps.MapleMap.java</code></li>
</ol>
<p>åœ¨æœ€é–‹å§‹importåŠ ä¸Š</p>
<pre><code>import constants.ServerConstants
</code></pre>
<p>åœ¨<code>dropFromMonster</code>å‡½æ•¸çš„æœ€å¾Œä¸€å€‹æ‹¬è™Ÿå‰åŠ ä¸Šï¼š</p>
<pre><code>        int moblevel = mob.getStats().getLevel();
        int difference = chr.getLevel() &gt; 120 ? chr.getLevel() &gt; 150 ? 75 : 75 : 75;//ç›¸å·®ç­‰ç´š
        boolean YesNo = (chr.getLevel() - moblevel) &lt;= difference;
        int Percentage = Randomizer.rand(1, 100);//è½‰æ›ç™¾åˆ†æ¯”
        int GetPoints = (int) Randomizer.rand(Integer.parseInt(ServerConstants.é»æ•¸æ‰è½.split(&quot;,&quot;)[0]), Integer.parseInt(ServerConstants.é»æ•¸æ‰è½.split(&quot;,&quot;)[1])); //æœ€å°‘1 æœ€å¤š3
        if (Percentage &lt; Integer.parseInt(ServerConstants.é»æ•¸æ‰è½.split(&quot;,&quot;)[2]) &amp;&amp; chr.getLevel() &gt; 10) { //éš¨æ©Ÿç”¢ç”Ÿæ•¸ç”±1~100 å¦‚æœ&lt;15 æ‰æœƒæ‰é»
            if (YesNo) {
                chr.modifyCSPoints(2, GetPoints); //æ‰é»é¡å‹ 1ç‚ºCASH 2ç‚ºæ¥“è‘‰é»æ•¸
                chr.dropMessage(-1, &quot;å¾æ€ªç‰©èº«ä¸Šç²å¾—äº† &quot; + GetPoints + &quot; æ¥“è‘‰é»æ•¸&quot;);
            } else {
                chr.dropMessage(-1, &quot;èˆ‡æ€ªç‰©ç­‰ç´šç›¸å·®å¤§æ–¼ &quot; + difference + &quot; æ•…ç„¡æ³•ç²å¾—é»æ•¸ã€‚&quot;);
            }
        }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åˆ†äº«è³­åš+å°éŠæˆ²ç³»åˆ—JS (21é»ã€å¯¶çŸ³é€£ç·šã€æ’åˆ—çµ„åˆã€è¸©åœ°é›·ã€è€è™æ©Ÿ)]]></title>
        <id>https://Z1Nhouse.github.io//post/5KthHuPnW</id>
        <link href="https://Z1Nhouse.github.io//post/5KthHuPnW">
        </link>
        <updated>2020-02-20T06:35:38.000Z</updated>
        <content type="html"><![CDATA[<p>é€™äº›è³‡æºæ˜¯å¾å°å²¸æ‹¿åˆ°çš„ï¼Œæˆ‘ä¹Ÿä¸è¨˜å¾—æ˜¯å¾å“ªå€‹æ‹¿çš„ï¼Œå°±åˆ†äº«ä¸€ä¸‹æˆ‘æ¯”è¼ƒå¸¸é€›çš„è«–å£‡ï¼š<br>
<a href="https://www.fengyewuyu.com/">æ¥“æ¥­ç‰©èªè«–å£‡</a>èˆ‡ <a href="https://bbs.ytmxd.com/forum-93-1.html">å†’éšªå³¶ç§æœè«–å£‡</a><br>
æˆ‘è¨˜å¾—åŸæœ¬æ˜¯å¯ä»¥è¼¸å…¥è³­æ³¨çš„ï¼Œä½†æ˜¯æˆ‘æ¶çš„æœè¼¸å…¥å•é¡Œé‚„æ²’è§£æ±ºï¼Œæ‰€ä»¥å…¨éƒ¨æ”¹ç‚ºçµ±ä¸€è³­æ³¨ï¼Œ<br>
å¦‚æœæœ‰éœ€è¦è¼¸å…¥è³­æ³¨çš„è©±å¯ä»¥è‡ªå·±ä¿®æ”¹æ‰ã€‚<br>
æœ‰ä¸€äº›å·²ç¶“å¾ˆå¤šäººåˆ†äº«éäº†ï¼Œæˆ‘é€™é‚Šå°±å†è²¼ä¸€æ¬¡é †ä¾¿åŠ ä¸Šä¸€äº›è¨»è§£</p>
<p>åœ¨é–‹å§‹ä¹‹å‰å…ˆèªªå¹¾å€‹é‡é»å‡½æ•¸ï¼š</p>
<ol>
<li>Math.random() å‡½æ•¸éš¨æ©Ÿç”¢ç”Ÿä¸€æ•¸åœ¨ç¯„åœ[0ï¼Œ1)ï¼Œå¾0ï¼ˆåŒ…æ‹¬0ï¼‰å¾€ä¸Šï¼Œä½†æ˜¯ä¸åŒ…æ‹¬1ï¼ˆæ’é™¤1ï¼‰ã€‚</li>
<li>Math.floor() å‡½å¼æœƒå›å‚³ç„¡æ¢ä»¶æ¨å»å¾Œçš„æœ€å¤§æ•´æ•¸ã€‚<br>
å…¶ä»–å¯ä»¥åƒè€ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">MDN</a></li>
</ol>
<p>ç«¯å£å¸¸ç”¨çš„å‡½æ•¸ï¼š</p>
<ol>
<li>cm.getPlayer().getCSPoints(1)//åˆ¤æ–·ç©å®¶GASHæ•¸ (1æ˜¯GASH,2æ˜¯æ¥“è‘‰é»æ•¸</li>
<li>cm.getPlayer().modifyCSPoints(1, -50, true); //çµ¦äºˆæˆ–æ‰£é™¤GASH</li>
<li>cm.haveItem(ç‰©å“id,æ•¸);  //åˆ¤æ–­ç©å®¶èƒŒåŒ…æ˜¯å¦æœ‰æ­¤é“å…·</li>
<li>cm.gainItem(ç‰©å“id,æ•¸);  //ç»™äºˆæˆ–è€…æ”¶å–æŒ‡å®šç‰©å“</li>
<li>cm.getPlayer().itemQuantity(ç‰©å“id) //åˆ¤æ–·ç©å®¶èƒŒåŒ…ä¸­é€™å€‹ç‰©å“æœ‰å¤šå°‘æ•¸</li>
<li>cm.getPlayer().getMeso() //åˆ¤æ–·ç©å®¶æ¥“å¹£æ•¸</li>
<li>cm.gainMeso(-10000000); //çµ¦äºˆæˆ–æ‰£é™¤ç©å®¶æ¥“å¹£</li>
<li>cm.getPlayer().getLevel() //åˆ¤æ–·ç©å®¶ç­‰ç´š</li>
<li>cm.worldMessage(6,&quot;å…¬å‘Š&quot;); //6ç‚ºè—å­—å»£æ’­,5ç‚ºç´…å­—å»£æ’­</li>
</ol>
<h2 id="21é»">21é»</h2>
<p><img src="https://Z1Nhouse.github.io//post-images/1582180727380.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582180730513.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582180733154.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582180735242.PNG" alt=""></p>
<p>JS</p>
<pre><code>/*
 * è³­åš21ç‚¹
 *
 *
 */

var text = &quot;&quot;;
var text1 = &quot;&quot;;
var score = 0;
var zhuangScore = 0;
var xianScore = 0;
var paiArray = Array(&quot;A&quot;, 2, 3, 4, 5, 6, 7, 8, 9, 10, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;);
var paiArray2 = Array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10);
var ran = -1;


function start() {
    status = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1) {
        cm.dispose();
    } else {
        if (status == 0 &amp;&amp; mode == 0) {

            cm.sendOk(&quot;æ­¡è¿ä¸‹æ¬¡å…‰è‡¨~&quot;);
            cm.dispose();
            return;
        }
        if (mode == 1) {
            status++;
        } else {
            if (status == 0) {
                cm.sendNext(&quot;æ­¡è¿ä¸‹æ¬¡å…‰è‡¨~&quot;);
                cm.dispose();
            }
            status--;
        }
        if (status == 0) {
            score = cm.getMeso();
            text += &quot;#fUI/UIWindow/Quest/icon3/6# &quot;;
            text += &quot;ä½ å¥½ï¼Œåœ¨æˆ‘é€™è£¡å¯ä»¥ç©21é»ï¼Œä¸€æ¬¡#r50GASH#kå“¦ã€‚&quot;;
            text += &quot; #fUI/UIWindow/Quest/icon3/6#\r\n&quot;;
            text += &quot;#L0# é–‹å§‹éŠæˆ² #l\r\n&quot;;
            text += &quot;#L1# éŠæˆ²èªªæ˜ #l\r\n&quot;;
            cm.sendSimple(text);
        } else if (status == 1) {
            if (selection == 0) {
                cm.sendOk(&quot;è³­å‹ä½ è¦ç¹¼çºŒä¸‹æ³¨å—ï¼Ÿ&quot;);
            } else if (selection == 1) {
                text1 += &quot;#fUI/UIWindow/Quest/icon3/6# &quot;;
                text1 += &quot;ç©æ³•èªªæ˜ï¼š&quot;;
                text1 += &quot; #fUI/UIWindow/Quest/icon3/6#\r\n&quot;;
                text1 += &quot;    èŠå®¶çš„é»æ•¸æœƒåœ¨15é»-22é»ä¹‹é–“ï¼ˆ#rèŠå®¶ä¹Ÿæœ‰å¯èƒ½çˆ†æ‰#kï¼‰ï¼Œä½ æœ‰4æ¬¡è¦ç‰Œçš„æ©Ÿæœƒï¼Œå¦‚æœä½ çš„é»æ•¸å¤§æ–¼èŠå®¶çš„é»æ•¸å³è´å¾—ä½ ä¸‹æ³¨çš„é‡‘é¡ï¼Œå¦‚æœå¤§æ–¼21é»æˆ–è€…å°æ–¼ç­‰æ–¼èŠå®¶çš„é»æ•¸ï¼Œå³è¼¸æ‰ä½ æ‰€ä¸‹æ³¨çš„é‡‘é¡ï¼Œ10ã€Jã€Qã€Kéƒ½ç®—åé»ï¼Œå°è³­æ€¡æƒ…ï¼Œå¤§è³­å‚·äººï¼Œè«‹æ…é‡ã€‚&quot;;
                cm.sendOk(text1);
                cm.dispose();
            }
        }
        //-------------ç¬¬ä¸€æ¬¡è¦ç‰Œ-----------------//
        else if (status == 2) {
            if (cm.getPlayer().getLevel() &lt; 70) {    //é€™é‚Šå¯ä»¥è¨­å®šç©å®¶ç­‰ç´šé™åˆ¶
                cm.sendOk(&quot;å¿…é ˆé”åˆ°70ç´šæ‰èƒ½ä½¿ç”¨ã€‚&quot;);
                cm.dispose();
            } else if (cm.getPlayer().getCSPoints(1) &lt; 50) { //é€™é‚Šå¯ä»¥è¨­ç½®è³­æ³¨
                cm.sendOk(&quot;ä½ æ²’æœ‰50GASH&quot;);
                cm.dispose();
            } else {
                cm.getPlayer().modifyCSPoints(1, -50, true);
                zhuangScore = parseInt(Math.random() * 8 + 15);
                ran = parseInt(Math.random() * paiArray.length);
                xianScore = paiArray2[ran];
                var text2 = &quot;&quot;;
                text2 += &quot;æ‹¿åˆ°äº† #r#e&quot; + paiArray[ran] + &quot;#n#k,æ‚¨ç›®å‰çš„é»æ•¸ç‚ºï¼š #r#e&quot; + xianScore + &quot;#n#k ï¼Œ&quot;;
                text2 += &quot;æ‚¨ç¹¼çºŒè¦ç‰Œå—ï¼Ÿ \r\n&quot;;
                text2 += &quot;#L2# è¦  \r\n&quot;;
                text2 += &quot;#L3# ä¸è¦  \r\n&quot;;
                cm.sendSimple(text2);
            }

        }

        //------------ç¬¬äºŒæ¬¡è¦ç‰Œ------------------//

        else if (status == 3) {
            if (selection == 2) {
                ran = parseInt(Math.random() * paiArray.length);
                xianScore += paiArray2[ran];
                if (xianScore &gt; 21) {
                    cm.sendOk(&quot;å°ä¸èµ·ï¼Œæ‚¨çš„é»æ•¸å¤§æ–¼21é»ï¼Œæ‚¨è¼¸äº†ã€‚&quot;);
                    cm.dispose();
                } else {
                    text2 = &quot;&quot;;
                    text2 += &quot;æ‹¿åˆ°äº† #r#e&quot; + paiArray[ran] + &quot;#n#k,æ‚¨ç›®å‰çš„é»æ•¸ç‚ºï¼š #r#e&quot; + xianScore + &quot;#n#k ï¼Œ&quot;;
                    text2 += &quot;æ‚¨ç¹¼çºŒè¦ç‰Œå—ï¼Ÿ \r\n&quot;;
                    text2 += &quot;#L4# è¦  \r\n&quot;;
                    text2 += &quot;#L5# ä¸è¦  \r\n&quot;;
                    cm.sendSimple(text2);
                }
            } else if (selection == 3) {
                if ((xianScore &lt; 22 &amp;&amp; xianScore &lt;= zhuangScore &amp;&amp; zhuangScore &lt; 22) || (xianScore &gt;= 22 &amp;&amp; zhuangScore &gt;= 22)) {
                    cm.sendOk(&quot;èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨è¼¸äº†ã€‚&quot;);
                    cm.dispose();
                } else {
                    cm.sendOk(&quot;#fUI/UIWindow/Quest/reward#\r\n  èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨è´äº†ã€‚&quot;);
                    cm.worldMessage(6,&quot;[è³­åšå…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´äºŒåä¸€é»è´äº†ï¼Œå°‡ç±Œç¢¼ç¿»äº†ã€å…©å€ã€‘ç²å¾—100é»GASH!&quot;);
                    cm.getPlayer().modifyCSPoints(1, 100, true);
                    cm.gainItem(4031189,1); //é€™è£¡å¯ä»¥å¦å¤–è¨­å®šçå‹µï¼Œä¸è¦çš„è©±å¯åˆªé™¤
                    cm.dispose();
                }
            }


        }
        //-----------ç¬¬ä¸‰æ¬¡è¦ç‰Œ---------------
        else if (status == 4) {
            if (selection == 4) {
                ran = parseInt(Math.random() * paiArray.length);
                xianScore += paiArray2[ran];
                if (xianScore &gt; 21) {
                    cm.sendOk(&quot;å°ä¸èµ·ï¼Œæ‚¨çš„é»æ•¸å¤§æ–¼21é»ï¼Œæ‚¨è¼¸äº†&quot;);
                    cm.dispose();
                } else {
                    text2 = &quot;&quot;;
                    text2 += &quot;æ‹¿åˆ°äº† #r#e&quot; + paiArray[ran] + &quot;#n#k,æ‚¨ç›®å‰çš„é»æ•¸ç‚ºï¼š #r#e&quot; + xianScore + &quot;#n#k ï¼Œ&quot;;
                    text2 += &quot;æ‚¨ç¹¼çºŒè¦ç‰Œå—ï¼Ÿ \r\n&quot;;
                    text2 += &quot;#L6# è¦  \r\n&quot;;
                    text2 += &quot;#L7# ä¸è¦  \r\n&quot;;
                    cm.sendSimple(text2);
                }
            } else if (selection == 5) {
                if ((xianScore &lt; 22 &amp;&amp; xianScore &lt;= zhuangScore &amp;&amp; zhuangScore &lt; 22) || (xianScore &gt;= 22 &amp;&amp; zhuangScore &gt;= 22)) {
                    cm.sendOk(&quot;èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨è¼¸äº†ã€‚&quot;);
                    cm.dispose();
                } else {
                    cm.sendOk(&quot;#fUI/UIWindow/Quest/reward#\r\n  èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨è´äº†ã€‚&quot;);
                    cm.worldMessage(6,&quot;[è³­åšå…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´äºŒåä¸€é»è´äº†ï¼Œå°‡ç±Œç¢¼ç¿»äº†ã€å…©å€ã€‘ç²å¾—100é»GASH!&quot;);
                    cm.getPlayer().modifyCSPoints(1,100, true);
                    cm.gainItem(4031189,1);
                    cm.dispose();
                }
            }


        }

        //--------ç¬¬å››æ¬¡è¦ç‰Œ----------
        else if (status == 5) {
            if (selection == 6) {
                ran = parseInt(Math.random() * paiArray.length);
                xianScore += paiArray2[ran];
                if (xianScore &gt; 21) {
                    cm.sendOk(&quot;å°ä¸èµ·ï¼Œæ‚¨çš„é»æ•¸å¤§æ–¼21é»ï¼Œæ‚¨è¼¸äº†&quot;);
                    cm.dispose();
                } else {
                    if ((xianScore &lt; 22 &amp;&amp; xianScore &lt;= zhuangScore &amp;&amp; zhuangScore &lt; 22) || (xianScore &gt;= 22 &amp;&amp; zhuangScore &gt;= 22)) {
                        cm.sendOk(&quot;èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨è¼¸äº†ã€‚&quot;);
                        cm.dispose();
                    } else {
                        cm.sendOk(&quot;#fUI/UIWindow/Quest/reward#\r\n  èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨è´äº†ã€‚&quot;);
                        cm.worldMessage(6,&quot;[è³­åšå…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´äºŒåä¸€é»è´äº†ï¼Œå°‡ç±Œç¢¼ç¿»äº†ã€å…©å€ã€‘ç²å¾—100é»GASH!&quot;);
                        cm.getPlayer().modifyCSPoints(1, 100, true);
                        cm.gainItem(4031189,1);
                        cm.dispose();
                    }
                }

            } else if (selection == 7) {
                if ((xianScore &lt; 22 &amp;&amp; xianScore &lt;= zhuangScore &amp;&amp; zhuangScore &lt; 22) || (xianScore &gt;= 22 &amp;&amp; zhuangScore &gt;= 22)) {
                    cm.sendOk(&quot;èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨æ˜¯è¼¸äº†ã€‚&quot;);
                    cm.dispose();
                } else {
                    cm.sendOk(&quot;#fUI/UIWindow/Quest/reward#\r\n  èŠå®¶çš„é»æ•¸ç‚º #r#e&quot; + zhuangScore + &quot;#n#k,æ‚¨çš„é»æ•¸ç‚º #r#e&quot; + xianScore + &quot;#n#k,æ‚¨è´äº†ã€‚&quot;);
                    cm.worldMessage(6,&quot;[è³­åšå…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´äºŒåä¸€é»è´äº†ï¼Œå°‡ç±Œç¢¼ç¿»äº†ã€å…©å€ã€‘ç²å¾—100é»GASH!&quot;);
                    cm.getPlayer().modifyCSPoints(1, 100, true);
                    cm.gainItem(4031189,1);
                    cm.dispose();
                }
            }
        }
    }
}
</code></pre>
<h2 id="åå€è³­åšæ©Ÿ">åå€è³­åšæ©Ÿ</h2>
<p>å…¶å¯¦å°±åªæ˜¯ä¸€å€‹é é‹æ°£çš„æ©Ÿå™¨ï¼Œæ²’æœ‰ä»€éº¼ç©æ³•ã€‚<br>
<img src="https://Z1Nhouse.github.io//post-images/1582181073121.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582181075673.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582181077807.PNG" alt=""><br>
é€™æ˜¯è´çš„æ™‚å€™æœƒæœ‰çš„å»£æ’­<br>
<img src="https://Z1Nhouse.github.io//post-images/1582181080251.PNG" alt=""></p>
<p>JS</p>
<pre><code>var status = 0;
var fee;
var chance = Math.floor(Math.random() * 12 + 1); //é€™è£¡å¯ä»¥è¨­å®šæ©Ÿç‡

function start() {
    status = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1) {
        cm.dispose();
    } else {
        if (mode == 0) {
            cm.sendOk(&quot;#i3994125# - æˆ‘æœƒç¹¼çºŒåœ¨é€™è£¡ç­‰è‘—ä½ ã€‚&quot;);
            cm.dispose();
            return;
        }
        if (mode == 1)
            status++;
        else
            status--;
        if (status == 0) {
            cm.sendAcceptDecline(&quot;#rã€åå€è³­åšæ©Ÿã€‘\r\n#d-çœ‹ä¾†ä½ çš„å¿ƒå¾ˆå¤§å•Šï¼Œå…¶ä»–è³­åšæ©Ÿæ»¿è¶³ä¸äº†ä½ äº†å—ï¼Ÿ#i3994125# #k\r\n &quot;);
        } else if (status == 1) {
            cm.sendOk(&quot;#i3994125#\r\nå¦‚æœä½ èƒ½è´æˆ‘ï¼Œæˆ‘æœƒå°‡ä½ çš„ç±Œç¢¼æ•¸å€å¥‰é‚„ï¼Œè€Œä¸”é‚„æœ‰ç¥ç§˜ç¦®å“&quot;);
        } else if (status == 2) {
            fee = cm.getText();
            cm.sendYesNo(&quot;#i3994125# - ä½ ç¢ºèªè¦ç¹¼çºŒä¸‹æ³¨å—ï¼Ÿä¸€æ¬¡æ¶ˆè€—#r50GASH#kã€‚&quot;);
        } else if (status == 3) {
            if (cm.getPlayer().getLevel() &lt; 70) {
                cm.sendOk(&quot;å¿…é ˆé”åˆ°70ç´šæ‰èƒ½ä½¿ç”¨ã€‚&quot;);
                cm.dispose();
            } else if (cm.getPlayer().getCSPoints(1) &lt; 50) {
                cm.sendOk(&quot;ä½ æ²’æœ‰50GASH&quot;);
                cm.dispose();
            } else {
                if (chance &lt;= 1) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;#i3994125# - #rä½ è¼¸äº†#k&quot;);
                   // cm.worldMessage(6, &quot;[è³­å ´å…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getChar().getName() + &quot; ï¼Œåœ¨è³­å ´åå€è³­åšæ©Ÿè¼¸äº†ï¼Œçœ‹ä¾†ä»Šå¤©ä¸¦ä¸è¢«å¥³ç¥çœ·é¡§!&quot;);
                    cm.dispose();
                } else if (chance == 2) {
                    cm.sendNext(&quot;#i3994125# - #ré€™æŠŠä¸ç®—ï¼Œé‡æ–°å†ä¾†ï¼Œä½ æ‰‹ä¸è¦æŠ–å‹•ã€‚#k&quot;);
                    cm.dispose();
                } else if (chance == 3) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;#i3994125# - #rä½ è¼¸äº†#k&quot;);
                    cm.dispose();
                } else if (chance == 4) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;#i3994125# - #rä½ è¼¸äº†#k&quot;);
                    cm.dispose();
                } else if (chance == 5) {
                    cm.sendNext(&quot;#i3994125# - #ré€™æŠŠä¸ç®—ï¼Œé‡æ–°å†ä¾†ï¼Œä½ æ‰‹ä¸è¦æŠ–å‹•ã€‚#k&quot;);
                    cm.dispose();
                } else if (chance == 6) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;#i3994125# - #rä½ è¼¸äº†#k&quot;);
                    cm.dispose();
                } else if (chance == 7) {
                    cm.sendNext(&quot;#i3994125# - #ré€™æŠŠä¸ç®—ï¼Œé‡æ–°å†ä¾†ï¼Œä½ æ‰‹ä¸è¦æŠ–å‹•ã€‚#k&quot;);
                    cm.dispose();
                } else if (chance == 8) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;#i3994125# - #rä½ è¼¸äº†#k&quot;);
                    cm.dispose();
                } else if (chance == 9) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;#i3994125# - #rä½ è¼¸äº†#k&quot;);
                    cm.dispose();
                } else if (chance == 10) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;#i3994125# - #rä½ è¼¸äº†#k&quot;);
                    cm.dispose();
                } else if (chance == 11) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    cm.sendNext(&quot;å“¦Â·Â·ä½ çš„é‹æ°£ä¸æ€éº¼å¥½å“¦Â·Â·å“ˆå“ˆ å†ä¾†ä¸€æŠŠå˜›!&quot;);
                    cm.dispose();
                } else if (chance &gt;= 12) {
                    cm.getPlayer().modifyCSPoints(1, 500, true);
                    cm.gainItem(4031189,1);
                    cm.sendNext(&quot;#i3994125# -#rä¸éŒ¯å“¦ï¼Œæ­å–œä½ è´äº†ï¼Œæˆ‘é¡˜è³­æœè¼¸!ç²å¾—500é»æ•¸&quot;);
                    cm.worldMessage(6,&quot;[è³­å ´å…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´åå€è³­åšæ©Ÿè´äº†ï¼Œå°‡ç±Œç¢¼ç¿»äº†ã€åå€ã€‘ç²å¾—500é»æ•¸!&quot;);
                    cm.dispose();
                }
            }
        }
    }
}
</code></pre>
<h2 id="æ¯”å¤§å°">æ¯”å¤§å°</h2>
<p><img src="https://Z1Nhouse.github.io//post-images/1582181213643.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582181219832.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582181222722.PNG" alt=""><br>
JS</p>
<pre><code>var status = 0;
//var é»‘æ°´æ™¶ = 4021008;
//var è—è‰²ç®­é ­ = &quot;#fUI/UIWindow/Quest/icon2/7#&quot;;
//var ç´…è‰²ç®­é ­ = &quot;#fUI/UIWindow/Quest/icon6/7#&quot;;
//var åœ“å½¢ = &quot;#fUI/UIWindow/Quest/icon3/6#&quot;;
//var ç¾åŒ–new = &quot;#fUI/UIWindow/Quest/icon5/1#&quot;;
//var é©šå˜†è™Ÿ = &quot;#fUI/UIWindow/Quest/icon0#&quot;;
var æ­£æ–¹ç®­é ­ = &quot;#fUI/Basic/BtHide3/mouseOver/0#&quot;;
/*ä»¥ä¸Šéƒ½æ˜¯å°åœ–ç¤ºè·¯å¾‘ï¼Œç”¨ä¾†è£é£¾çš„ï¼Œå¯ä»¥ä¿®æ”¹*/
function start() {
    status = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1) {
        cm.dispose();
    } else {
        if (status &gt;= 0 &amp;&amp; mode == 0) {
            cm.dispose();
            return;
        }
        if (mode == 1)
            status++;
        else
            status--;
        if (status == 0) {
            var a1 = &quot;#L1##b&quot; + æ­£æ–¹ç®­é ­ + &quot; 50 GASH ã€å¤§ã€‘ã€å°ã€‘\r\n&quot;;
            var a2 = &quot;#L2##b&quot; + æ­£æ–¹ç®­é ­ + &quot; 250GASH ã€å¤§ã€‘ã€å°ã€‘\r\n&quot;;
            var a3 = &quot;#L3##b&quot; + æ­£æ–¹ç®­é ­ + &quot; 500GASH ã€å¤§ã€‘ã€å°ã€‘\r\n&quot;;


            cm.sendSimple(&quot;\r\n#d-ä¾†ä¾†ä¾†ï¼Œè²·å¤§è²·å°ï¼Œè²·å®šé›¢æ‰‹#i3994122# #rã€å¤§å°è³­åšæ©Ÿã€‘\r\n#r  ã€è³ ç‡ã€‘1:2ã€æ¦‚ç‡ã€‘5:5\r\n&quot; + a1 + &quot;&quot; + a2 + &quot;&quot; + a3 + &quot;&quot;);

        } else if (selection == 1) {
            if (cm.getPlayer().getLevel() &lt; 70) {
                cm.sendOk(&quot;å¿…é ˆé”åˆ°70ç´šæ‰èƒ½ä½¿ç”¨ã€‚&quot;);
                cm.dispose();
                return;
            } else {
                if (cm.getPlayer().getCSPoints(1) &gt;= 50) {
                    cm.getPlayer().modifyCSPoints(1, -50, true);
                    var rand = Math.floor(Math.random() * 100);
                    if (rand &lt; 50) {
                        cm.getPlayer().modifyCSPoints(1, 100, true);
                        cm.gainItem(4031189,1);
                        cm.sendOk(&quot;æ­å–œä½ ï¼Œè´äº†&quot;);
                        cm.dispose();
                        cm.worldMessage(6,&quot;[è³­å ´å…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´é¸å¤§å°é»è´äº†ï¼Œå°‡ç±Œç¢¼x1ç¿»äº†ã€å…©å€ã€‘ç²å¾—100é»GASH!&quot;);
                        return;
                    } else {
                        cm.sendOk(&quot;å”‰ï¼Œè¼¸äº†&quot;);
                        cm.dispose();
                        return;
                    }
                } else {
                    cm.sendOk(&quot;ä½ æ²’æœ‰è¶³å¤ çš„GASH.~&quot;);
                    cm.dispose();
                    return;
                }
            }
        } else if (selection == 2) {
            if (cm.getPlayer().getLevel() &lt; 25) {
                cm.sendOk(&quot;å¿…é ˆé”åˆ°25ç´šæ‰èƒ½ä½¿ç”¨ã€‚&quot;);
                cm.dispose();
                return;
            } else {

                if (cm.getPlayer().getCSPoints(1) &gt;= 250) {
                    cm.getPlayer().modifyCSPoints(1, -250, true);
                    var rand = Math.floor(Math.random() * 100);
                    if (rand &lt; 50) {
                        cm.getPlayer().modifyCSPoints(1, 500, true);
                        cm.gainItem(4031189,1);
                        cm.sendOk(&quot;æ­å–œä½ ï¼Œè´äº†&quot;);
                        cm.dispose();
                        cm.worldMessage(6,&quot;[è³­å ´å…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´é¸å¤§å°é»è´äº†ï¼Œå°‡ç±Œç¢¼x5ç¿»äº†ã€å…©å€ã€‘ç²å¾—500é»GASH!&quot;);
                        return;
                    } else {
                        cm.sendOk(&quot;å”‰ï¼Œè¼¸äº†&quot;);
                        cm.dispose();
                        return;
                    }
                } else {
                    cm.sendOk(&quot;ä½ æ²’æœ‰è¶³å¤ çš„GASH~&quot;);
                    cm.dispose();
                    return;
                }
            }
        } else if (selection == 3) {
            if (cm.getPlayer().getLevel() &lt; 25) {
                cm.sendOk(&quot;å¿…é ˆé”åˆ°25ç´šæ‰èƒ½ä½¿ç”¨ã€‚&quot;);
                cm.dispose();
                return;
            } else {
                if (cm.getPlayer().getCSPoints(1) &gt;= 500) {
                    cm.getPlayer().modifyCSPoints(1, -500, true);
                    var rand = Math.floor(Math.random() * 100);
                    if (rand &lt; 50) {
                        cm.getPlayer().modifyCSPoints(1, 1000, true);
                        cm.gainItem(4031189,1);
                        cm.sendOk(&quot;æ­å–œä½ ï¼Œè´äº†&quot;);
                        cm.dispose();
                        cm.worldMessage(6,&quot;[è³­å ´å…¬å‘Š]ï¼šç©å®¶ &quot; + cm.getPlayer().getName() + &quot; ï¼Œåœ¨è³­å ´é¸å¤§å°é»è´äº†ï¼Œå°‡ç±Œç¢¼x10ç¿»äº†ã€å…©å€ã€‘ç²å¾—1000é»GASH!&quot;);
                        return;
                    } else {
                        cm.sendOk(&quot;å”‰ï¼Œè¼¸äº†&quot;);
                        cm.dispose();
                        return;
                    }
                } else {
                    cm.sendOk(&quot;ä½ æ²’æœ‰è¶³å¤ çš„GASH~&quot;);
                    cm.dispose();
                    return;
                }
            }
        }
    }
}
</code></pre>
<h2 id="è¸©åœ°é›·">è¸©åœ°é›·</h2>
<p><img src="https://Z1Nhouse.github.io//post-images/1582181391411.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582181395341.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582181398002.PNG" alt=""><br>
å‹åˆ©çš„æ™‚å€™ä¹Ÿæœƒæœ‰æ™‚é–“é¡¯ç¤º<br>
<img src="https://Z1Nhouse.github.io//post-images/1582181400378.PNG" alt=""><br>
JS</p>
<pre><code>var DEBUG = false;
var HIDDEN_ITEM = 4031325, MINE_ITEM = 5021013, EXPLODED_ITEM = 5120009;//é€™é‚Šå¯ä»¥è¨­å®šéš±è—çš„åœ–ç¤º(HIDDEN_ITEM)ã€é­ç‚®çš„åœ–ç¤º(EXPLODED_ITEM)ã€åœ°é›·çš„åœ–ç¤º(MINE_ITEM)
var Modes = [
    [&quot;#dç°¡å–®#k&quot;, 5, 5, 4], //5*5 , æœ‰3å€‹åœ°é›·+1å€‹é­ç‚®
    [&quot;#bä¸­ç­‰#k&quot;, 6, 6, 8], //6*6 , æœ‰7å€‹åœ°é›·+1å€‹é­ç‚®
    [&quot;#rå›°é›£#k&quot;, 7, 7, 15] //7*7 , æœ‰14å€‹åœ°é›·+1å€‹é­ç‚®
];
var text = &quot;&quot;;

var status;
var Board, Revealed;
var VALUE_REVEALED = 1, VALUE_HIDDEN = 0;
var ModeSelected = -1, StartTime = -1, NumCols = -1,
        NumRows = -1, NumMines = -1, LeftToBeRevealed = -1;
var Neighbors = [
    [-1, -1], [-1, 0], [-1, 1], [0, -1],
    [0, 1], [1, -1], [1, 0], [1, 1]
];
var Numbers = [ //é€™é‚Šå¯ä»¥è¨­å®šæ•¸å­—çš„æ¨£å¼,é è¨­æ˜¯è£é£¾è–èª•æ¨¹çš„ç´…è‰²æ•¸å­—
    3990009, 3990000, 3990001, 3990002, 3990003,
    3990004, 3990005, 3990006, 3990007, 3990008
];

function start() {
    status = -1;
    action(1, 0, 0);
}
function Header() {
    return &quot;#d============ è¸©åœ°é›· ============#k\r\n\r\n&quot;;
}
function ConstructModeSelectionString() {
    var ret = &quot;&quot;;
    for (var i = 0; i &lt; Modes.length; i++) {
        ret += &quot;#L&quot; + i + &quot;#&quot; + Modes[i][0] + &quot; (&quot; + Modes[i][1] + &quot;x&quot; + Modes[i][2] + &quot;) åœ°é›·æ•¸: &quot; + Modes[i][3] + &quot;#l\r\n&quot;;
    }
    return ret;
}
function InitializeBoard() {

    NumCols = Modes[ModeSelected][1];
    NumRows = Modes[ModeSelected][2];

    NumMines = Modes[ModeSelected][3];

    LeftToBeRevealed = NumCols * NumRows - NumMines;
    if (LeftToBeRevealed == 21) {
        text = &quot;ç°¡å–®æ¨¡å¼&quot;;
    } else if (LeftToBeRevealed == 28) {
        text = &quot;ä¸­ç­‰æ¨¡å¼&quot;;
    } else if (LeftToBeRevealed == 34) {
        text = &quot;å›°é›£æ¨¡å¼&quot;;
    }
    Board = new Array(NumCols);
    for (var i = 0; i &lt; NumCols; i++) {
        Board[i] = new Array(NumRows);
    }
    Revealed = new Array(NumCols);
    for (i = 0; i &lt; NumCols; i++) {
        Revealed[i] = new Array(NumRows);
        for (var j = 0; j &lt; NumRows; j++) {
            Revealed[i][j] = VALUE_HIDDEN;
        }
    }
    InitializeMines();
    InitializeMineCounts();
    InitializeBlankSpaces();
}
function InitializeMines() {
    var AllPosition = new Array(NumRows * NumCols);
    for (var i = 0; i &lt; NumCols; i++) {
        for (var j = 0; j &lt; NumRows; j++) {
            AllPosition[(i * NumCols) + j] = [i, j];
        }
    }
    Shuffle(AllPosition);
    for (i = 0; i &lt; NumMines &amp;&amp; AllPosition.length &gt; 0; i++) {
        var NewMine = AllPosition.pop();
        Board[NewMine[0]][NewMine[1]] = MINE_ITEM;
    }
}
function InitializeMineCounts() {
    for (var r = 0; r &lt; NumCols; r++) {
        for (var c = 0; c &lt; NumRows; c++) {
            if (Board[r][c] != MINE_ITEM) {
                var Count = 0;
                for (var k = 0; k &lt; Neighbors.length; k++) {
                    var NewR = r + Neighbors[k][0];
                    var NewC = c + Neighbors[k][1]
                    if (ValidPosition(NewR, NewC) &amp;&amp; Board[NewR][NewC] == MINE_ITEM) {
                        Count++;
                    }
                }
                Board[r][c] = Numbers[Count];
            }
        }
    }
}
function InitializeBlankSpaces() {
    for (var i = 0; i &lt; NumCols; i++) {
        for (var j = 0; j &lt; NumRows; j++) {
            if (Board[i][j] == null) {
                Board[i][j] = HIDDEN_ITEM;
            }
        }
    }
}
function ConstructBoardString() {
    var ret = &quot;å‰©ä¸‹çš„æ•¸å­—æ•¸ç›®: &quot; + LeftToBeRevealed + &quot;\r\n&quot;;
    var num = 0;
    for (var i = 0; i &lt; NumCols; i++) {
        for (var j = 0; j &lt; NumRows; j++) {
            if (Revealed[i][j] == VALUE_REVEALED) {
                ret += &quot;#L&quot; + num + &quot;##v&quot; + Board[i][j] + &quot;##l&quot;;
            } else {
                if (DEBUG &amp;&amp; Board[i][j] == MINE_ITEM) {
                    ret += &quot;#L&quot; + num + &quot;##v&quot; + MINE_ITEM + &quot;##l&quot;;
                } else {
                    ret += &quot;#L&quot; + num + &quot;##v&quot; + HIDDEN_ITEM + &quot;##l&quot;;
                }
            }
            num++;
        }
        ret += &quot;\r\n&quot;;
    }
    return ret;
}
function ConstructEndBoardString() {
    var ret = &quot;&quot;;
    var num = 0;
    for (var i = 0; i &lt; NumCols; i++) {
        for (var j = 0; j &lt; NumRows; j++) {
            if (Revealed[i][j] == VALUE_REVEALED) {
                if (Board[i][j] == MINE_ITEM) {
                    ret += &quot;#v&quot; + EXPLODED_ITEM + &quot;#&quot;;
                } else {
                    ret += &quot;#v&quot; + Board[i][j] + &quot;#&quot;;
                }
            } else {
                if (Board[i][j] == MINE_ITEM) {
                    ret += &quot;#v&quot; + MINE_ITEM + &quot;#&quot;;
                } else {
                    ret += &quot;#v&quot; + HIDDEN_ITEM + &quot;#&quot;;
                }
            }
            num++;
        }
        ret += &quot;\r\n&quot;;
    }
    return ret;
}
function Shuffle(arr) {
    var i = arr.length;
    if (i == 0)
        return;
    while (--i) {
        var j = Math.floor(Math.random() * (i + 1));
        var tempi = arr[i];
        var tempj = arr[j];
        arr[i] = tempj;
        arr[j] = tempi;
    }
}
function ValidPosition(r, c) {
    return r &gt;= 0 &amp;&amp; r &lt; NumRows &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; NumCols;
}
function GetPositionFromSelection(sel) {
    return [(sel / NumCols) | 0, (sel % NumCols) | 0];
}
function IsGameOver() {
    return LeftToBeRevealed == 0;
}
function GetGameTime(End) {
    var Diff = End - StartTime;
    var MilliSec = (Diff % 1000) | 0;
    Diff /= 1000;
    var Min = (Diff / 60) | 0;
    var Sec = (Diff % 60) | 0;
    return ((Min &lt; 10) ? &quot;0&quot; + Min : Min) + &quot;:&quot; + ((Sec &lt; 10) ? &quot;0&quot; + Sec : Sec)
            + &quot;.&quot; + ((MilliSec &lt; 100) ? &quot;0&quot; + ((MilliSec &lt; 10) ? &quot;0&quot; + MilliSec : MilliSec) : MilliSec);

}
function action(mode, type, selection) {
    if (mode == -1 || mode == 0)
        cm.dispose();
    else {
        if (status != 2)
            status++;

        if (status == 0) {
            cm.sendSimple(Header() + &quot;è«‹é¸æ“‡æ¨¡å¼:\r\n&quot; + ConstructModeSelectionString())
        } else if (status == 1) {
            if (selection &lt; 0 || selection &gt; Modes.length) {
                cm.dispose();
                return;
            }
            ModeSelected = selection;
            InitializeBoard();
            cm.sendSimple(Header() + ConstructBoardString());
        } else if (status == 2) {
            if (StartTime == -1) {
                StartTime = (new Date()).getTime();
            }
            var SendStr = Header();
            var Move = GetPositionFromSelection(selection);
            if (!ValidPosition(Move[0], Move[1])) {
                cm.sendOk(&quot;PE Detected ...&quot;);
                return;
            }
            if (Revealed[Move[0]][Move[1]] == VALUE_REVEALED) {
                SendStr += &quot;è©²ç©ºæ ¼å·²è¢«æ‰“é–‹å•Ÿ ...\r\n\r\n&quot; + ConstructBoardString();
                cm.sendSimple(SendStr);
                return;
            }
            Revealed[Move[0]][Move[1]] = VALUE_REVEALED;
            LeftToBeRevealed--;
            SendStr += ConstructBoardString();
            if (Board[Move[0]][Move[1]] == MINE_ITEM) {
                cm.sendOk(Header() + ConstructEndBoardString() + &quot;\r\nä½ è¼¸äº†!! éŠæˆ²æ™‚é–“: &quot; + GetGameTime((new Date()).getTime()));
                cm.dispose();
            } else {
                if (IsGameOver()) {
                    cm.sendOk(Header() + ConstructEndBoardString() + &quot;\r\nä½ è´äº†!! éŠæˆ²æ™‚é–“: &quot; + GetGameTime((new Date()).getTime()));
                    cm.worldMessage(6,&quot;ã€è¸©åœ°é›·å°éŠæˆ²ã€ï¼šæ­å–œç©å®¶:&quot; + cm.getPlayer().getName() + &quot; èŠ±è²»: &quot; + GetGameTime((new Date()).getTime()) + &quot; æˆåŠŸå®Œæˆäº†&quot; + text + &quot;çš„è¸©åœ°é›·!!!&quot;);
                    cm.getPlayer().modifyCSPoints(1, 200, true);
                    cm.gainItem(4031189,1);
                    cm.dispose();
                } else {
                    cm.sendSimple(SendStr);
                }
            }
        }
    }
}  
</code></pre>
<h2 id="è€è™æ©Ÿ">è€è™æ©Ÿ</h2>
<p><img src="https://Z1Nhouse.github.io//post-images/1582182104809.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582182107636.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582182112209.PNG" alt=""><br>
é€™å€‹æœ¬ä¾†ä¹Ÿæ˜¯ä¸‹è³­æ³¨çš„ï¼Œä½†æˆ‘ä¸€æ¨£æŠŠå®ƒæ”¹æˆå›ºå®šé‡‘é¡1000w</p>
<p>JS</p>
<pre><code>/*è€è™æ©Ÿ*/

var status = 0;
var fee;
var winner;
var item=4021000;

var card1 = Math.floor(Math.random()*8+item);
var card2 = Math.floor(Math.random()*8+item);
var card3 = Math.floor(Math.random()*8+item);
var card4 = Math.floor(Math.random()*8+item);
var card5 = Math.floor(Math.random()*8+item);
var card6 = Math.floor(Math.random()*8+item);
var card7 = Math.floor(Math.random()*8+item);
var card8 = Math.floor(Math.random()*8+item);
var card9 = Math.floor(Math.random()*8+item);
/*é€™å°è€è™æ©Ÿæ˜¯ç”¨å„é¡æ°´æ™¶ä¾†éŠæˆ²çš„ï¼Œå¾4021000(çŸ³æ¦´çŸ³)-4021007(é‘½çŸ³)*/

function start() {
status = -1;
action(1, 0, 0);
}

function action(mode, type, selection) {

if (mode == -1) {
cm.dispose();
} else {
if (mode == 0) {
cm.sendOk(&quot;ä½ çš„æå¤±ã€‚ä½ æˆ–è¨±å¯ä»¥è´å¾—å¤§éŒ¢ã€‚&quot;);
cm.dispose();
return;
}

if (mode == 1)
status++;
else
status--;

if (status == 0) {
cm.sendNext(&quot;ä½ æƒ³ç©#bè€è™æ©Ÿ#kå—? é€™å€‹æ©Ÿå°æ˜¯å…­å€çš„è³ ç‡å–”!!\r\n#v4021000##v4021001##v4021002##v4021003##v4021004##v4021005##v4021006##v4021007#å¯¶çŸ³é€£ç·šï¼Œå°±å¯ç²å‹&quot;);
} else if (status == 1) {
fee = 10000000;
cm.sendYesNo(&quot;ä½ ç¢ºå®šè¦ä¸‹æ³¨ #r&quot; + fee + &quot;#k æ¥“å¹£å—?... &quot;);
} else if (status == 2) {
if (cm.getMeso() &lt; fee) {
cm.sendOk(&quot;ä½ æ²’æœ‰é‚£éº¼å¤šéŒ¢&quot;);
cm.dispose();
} else if (cm.getMeso() + fee * 6 &gt; 2100000000) {
cm.sendOk(&quot;å¦‚æœä½ è´äº†é€™ä¸€æŠŠï¼Œèº«ä¸Šçš„éŒ¢æœƒè¶…é21å„„ï¼Œè«‹å…ˆå°‡é‡‘éŒ¢å­˜æ”¾è‡³å€‰åº«ã€‚&quot;);
cm.dispose();
} else { //é€™é‚Šæ˜¯åˆ¤æ–·é€£ç·šçš„éƒ¨åˆ†
if (card1 == card2 &amp;&amp; card2 == card3) {
winner = 1;
} else if (card1 == card5 &amp;&amp; card5 == card9) {
winner = 1;
} else if (card4 == card5 &amp;&amp; card5 == card6) {
winner = 1;
} else if (card7 == card8 &amp;&amp; card8 == card9) {
winner = 1;
} else if (card7 == card5 &amp;&amp; card5 == card3) {
winner = 1;
} else if (card1 == card4 &amp;&amp; card4 == card7) {
winner = 1;
} else if (card2 == card5 &amp;&amp; card5 == card8) {
winner = 1;
} else if (card3 == card6 &amp;&amp; card6 == card9) {
winner = 1;
} else {
winner = 2;
}

if (winner == 1) {

cm.sendOk(&quot;è€è™æ©Ÿ: \r\n\r\n#v&quot; +
card1 + &quot;##v &quot; + card2 + &quot;##v &quot; + card3 + &quot;# \r\n#v&quot; +
card4 + &quot;##v &quot; + card5 + &quot;##v &quot; + card6 + &quot;# \r\n#v&quot; +
card7 + &quot;##v &quot; + card8 + &quot;##v &quot; + card9 +
&quot;#\r\n\r\n æ­å–œï¼ä½ è´äº†ï¼&quot;);

cm.gainMeso(fee * 6); //é€™è£¡è¨­å®šçå‹µ
cm.gainItem(4031189,1);
cm.dispose();

} else if (winner == 2) {

cm.sendOk(&quot;è€è™æ©Ÿ: \r\n\r\n#v&quot; +
card1 + &quot;##v &quot; + card2 + &quot;##v &quot; + card3 + &quot;# \r\n#v&quot; +
card4 + &quot;##v &quot; + card5 + &quot;##v &quot; + card6 + &quot;# \r\n#v&quot; +
card7 + &quot;##v &quot; + card8 + &quot;##v &quot; + card9 +
&quot;#\r\n\r\n ä½ è¼¸äº†ï¼å†æ¥å†å²ï¼&quot;);

cm.gainMeso(-fee);
cm.dispose();

} else {
cm.dispose();
}
}
}
}
}

</code></pre>
<h2 id="black-jack-ç²¾ç·»ç‰ˆçš„21é»è…³æœ¬">Black Jack ç²¾ç·»ç‰ˆçš„21é»è…³æœ¬</h2>
<p>ä¾†æºï¼š<a href="http://forum.ragezone.com/f427/add-blackjack-npc-750290/">Sharky</a></p>
<figure data-type="image" tabindex="1"><img src="https://xinchistory.com/ckeditor_upload/uploads/1582557264_GDlbvEBCseiCt26.PNG" alt=""></figure>
<pre><code class="language-JavaScript">/**
*
* @author Sharky
* @info BlackJack NPC
*/
importPackage(java.lang);
var debug = false; // set to true for debugging checks to appear in your .bat files
var status = 0, bet, selected;
var whichFunction = {&quot;HowToPlay&quot; : false, &quot;PlayGame&quot; : false, &quot;SpendChips&quot; : false};
var playingAction = {&quot;Hit&quot; : false, &quot;Stay&quot; : false};
var CardsInDeck = [[], []], CardsInPlayerHand = [[], []], CardsInDealerHand = [[], []];
var prizes = [[4001008], [10]]; // Item 4001008 (Pass) costs 10 Chips
// var prizes = [[enter, item, ids, here, like, so], [enter, amount, of, chips, needed, for, corresponding, item, here, like, so]];

function start() {
cm.sendSimple(&quot;ä½ å¥½ï¼æˆ‘æ˜¯#rBlackJackèŠå®¶#k.#b \r\n\t#L0#æˆ‘è©²æ€éº¼ç©BlackJackï¼Ÿ#l \r\n\t#L1#æˆ‘æƒ³ç©Black Jackï¼#l \r\n\t#L2#æˆ‘æƒ³ç”¨æˆ‘çš„Black Jack ç±Œç¢¼æ›å–çå“ï¼#l&quot;);
}

function action(m,t,s) {
if(m == -1 || (m != 1 &amp;&amp; whichFunction[&quot;PlayGame&quot;])) {
cm.dispose();
return;
} else {
if(m == 1) {
status++;
} else {
status--;
}
if(!whichFunction[&quot;HowToPlay&quot;] &amp;&amp; !whichFunction[&quot;PlayGame&quot;] &amp;&amp; !whichFunction[&quot;SpendChips&quot;]) {
whichFunction[s == 0 ? &quot;HowToPlay&quot; : s == 1 ? &quot;PlayGame&quot; : &quot;SpendChips&quot;] = true;
}
if(whichFunction[&quot;HowToPlay&quot;]) {
HowToPlay();
} else if (whichFunction[&quot;PlayGame&quot;]) {
PlayGame(s);
} else if (whichFunction[&quot;SpendChips&quot;]) {
SpendChips(s);
}
}
}

function HowToPlay() {
if(status == 1) {
if(debug) {
System.out.println(&quot;HowToPlay() is progressing...&quot;);
}
cm.sendNext(&quot;å¥½å§ï¼Œæˆ‘çœ‹åˆ°æˆ‘å€‘é€™è£¡æœ‰ä¸€å€‹èœé³¥ï¼ä¸ç”¨æ“”å¿ƒï¼Œæˆ‘æœƒå¾ˆæ¨‚æ„æ•™æ‚¨å¦‚ä½•ç© #rBlackJack#k!&quot;);
} else if (status == 2) {
cm.sendNextPrev(&quot;ç³»çµ±æœƒçµ¦æ‚¨ #bç±Œç¢¼#kç©éŠæˆ²ã€‚é€™äº›#bç±Œç¢¼#k æ˜¯çµ¦æ‚¨ç”¨ä¾†ä¸‹æ³¨çš„ï¼åœ¨ç™¼çµ¦æ‚¨ä»»ä½•ç‰Œä¹‹å‰ï¼Œæ‚¨å¿…é ˆå…ˆä¸‹æ³¨ã€‚å¦‚æœæ‚¨è´å¾—ä¸€è¼ªï¼Œæ‚¨çš„ç±Œç¢¼å°‡å¢åŠ ä¸€å€ï¼Œå¦‚æœæ‚¨åªæŠ½å…©å¼µç‰Œå°±é”åˆ°#bBlack Jack#kï¼ˆ21é»ï¼‰ï¼Œæ‚¨çš„ç±Œç¢¼å°‡è¢«è¿”é‚„2.5å€ï¼&quot;);
} else if (status == 3) {
cm.sendNextPrev(&quot;åœ¨éŠæˆ²é–‹å§‹æ™‚ï¼Œæ‚¨å°‡ç²å¾—2å¼µå¡ã€‚è¨ˆç®—é€™äº›å¡ä¸¦åŠ ç¸½å€¼ã€‚ #béŠæˆ²çš„ç›®æ¨™æ˜¯ç•¶æ‚¨å°‡æ‰‹ä¸­çš„æ‰€æœ‰å¡ç‰ŒåŠ åœ¨ä¸€èµ·æ™‚ç²å¾—21é»ï¼ˆæˆ–æ¥è¿‘21é»ï¼‰ã€‚#k. å®Œæˆæ­¤æ“ä½œå¾Œï¼Œæ‚¨å¯ä»¥é¸æ“‡#bHit#k (ç”¨ä¾†æŠ½å‡ºå¦ä¸€å¼µç‰Œ), æˆ– #bStay#k. å¦‚æœæ‚¨é¸æ“‡#bhit#k, è«‹è¨˜ä½ï¼Œè¶…é21é»å°‡å°è‡´æ‚¨#rçˆ†æ‰#k, æˆ–å°‡æ¸¸æˆ²è¼¸çµ¦ç™¼ç‰Œäººã€‚å¦‚æœæ‚¨èªç‚ºè‡ªå·±å·²ç¶“æ¥è¿‘21ï¼Œä¸¦ä¸”å¸Œæœ›#bstay#k, æ‚¨å°‡å’Œç™¼ç‰Œè€…å°‡æ¯”è¼ƒå¤§å°ï¼Œæœ€æ¥è¿‘21è€…å‹ï¼&quot;);
} else if (status == 4) {
cm.sendPrev(&quot;è«‹è¨˜ä½ï¼Œå¦‚æœè¼¸äº†ï¼Œæ‚¨çµ¦ç™¼ç‰Œè€…çš„æ‰€æœ‰#bç±Œç¢¼#kéƒ½æœƒè¼¸æ‰ï¼ç¥å¥½é‹ï¼&quot;);
} else if (status == 5) {
cm.dispose();
}
}    

function PlayGame(s) {
if(status == 1) {
if(debug) {
System.out.println(&quot;PlayGame() is progressing...&quot;);
}
if(cm.getPlayer().getBlackJackChips() == 0) {
cm.getPlayer().gainBlackJackChips(5);
}
cm.sendGetNumber(&quot;æ‚¨ç›®å‰æœ‰ #b&quot; + cm.getPlayer().getBlackJackChips() + &quot; BlackJack ç±Œç¢¼#k. å¤šå°‘ #bç±Œç¢¼#k ä½ æƒ³åœ¨æœ¬è¼ªæŠ•æ³¨ï¼Ÿ&quot;, 1, 1, cm.getPlayer().getBlackJackChips());
} else if (status == 2) {
if(s &gt; 0 &amp;&amp; s &lt;= cm.getPlayer().getBlackJackChips()) { // packet edits
bet = s;
if(debug) {
System.out.println(&quot;Deck Initializing...&quot;);
}
InitializeGame();
var totP = GetTotalCardValue(&quot;Player&quot;), totD = GetTotalCardValue(&quot;Dealer&quot;);
if(totD == 21 &amp;&amp; CardsInDealerHand[0].length == 2 &amp;&amp; totP == 21 &amp;&amp; CardsInPlayerHand[0].length == 2) {
Finish(&quot;Tie&quot;);
} else if (totP == 21 &amp;&amp; CardsInPlayerHand[0].length == 2) {
Finish(&quot;Player21&quot;);
} else if (totD == 21 &amp;&amp; CardsInDealerHand[0].length == 2) {
Finish(&quot;Dealer21&quot;);
} else {
DisplayHandWithProgression();
}
}
} else if (status &gt; 2) {
playingAction[s == 0 ? &quot;Hit&quot; : &quot;Stay&quot;] = true;
var totP, totD;
if(playingAction[&quot;Stay&quot;]) {
if(debug) {
System.out.println(&quot;ç©å®¶é¸æ“‡ Stay.&quot;);
}
if(totD &lt; 16) {
CompleteDealer();
if(debug) {
System.out.println(&quot;ç•¶ç©å®¶é¸æ“‡Stayæ™‚ï¼Œç™¼ç‰Œè€…ä½æ–¼16ï¼Œç™¼ç‰Œè€…æˆåŠŸå®Œæˆã€‚&quot;);
}
}
totP = GetTotalCardValue(&quot;Player&quot;), totD = GetTotalCardValue(&quot;Dealer&quot;);
if(totP &gt; 21 &amp;&amp; totD &gt; 21) {
Finish(&quot;DoubleBust&quot;);
} else if (totP &gt; 21) {
Finish(&quot;PlayerBust&quot;);
} else if (totD &gt; 21) {
Finish(&quot;DealerBust&quot;);
} else if(totP == totD) {
Finish(&quot;Tie&quot;);
} else if (totP == 21 &amp;&amp; CardsInPlayerHand[0].length == 2) {
Finish(&quot;Player21&quot;);
} else if (totD == 21 &amp;&amp; CardsInDealerHand[0].length == 2) {
Finish(&quot;Dealer21&quot;);
} else if (totP &gt; totD) {
Finish(&quot;Win&quot;);
} else if (totP &lt; totD) {
Finish(&quot;Lose&quot;);
}
} else if(playingAction[&quot;Hit&quot;]) {
AddCardToHand();
totP = GetTotalCardValue(&quot;Player&quot;), totD = GetTotalCardValue(&quot;Dealer&quot;);
if(totD == 21 &amp;&amp; CardsInDealerHand[0].length == 2 &amp;&amp; totP == 21 &amp;&amp; CardsInPlayerHand[0].length == 2) {
Finish(&quot;Tie&quot;);
} else if (totP == 21 &amp;&amp; CardsInPlayerHand[0].length == 2) {
Finish(&quot;Player21&quot;);
} else if (totD == 21 &amp;&amp; CardsInDealerHand[0].length == 2) {
Finish(&quot;Dealer21&quot;);
} else if (totP &gt; 21) {
Finish(&quot;PlayerBust&quot;);
} else if (totD &gt; 21) {
Finish(&quot;DealerBust&quot;);
} else {
DisplayHandWithProgression();
}
}
}
}

function InitializeGame() {
var cardNames = [&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;, &quot;Six&quot;, &quot;Seven&quot;, &quot;Eight&quot;, &quot;Nine&quot;, &quot;Ten&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;, &quot;Ace&quot;];
var cardSuits = [&quot;Hearts&quot;, &quot;Spades&quot;, &quot;Diamonds&quot;, &quot;Clubs&quot;];
for(var i = 0, a = 0; a &lt; cardNames.length; i++) {
if(i == 4) {
a++;
i = 0;
}
CardsInDeck[0].push(cardNames[a]);
CardsInDeck[1].push(cardSuits[i]);
}
CardsInDeck[0].splice(-1);
CardsInDeck[1].splice(-1);
if(debug) {
for(var i = 0; i &lt; CardsInDeck[0].length; i++) {
System.out.println(CardsInDeck[0][i] + &quot; of &quot; + CardsInDeck[1][i] + &quot; pushed.&quot;);
}
}
AddCardToHand();
AddCardToHand();
}

function AddCardToHand() {
var random;
random = Math.floor(Math.random() * CardsInDeck[0].length);
CardsInPlayerHand[0].push(CardsInDeck[0][random]);
CardsInPlayerHand[1].push(CardsInDeck[1][random]);
if(debug) {
System.out.println(&quot;Card Added to Player Hand: &quot; + CardsInDeck[0][random] + &quot; of &quot; + CardsInDeck[1][random]);
}
for(var i = 0; i &lt; CardsInDeck[0].length; i++) {
if(CardsInPlayerHand[0][CardsInPlayerHand[0].length - 1] == CardsInDeck[0][i] &amp;&amp; CardsInPlayerHand[1][CardsInPlayerHand[1].length - 1] == CardsInDeck[1][i]) {
if(debug) {
System.out.println(&quot;Card Spliced from Deck: &quot; + CardsInDeck[0][i] + &quot; of &quot; + CardsInDeck[1][i]);
}
CardsInDeck[0].splice(i, 1);
CardsInDeck[1].splice(i, 1);
break;
}
}
if(GetTotalCardValue(&quot;Dealer&quot;) &lt; 16) {
random = Math.floor(Math.random() * CardsInDeck[0].length);
CardsInDealerHand[0].push(CardsInDeck[0][random]);
CardsInDealerHand[1].push(CardsInDeck[1][random]);
if(debug) {
System.out.println(&quot;Card Added to Dealer Hand: &quot; + CardsInDeck[0][random] + &quot; of &quot; + CardsInDeck[1][random]);
}
for(var i = 0; i &lt; CardsInDeck[0].length; i++) {
if(CardsInDealerHand[0][CardsInDealerHand[0].length - 1] == CardsInDeck[0][i] &amp;&amp; CardsInDealerHand[1][CardsInDealerHand[1].length - 1] == CardsInDeck[1][i]) {
if(debug) {
System.out.println(&quot;Card Spliced from Deck: &quot; + CardsInDeck[0][i] + &quot; of &quot; + CardsInDeck[1][i]);
}
CardsInDeck[0].splice(i, 1);
CardsInDeck[1].splice(i, 1);
break;
}
}
}
}

function CompleteDealer() {
while (GetTotalCardValue(&quot;Dealer&quot;) &lt; 16) {
var random = Math.floor(Math.random() * CardsInDeck[0].length);
CardsInDealerHand[0].push(CardsInDeck[0][random]);
CardsInDealerHand[1].push(CardsInDeck[1][random]);
if(debug) {
System.out.println(&quot;Card Added to Dealer Hand: &quot; + CardsInDeck[0][random] + &quot; of &quot; + CardsInDeck[1][random]);
}
for(var i = 0; i &lt; CardsInDeck[0].length; i++) {
if(CardsInDealerHand[0][CardsInDealerHand[0].length - 1] == CardsInDeck[0][i] &amp;&amp; CardsInDealerHand[1][CardsInDealerHand.length - 1] == CardsInDeck[1][i]) {
if(debug) {
System.out.println(&quot;Card Spliced from Deck: &quot; + CardsInDeck[0][i] + &quot; of &quot; + CardsInDeck[1][i]);
}
CardsInDeck[0].splice(i, 1);
CardsInDeck[1].splice(i, 1);
break;
}
}
}
}

function GetValueByName(name) {
var nums = [[&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;, &quot;Four&quot;, &quot;Five&quot;, &quot;Six&quot;, &quot;Seven&quot;, &quot;Eight&quot;, &quot;Nine&quot;, &quot;Ten&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;, &quot;Ace&quot;], [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11]];
for(var i = 0; i &lt; nums[0].length; i++) {
if(name == nums[0][i]) {
return nums[1][i];
}
}
}

function DisplayHandWithProgression() {
var text = &quot;#d#nä½ æ‰‹ä¸­çš„ç‰Œ:#k#e&quot;
if(CardsInPlayerHand[0].length &gt; 1) {
text += &quot;\r\n#eç¬¬ä¸€å¼µç‰Œ:#n #d&quot; + CardsInPlayerHand[0][0] + &quot;#k of &quot; + (CardsInPlayerHand[1][0].equals(&quot;Hearts&quot;) || CardsInPlayerHand[1][0].equals(&quot;Diamonds&quot;) ? (&quot;#r&quot; + CardsInPlayerHand[1][0] + &quot;#k&quot;) : CardsInPlayerHand[1][0]) +
&quot;\r\n#eç¬¬äºŒå¼µç‰Œ:#n #d&quot; + CardsInPlayerHand[0][1] + &quot;#k of &quot; + (CardsInPlayerHand[1][1].equals(&quot;Hearts&quot;) || CardsInPlayerHand[1][1].equals(&quot;Diamonds&quot;) ? (&quot;#r&quot; + CardsInPlayerHand[1][1] + &quot;#k&quot;) : CardsInPlayerHand[1][1]);
}
if (CardsInPlayerHand[0].length &gt; 2) {
text += &quot;\r\n#eç¬¬ä¸‰å¼µç‰Œ:#n #d&quot; + CardsInPlayerHand[0][2] + &quot;#k of &quot; + (CardsInPlayerHand[1][2].equals(&quot;Hearts&quot;) || CardsInPlayerHand[1][2].equals(&quot;Diamonds&quot;) ? (&quot;#r&quot; + CardsInPlayerHand[1][2] + &quot;#k&quot;) : CardsInPlayerHand[1][2]);
}
if (CardsInPlayerHand[0].length &gt; 3) {
text += &quot;\r\n#eç¬¬å››å¼µç‰Œ:#n #d&quot; + CardsInPlayerHand[0][3] + &quot;#k of &quot; + (CardsInPlayerHand[1][3].equals(&quot;Hearts&quot;) || CardsInPlayerHand[1][3].equals(&quot;Diamonds&quot;) ? (&quot;#r&quot; + CardsInPlayerHand[1][3] + &quot;#k&quot;) : CardsInPlayerHand[1][3]);
}
if (CardsInPlayerHand[0].length &gt; 4) {
text += &quot;\r\n#eç¬¬äº”å¼µç‰Œ:#n #d&quot; + CardsInPlayerHand[0][4] + &quot;#k of &quot; + (CardsInPlayerHand[1][4].equals(&quot;Hearts&quot;) || CardsInPlayerHand[1][4].equals(&quot;Diamonds&quot;) ? (&quot;#r&quot; + CardsInPlayerHand[1][4] + &quot;#k&quot;) : CardsInPlayerHand[1][4]);
}
text += &quot;\r\n\r\n#eç¸½é¡: #b&quot; + GetTotalCardValue(&quot;Player&quot;);
if(CardsInPlayerHand[0].length &gt; 4) {
text += &quot;\r\nçœ‹ä¾†æ‚¨å¿…é ˆ#bstay#kçœ‹çœ‹çµæœå¦‚ä½•ã€‚#b \r\n\t#L1#Stay#l&quot;;
} else {
text += &quot;\r\nä½ æƒ³é¸æ“‡ä»€éº¼ï¼Ÿ#b \r\n\t#L0#Hit#l \r\n\t#L1#Stay#l&quot;;
}
cm.sendSimple(text);
}

function GetTotalCardValue(name) {
var sum = 0;
if(name.equals(&quot;Player&quot;)) {
for(var i = 0; i &lt; CardsInPlayerHand[0].length; i++) {
sum += GetValueByName(CardsInPlayerHand[0][i]);
}
} else if (name.equals(&quot;Dealer&quot;)) {
for(var i = 0; i &lt; CardsInDealerHand[0].length; i++) {
sum += GetValueByName(CardsInDealerHand[0][i]);
}
}
return sum;
}

function Finish(action) {
if(action.equals(&quot;DoubleBust&quot;)) {
cm.sendOk(&quot;çœ‹èµ·ä¾†æˆ‘å€‘å€†éƒ½#rçˆ†#käº†! \r\n#bä½ æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Player&quot;) + &quot; \r\n#ræˆ‘æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Dealer&quot;) + &quot; \r\næˆ‘æƒ³æ²’äººå‹åˆ©.&quot;);
} else if (action.equals(&quot;PlayerBust&quot;)) {
cm.sendOk(&quot;å“ˆå“ˆï¼Œä½ çœ‹èµ·ä¾† #rçˆ†#käº†! \r\n#bä½ æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Player&quot;) + &quot; \r\n#ræˆ‘æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Dealer&quot;) + &quot; \r\næŠ±æ­‰ï¼Œä½†æ˜¯æˆ‘å¥½åƒè¦æŠŠä½ çš„ #bç±Œç¢¼#kæ‹¿èµ°!&quot;);
cm.getPlayer().gainBlackJackChips(-bet);
} else if (action.equals(&quot;DealerBust&quot;)) {
cm.sendOk(&quot;æˆ‘ä¸èƒ½ç›¸ä¿¡! æˆ‘ #rçˆ†#käº†! \r\n#bä½ æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Player&quot;) + &quot; \r\n#ræˆ‘æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Dealer&quot;) + &quot; \r\nçœ‹ä¾†æ‚¨å·²ç¶“è´å¾—äº†ä¸€äº›#bç±Œç¢¼#k!&quot;);
cm.getPlayer().gainBlackJackChips(bet);
} else if (action.equals(&quot;Tie&quot;)) {
cm.sendOk(&quot;We tied! \r\n#bä½ æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Player&quot;) + &quot;\r\n#ræˆ‘æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Dealer&quot;) + &quot; \r\nçœ‹ä¾†æˆ‘å€‘å€†éƒ½æ²’è´...&quot;);
} else if (action.equals(&quot;Player21&quot;)) {
cm.sendOk(&quot;Wow! ä½ æœ‰ #rBlackJack#k! é€™ä»£è¡¨ä½ ç”¨å…©å¼µç‰Œå¾—åˆ° #r21 #k! \r\n#bä½ æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Player&quot;) + &quot; \r\nä½ è´å¾—äº† #b2.5x çš„ç±Œç¢¼#k&quot;);
cm.getPlayer().gainBlackJackChips(bet + (bet % 2 != 0 ? ((bet + 1) / 2) : (bet / 2)));
} else if (action.equals(&quot;Dealer21&quot;)) {
cm.sendOk(&quot;#rBLACKJACK!#k å“ˆå“ˆï¼Œçœ‹ä¾†æˆ‘ä»¥å…©å¼µç‰Œè´äº†#r21#k! \r\n#ræˆ‘æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Dealer&quot;) + &quot; \r\næŠ±æ­‰ï¼Œçœ‹ä¾†æˆ‘å¿…é ˆå¸¶èµ°æ‚¨çš„#bç±Œç¢¼#k! ä¸‹æ¬¡å¥½é‹ï¼&quot;);
cm.getPlayer().gainBlackJackChips(-bet);
} else if (action.equals(&quot;Win&quot;)) {
cm.sendOk(&quot;æˆ‘ä¸æ•¢ç›¸ä¿¡ï¼Œä½ è´äº†! \r\n#bä½ æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Player&quot;) + &quot;\r\n#ræˆ‘æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Dealer&quot;) + &quot; \r\nçœ‹ä¾†æ‚¨è´äº†ä¸€äº› #bç±Œç¢¼#k!&quot;);
cm.getPlayer().gainBlackJackChips(bet);
} else if (action.equals(&quot;Lose&quot;)) {
cm.sendOk(&quot;å“ˆå“ˆï¼Œçœ‹èµ·ä¾†ä½ è¼¸äº†ï¼ \r\n#bä½ æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Player&quot;) + &quot;\r\n#ræˆ‘æ‰‹ä¸­çš„ç‰Œ:#k \r\n\t&quot; + DisplayCardsInHand(&quot;Dealer&quot;) + &quot; \r\næŠ±æ­‰ï¼Œçœ‹ä¾†æˆ‘å¿…é ˆå¸¶èµ°æ‚¨çš„#bç±Œç¢¼#k! ä¸‹æ¬¡å¥½é‹ï¼&quot;);
cm.getPlayer().gainBlackJackChips(-bet);
}
if(debug) {
System.out.println(&quot;Finish() carried out with a &quot; + action);
}
cm.dispose();
}

function DisplayCardsInHand(name) {
var cards = &quot;&quot;;
if(name.equals(&quot;Player&quot;)) {
for(var i = 0; i &lt; CardsInPlayerHand[0].length; i++) {
cards += (&quot;#d&quot; + CardsInPlayerHand[0][i] + &quot;#k of &quot; + (CardsInPlayerHand[1][i].equals(&quot;Hearts&quot;) || CardsInPlayerHand[1][i].equals(&quot;Diamonds&quot;) ? (&quot;#r&quot; + CardsInPlayerHand[1][i] + &quot;#k&quot;) : CardsInPlayerHand[1][i]) + (i != (CardsInPlayerHand[0].length - 1) ? &quot;, &quot; : &quot;.&quot;));
}
} else if (name.equals(&quot;Dealer&quot;)) {
for(var i = 0; i &lt; CardsInDealerHand[0].length; i++) {
cards += (&quot;#d&quot; + CardsInDealerHand[0][i] + &quot;#k of &quot; + (CardsInDealerHand[1][i].equals(&quot;Hearts&quot;) || CardsInDealerHand[1][i].equals(&quot;Diamonds&quot;) ? (&quot;#r&quot; + CardsInDealerHand[1][i] + &quot;#k&quot;) : CardsInDealerHand[1][i]) + (i != (CardsInDealerHand[0].length - 1) ? &quot;, &quot; : &quot;.&quot;));
}
}
return cards;
}

function SpendChips(s) {
if(status == 1) {
if(debug) {
System.out.println(&quot;SpendChips() progressing...&quot;);
}
var text = &quot;ä½ ç›®å‰æœ‰ #b&quot; + cm.getPlayer().getBlackJackChips() + &quot; Black Jack ç±Œç¢¼#k. ä½ æƒ³è¦æ›å–ä»€éº¼?&quot;;
for(var i = 0; i &lt; prizes[0].length; text += &quot;\r\n#L&quot; + i + &quot;##i&quot; + prizes[0][i] + &quot;##b ~ #t&quot; + prizes[0][i] + &quot;##k for #r&quot; + prizes[1][i] + &quot; Black Jack ç±Œç¢¼#k#l&quot;, i++);
cm.sendSimple(text);
} else if (status == 2) {
selected = s;
cm.sendYesNo(&quot;æ‚¨ç¢ºå®šè¦è³¼è²· #i&quot; + prizes[0][s] + &quot;##b ~ #t&quot; + prizes[0][s] + &quot;##k ä»¥ #r&quot; + prizes[1][s] + &quot; Black Jack ç±Œç¢¼#k?&quot;);
} else if (status == 3) {
if(cm.getPlayer().getBlackJackChips() &gt;= prizes[1][selected]) {
cm.gainItem(prizes[0][selected]);
cm.getPlayer().gainBlackJackChips(-prizes[1][selected]);
cm.sendOk(&quot;æ„Ÿè¬åƒèˆ‡ï¼äº«å—æ‚¨çš„çå“ï¼Œç„¶å¾Œå†ä¾†ï¼&quot;);
cm.dispose();
} else {
cm.sendOk(&quot;ä½ é‚„éœ€è¦ #r&quot; + (prizes[1][selected] - cm.getPlayer().getBlackJackChips()) + &quot;  Black Jack ç±Œç¢¼#k æ‰èƒ½å…Œæ›é€™å€‹çå“!&quot;);
cm.dispose();
}
cm.dispose();
}
}
</code></pre>
<h2 id="gemz">GEMZ</h2>
<p>ä¾†æºï¼š<a href="http://forum.ragezone.com/f427/add-gemz-game-npc-746806/">Emilyx3</a><br>
<img src="https://xinchistory.com/ckeditor_upload/uploads/1582563197_R5wkSHx9lWjtT2x.PNG" alt=""></p>
<pre><code class="language-Javascript">/**
 * Gems Game NPC
 * Author: Emilyx3 of UMaple
 */

var Board;
var Score = 0;
var GameType = -1, BoardSize = -1, NumCols = -1, NumRows = -1,
NumGemTypes = -1, Difficulty = -1, NextComboMultiplier = 0,
GameTime = 180000 /*3 Minutes in Milliseconds*/, GameStart = -1;
var GameTypes = [
[&quot;æ™®é€šæ¨¡å¼&quot;, &quot;ç©ä¸€å ´å¸¸è¦éŠæˆ²&quot;],
[&quot;æ™‚é–“æ”»æ“Šæ¨¡å¼&quot;, &quot;3åˆ†é˜å…§ç›¡å¯èƒ½ç²å–å¤šçš„ç©åˆ†&quot;]
//, [&quot;Puzzle&quot;, &quot;Solve puzzles&quot;] // May add Puzzle mode later.
];
var BoardSizes = [
//Board Size Name, Number of Rows, Number of Cols
[&quot;Small&quot;, 6, 5],
[&quot;Medium&quot;, 7, 6],
[&quot;Large&quot;, 8, 7],
[&quot;Huge&quot;, 10, 7]
];
var Difficulties = [
//Difficulty Name, Number of Gem Types
[&quot;Very Easy&quot;, 4],
[&quot;Easy&quot;, 5],
[&quot;Medium&quot;, 6],
[&quot;Hard&quot;, 7]
];
var GameDropProbability = 0.01 / 100;
var GameDrops = [
//ItemID, Drop Probability (Should add Up to 1)
[5200000, 0.25],[5200001, 0.20],[5200002, 0.15],
[4031701, 0.05],[4001013, 0.10],[2340000, 0.25]
];
var Gems = [
//Ore, Gem
[4020000, 4021000], [4020001, 4021001], [4020002, 4021002], [4020003, 4021003],
[4020004, 4021004], [4020005, 4021005], [4020006, 4021006], [4020007, 4021007],
[4020008, 4021008]
];
var Neighbors4 = [[0,1],[0,-1],[-1,0],[1,0]];
var Neighbors8 = [[-1, -1],[-1, 0],[-1, 1],[0, -1],[0, 1],[1, -1],[1, 0], [1, 1]];
var status;

function Header() {
    return &quot;#b============#kGEMZ#b============#k\r\n\r\n&quot;;
}
function MenuScreen() {
    return Header() +
    &quot;è«‹é¸æ“‡:\r\n\r\n&quot; +
    &quot;#L0#é–‹å§‹éŠæˆ²#l\r\n&quot; +
    &quot;#L1#éŠæˆ²ä»‹ç´¹#l&quot;;
}
function SendGameInstructions() {
    cm.sendNext(Header() +
        &quot;#eéŠæˆ²ä»‹ç´¹:#n\r\n&quot; +
        &quot;1. é€šéå–®æ“Š3å¡Šé€£ç·šæˆ–æ›´å¤šå¡Šé€£ç·šçš„ç¤¦çŸ³/å¯¶çŸ³ä»¥ç²å¾—åˆ†æ•¸ã€‚\r\n&quot; +
        &quot;2. æ‚¨æ¯ç ´å£ä¸€çµ„é€£ç·šå¯ç²å¾—5é»ï¼Œå¦‚æœæ¶ˆé™¤é«˜æ–¼3å¡Šçš„é€£ç·šå¯ä»¥+5%çš„åˆ†æ•¸ã€‚\r\n&quot; +
        &quot;3. ç•¶æ‚¨ç ´å£ç¤¦çŸ³æœ‰æ©Ÿæœƒ(1æ¬¡)å°‡è®Šæˆä¸€å€‹å¯¶çŸ³ã€‚&quot; +
        &quot;å¦‚æœå¯¶çŸ³é€£ç·šå¯å¾—åˆ°30åˆ†ã€‚æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥å–®æ“Šå¯¶çŸ³ï¼Œä½†åªèƒ½ç²å¾—20åˆ†ã€‚\r\n&quot; +
        &quot;4. éç¨‹ä¸­å¯èƒ½å‡ºç¾ç‰¹æ®Šé“å…·ã€‚å®ƒå€‘æœ‰å„è‡ªçš„åŠŸç”¨ï¼š\r\n&quot; +
        &quot;    #v5021013# - éŠ·æ¯€å‘¨åœçš„8æ ¼ç¤¦çŸ³/å¯¶çŸ³ï¼ˆä¸å½±éŸ¿ç‰¹æ®Šç‰©å“ï¼‰ã€‚\r\n&quot; +
        &quot;    #v4031051# - å°‡å‘¨åœçš„8æ ¼è®Šæˆå¯¶çŸ³ã€‚\r\n&quot; +
        &quot;    #v4031311# - å°‡è¨ˆæ™‚å™¨å¢åŠ 2ç§’ã€‚ï¼ˆåƒ…æ™‚é–“æ”»æ“Šæ¨¡å¼ï¼‰\r\n&quot; +
        &quot;    #v3990021##v3990023# - ç´…è‰²ï¼ˆæ°´å¹³éŠ·æ¯€æ‰€æœ‰ç¤¦çŸ³/å¯¶çŸ³ï¼‰ï¼Œç¶ è‰²ï¼ˆæ°´å¹³éŠ·æ¯€æ‰€æœ‰ç¤¦çŸ³ç‚ºå¯¶çŸ³ï¼‰\r\n&quot; +
        &quot;    #v3991008##v3991034# - ç´…è‰²ï¼ˆå‚ç›´éŠ·æ¯€æ‰€æœ‰ç¤¦çŸ³/å¯¶çŸ³ï¼‰ï¼Œç¶ è‰²ï¼ˆå‚ç›´éŠ·æ¯€æ‰€æœ‰ç¤¦çŸ³ï¼‰\r\n&quot; +
        &quot;    #v3990020# - å‚ç›´å’Œæ°´å¹³å­˜å„²æ‰€æœ‰ç¤¦çŸ³/å¯¶çŸ³\r\n&quot; +
        &quot;    æ¯å€‹è¢«éŠ·æ¯€çš„ç¤¦çŸ³åƒ¹å€¼10åˆ†ã€‚è¢«æ‘§æ¯€çš„å¯¶çŸ³å„å€¼25åˆ†ã€‚ç‰¹æ®Šç‰©å“å’Œæ‰è½ç‰©å“ä¸æœƒè¢«éŠ·æ¯€ã€‚\r\n&quot; +
        &quot;5. éç¨‹ä¸­å¯èƒ½æœƒå‡ºç¾çå‹µé“å…·ã€‚å–®æ“Šå®ƒå€‘å¯ä»¥ç²å–å®ƒå€‘ï¼š\r\n&quot; +
        &quot;    #v5200000##v5200001##v5200002##v4031701##v4001013##v2340000#\r\n&quot; +
        &quot;\r\nGood Luck ~&quot;
        );
}
function SendGameTypeSelectionMenu() {
    var SendStr = Header();
    for (var i = 0;i &lt; GameTypes.length;i++) {
        SendStr += &quot;#L&quot;+i+&quot;#&quot;+GameTypes[i][0]+&quot; - &quot;+GameTypes[i][1]+&quot;#l\r\n&quot;;
    }
    cm.sendSimple(SendStr);
}
function SendBoardSizeSelectionMenu() {
    var SendStr = Header();
    for (var i = 0;i &lt; BoardSizes.length;i++) {
        SendStr += &quot;#L&quot;+i+&quot;#&quot;+BoardSizes[i][0]+&quot; - &quot;+BoardSizes[i][1]+&quot;x&quot;+BoardSizes[i][2]+&quot;#l\r\n&quot;;
    }
    cm.sendSimple(SendStr);
}
function SendDifficultySelectionMenu() {
    var SendStr = Header();
    for (var i = 0;i &lt; Difficulties.length;i++) {
        SendStr += &quot;#L&quot;+i+&quot;#&quot;+Difficulties[i][0]+&quot; - &quot;+Difficulties[i][1]+&quot; Gem Types#l\r\n&quot;;
    }
    cm.sendSimple(SendStr);
}
function InitializeBoard() {
    NumRows = BoardSizes[BoardSize][1];
    NumCols = BoardSizes[BoardSize][2];
    Board = new Array(NumRows);
    for (var i = 0;i &lt; Board.length;i++) {
        Board[i] = new Array(NumCols);
    }
}
function InitializeGems() {
    NumGemTypes = Difficulties[Difficulty][1];
    Shuffle(Gems);
    for (var r = 0;r &lt; Board.length;r++) {
        for (var c = 0;c &lt; Board[r].length;c++) {
            Board[r][c] = GetRandomOre();
        }
    }
}
function GetRandomOre() {
    return Gems[Math.floor(Math.random() * NumGemTypes)][0];
}
function GetScoreString() {
    return &quot;#b#eéŠæˆ²åˆ†æ•¸:#n#k &quot; + AddCommas(Score.toFixed(2)) + &quot;\r\n&quot;;
}
function GetGameSettingsDescriptionString() {
    return &quot;#d#eéŠæˆ²è¨­å®š:#n#k &quot; + GameTypes[GameType][0]
    + &quot; - å¤§å°: &quot; + BoardSizes[BoardSize][0] + &quot;(&quot;+ BoardSizes[BoardSize][1]+&quot;x&quot; + BoardSizes[BoardSize][2]
    + &quot;) - é›£æ˜“åº¦: &quot; + Difficulties[Difficulty][0] + &quot;\r\n&quot;;
}
function AddCommas(nStr) {
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length &gt; 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
}
function GetGameEndBoardString() {
    var SendStr = &quot;&quot;;
    for (var r = 0;r &lt; Board.length;r++) {
        for (var c = 0;c &lt; Board[r].length;c++) {
            SendStr += &quot;#v&quot;+Board[r][c]+&quot;#&quot;;
        }
        SendStr += &quot;\r\n&quot;;
    }
    SendStr += &quot;\r\n&quot;;
    return SendStr;
}
function GetBoardSelectionString() {
    var SendStr = &quot;&quot;;
    var Count = 0;
    for (var r = 0;r &lt; Board.length;r++) {
        for (var c = 0;c &lt; Board[r].length;c++) {
            SendStr += &quot;#L&quot;+(Count++)+&quot;##v&quot;+Board[r][c]+&quot;##l&quot;;
        }
        SendStr += &quot;\r\n&quot;;
    }
    SendStr += &quot;\r\n&quot;;
    return SendStr;
}
function ContainsGem(Combo, GemGroup) {
    for (var i = 0;i &lt; Combo.length;i++) {
        if (Board[Combo[i][0]][Combo[i][1]] == GemGroup[1]) {
            return true;
        }
    }
    return false;
}
function DoMove(Move) {
    var ItemID = Board[Move[0]][Move[1]];
    var GemGroup = GetGemGroup(ItemID);
    var Combo = new Array();
    var IsSpecialItem = false;
    Combo.push([Move[0],Move[1]]);
    if (GemGroup != null) {
        //Normal Gem
        GetNeighborGems(Move[0],Move[1],GemGroup,Combo);
        if (Combo.length &lt; 3) {
            if (!ContainsGem(Combo, GemGroup)) {
                return false;
            }
        }
        AddScoreForCombination(Combo, GemGroup);
    } else if (IsDropItem(ItemID)) {
        cm.gainItem(ItemID, 1);
    } else {
        //Special Item
        UseSpecialItem(ItemID, Move[0], Move[1], Combo);
        IsSpecialItem = true;
    }
    RemoveAndGenerateNewGems(Combo, Move[0], Move[1], GemGroup, IsSpecialItem);
    return true;
}

function RemoveGemAndShiftDown(r, c) {
    for (var i = r;i &gt; 0;i--) {
        Board[i][c] = Board[i-1][c];
    }
    return [0, c];
}
function RemoveAndGenerateNewGems(Combo, r, c, GemGroup, IsSpecialItem) {
    var DropItemProb = (IsSpecialItem ? 0 : GameDropProbability + ((Combo.length &gt; 5) ? (GameDropProbability / 10) * (Combo.length - 5) : 0));
    var SpecialItemProb = (IsSpecialItem ? 0 : 0.005 + (Combo.length &gt; 3 ? 0.01 * (Combo.length - 3) : 0.0) + DropItemProb);
    for (var i = 0;i &lt; Combo.length;i++) {
        var TurnToGemProb = 0.20 + ((Combo.length &gt; 3) ? 0.2 * (Combo.length - 3) : 0.0);
        if (Combo[i][0] == r &amp;&amp; Combo[i][1] == c &amp;&amp; GemGroup != null
            &amp;&amp; GemGroup[0] == Board[r][c] &amp;&amp; Math.random() &lt; TurnToGemProb) {
            Board[r][c] = GemGroup[1];
        } else {
            var NewGemLocation = RemoveGemAndShiftDown(Combo[i][0],Combo[i][1]);
            for (var j = i + 1; j &lt; Combo.length;j++) {
                if (Combo[j][1] == Combo[i][1] &amp;&amp; Combo[j][0] &lt; Combo[i][0]) {
                    Combo[j][0]++;
                }
            }
            if (c == Combo[i][1] &amp;&amp; r &lt; Combo[i][0]) {
                r++;
            }
            var Ret = RandomOreGemDrop(NewGemLocation[0], NewGemLocation[1], DropItemProb, SpecialItemProb);
            //Only allow 1 item drop and 1 Special Item drop per combo.
            if (Ret == 1) {
                SpecialItemProb = 0;
            } else if (Ret == 2) {
                DropItemProb = 0; 
            }
        }
    }
}
function UseSpecialItem(ItemID, r, c, ToBeRemoved) {
    Score += 10;
    var Targets = new Array();
    switch (ItemID) {
        case 5021013:
        case 4031051:
            for (var i = 0;i &lt; Neighbors8.length;i++) {
                var NewR = r + Neighbors8[i][0];
                var NewC = c + Neighbors8[i][1];
                Targets.push([NewR, NewC]);
            }
            break;
        case 3990021:
        case 3990023:
            for (i = 0;i &lt; Board[r].length;i++) {
                if (i != c) {
                    Targets.push([r, i]);
                }
            }
            break;
        case 3991008:
        case 3991034:
            for (i = 0;i &lt; Board.length;i++) {
                if (i != r) {
                    Targets.push([i, c]);
                }
            }
            break;
        case 3990020:
            for (i = 0;i &lt; Board[r].length;i++) {
                if (i != c) {
                    Targets.push([r, i]);
                }
            }
            for (i = 0;i &lt; Board.length;i++) {
                if (i != r) {
                    Targets.push([i, c]);
                }
            }
            break;
    }
    if (ItemID == 4031311) {
        GameTime += 2000;
    }
    switch (ItemID) {
        case 4031051:
        case 3990023:
        case 3991034:
            for (i = 0;i &lt; Targets.length;i++) {
                if (ValidPosition(Targets[i][0], Targets[i][1])) {
                    var GemGroup = GetGemGroup(Board[Targets[i][0]][Targets[i][1]]);
                    if (GemGroup != null) {
                        if (GemGroup[0] == Board[Targets[i][0]][Targets[i][1]]) {
                            Board[Targets[i][0]][Targets[i][1]] = GemGroup[1];
                        }
                    }
                }
            }
            break;
        case 5021013:
        case 3990021:
        case 3991008:
        case 3990020:
            for (i = 0;i &lt; Targets.length;i++) {
                if (ValidPosition(Targets[i][0], Targets[i][1])) {
                    GemGroup = GetGemGroup(Board[Targets[i][0]][Targets[i][1]]);
                    if (GemGroup != null) {
                        if (GemGroup[0] == Board[Targets[i][0]][Targets[i][1]]) {
                            Score += 10;
                        } else if (GemGroup[1] == Board[Targets[i][0]][Targets[i][1]]) {
                            Score += 25;
                        }
                        ToBeRemoved.push([Targets[i][0], Targets[i][1]]);
                    }
                }
            }
            break;
    }
}
function IsDropItem(ItemID) {
    var Len = GameDrops.length;
    while (Len--) {
        if (GameDrops[Len][0] == ItemID) {
            return true;
        }
    }
    return false;
}

function IsOreOrGem(ItemID) {
    for (var i = 0;i &lt; Gems.length;i++) {
        for (var j = 0;j &lt; Gems[i].length;i++) {
            if (Gems[i][j] == ItemID)
                return true;
        }
    }
    return false;
}

function GetDropItem() {
    var R = Math.random();
    var tot = 0;
    for (var i = 0;i &lt; GameDrops.length;i++) {
        tot += GameDrops[i][1];
        if (R &lt; tot) {
            return GameDrops[i][0];
        }
    }
    return 5200000; //Just in case.
}
function RandomOreGemDrop(r, c, DropItemProb, SpecialItemProb) {
    var R = Math.random();
    if (R &lt; DropItemProb) {
        //Generate a Drop
        Board[r][c] = GetDropItem();
        return 2;
    } else if (R &lt; SpecialItemProb) {
        //Generate Special Item
        Board[r][c] = GetRandomSpecialItem();
        return 1;
    } else {
        //Normal Ore
        Board[r][c] = GetRandomOre();
        return 0;
    }
}

/*
#v5021013# - Destroy surrounding 8 Ores/Gems (Does not affect special items). (25 points / destroyed item)\r\n&quot; +
#v4031051# - Turns the surrounding 8 Ores into Gems.\r\n&quot; +
#v4031311# - Add 2 seconds to timer. (Only Time Attack mode)\r\n&quot; +
#v3990021##v3990023# - Red(Destroy all Ores/Gems Horizontally - 25 points / destroyed item), Green(Turn all Ores into Gems Horizontally)\r\n&quot; +
#v3991008##v3991034# - Red(Destroy all Ores/Gems Vertically - 25 points / destroyed item), Green(Turn all Ores into Gems Vertically)\r\n&quot; +
#v3990020# - Destory all Ores/Gems Vertically and Horizontally (25 points / destroyed item)\r\n&quot; +
 */
function GetRandomSpecialItem() {
    var Prob = Math.random();
    if (GameType == 1 &amp;&amp; Math.random() &lt; 0.25) {
        return 4031311;
    }
    if (Prob &lt; 0.10) {
        return 3990020;
    } else if (Prob &lt; 0.25) {
        return 3991008;
    } else if (Prob &lt; 0.35) {
        return 3991034;
    } else if (Prob &lt; 0.50) {
        return 3990021;
    } else if (Prob &lt; 0.60) {
        return 3990023;
    } else if (Prob &lt; 0.70) {
        return 4031051;
    } else {
        return 5021013;
    }
}
function AddScoreForCombination(Combo, GemGroup) {
    var Multiplier = 1.0 + (Combo.length &gt; 3 ? 0 : 0.05 * (Combo.length - 3))
    + NextComboMultiplier;
    if (Combo.length == 3) {
        NextComboMultiplier = 0;
    } else if (Combo.length == 4) {
        NextComboMultiplier += 0.01;
    } else if (Combo.length == 5) {
        NextComboMultiplier += 0.015;
    } else if (Combo.length &gt; 5) {
        NextComboMultiplier += 0.02;
    }
    var Points = 0;
    for (var i = 0;i &lt; Combo.length;i++) {
        var ItemID = Board[Combo[i][0]][Combo[i][1]];
        if (GemGroup[0] == ItemID) {
            Points += 5;
        } else if (GemGroup[1] == ItemID) {
            if (Combo.length &gt;= 3) {
                Points += 30;
            } else {
                Points += 20;
            }
        }
    }
    Score += (Points * Multiplier);
}
function NoMoreMoves() {
    for (var i = 0;i &lt; Board.length;i++) {
        for (var j = 0;j &lt; Board[i].length;j++) {
            var GemGroup = GetGemGroup(Board[i][j]);
            if (GemGroup == null) { //Special Item
                return false;
            } else {
                var GetCount = new Array();
                GetCount.push([i,j]);
                GetNeighborGems(i, j, GemGroup, GetCount);
                if (GetCount.length &gt; 2) {
                    return false;
                }
            }
        }
    }
    return true;
}
function GetNeighborGems(r, c, GemGroup, ToBeRemoved) {
    var CheckNeighbors = new Array();
    for (var i = 0;i &lt; Neighbors4.length;i++) {
        var NewR = r + Neighbors4[i][0];
        var NewC = c + Neighbors4[i][1]
        if (ValidPosition(NewR, NewC) &amp;&amp; Contains(Board[NewR][NewC], GemGroup)) {
            if (PushIfNotPresent([NewR, NewC], ToBeRemoved)) {
                CheckNeighbors.push([NewR, NewC]);
            }
        }
    }
    for (i = 0;i &lt; CheckNeighbors.length;i++) {
        GetNeighborGems(CheckNeighbors[i][0], CheckNeighbors[i][1], GemGroup, ToBeRemoved);
    }
}
function ValidPosition(r, c) {
    return r &gt;= 0 &amp;&amp; r &lt; NumRows &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; NumCols;
}
function Contains(ItemID, GemGroup) {
    var i = GemGroup.length;
    while (i--) {
        if (GemGroup[i] == ItemID) {
            return true;
        }
    }
    return false;
}
function PushIfNotPresent(Move, Combo) {
    var i = Combo.length;
    while (i--) {
        var Comp = Combo[i];
        if (Comp[0] == Move[0] &amp;&amp; Comp[1] == Move[1]) {
            return false;
        }
    }
    Combo.push(Move);
    return true;
}
function GetPositionFromSelection(sel) {
    return [(sel / NumCols) | 0, (sel % NumCols) | 0];
}
function GetGemGroup(ItemID) {
    for (var i = 0; i &lt; Gems.length;i++) {
        for (var j = 0;j &lt; Gems[i].length;j++) {
            if (Gems[i][j] == ItemID) {
                return Gems[i];
            }
        }
    }
    return null;
}
function Shuffle(arr) {
    var i = arr.length;
    if (i == 0)
        return;
    while (--i) {
        var j = Math.floor( Math.random() * ( i + 1 ) );
        var tempi = arr[i];
        var tempj = arr[j];
        arr[i] = tempj;
        arr[j] = tempi;
    }
}
function GetTimeLeftString() {
    var Ret = &quot;Time Left: &quot;;
    var Now = (new Date()).getTime();
    var Diff = GameTime + GameStart - Now;
    var MilliSec = (Diff % 1000) | 0;
    Diff /= 1000;
    var Min = (Diff / 60) | 0;
    var Sec = (Diff % 60) | 0;
    Ret += ((Min &lt; 10) ? &quot;0&quot; + Min : Min) + &quot;:&quot; + ((Sec &lt; 10) ? &quot;0&quot; + Sec : Sec)
    + &quot;.&quot; + ((MilliSec &lt; 100) ? &quot;0&quot; + ((MilliSec &lt; 10) ? &quot;0&quot; + MilliSec : MilliSec) : MilliSec);
    Ret += &quot; seconds\r\n&quot;;
    return Ret;
}
function GetGameTime(End) {
    var Diff = End - GameStart;
    var MilliSec = (Diff % 1000) | 0;
    Diff /= 1000;
    var Min = (Diff / 60) | 0;
    var Sec = (Diff % 60) | 0;
    return ((Min &lt; 10) ? &quot;0&quot; + Min : Min) + &quot;:&quot; + ((Sec &lt; 10) ? &quot;0&quot; + Sec : Sec)
    + &quot;.&quot; + ((MilliSec &lt; 100) ? &quot;0&quot; + ((MilliSec &lt; 10) ? &quot;0&quot; + MilliSec : MilliSec) : MilliSec);

}
function start() {
    status = -1;
    action(1, 0, 0);
}
function CheckSelection(s, low, high) {
    return s &lt; low &amp;&amp; s &gt; high;
}
function action(mode, type, selection) {
    if (mode == -1 || mode == 0)
        cm.dispose();
    else {

        if (mode == 1) {
            if (status != 6) {
                status++;
            }
        } else {
            status--;
        }

        if (status == 0) {
            cm.sendSimple(MenuScreen());
        } else if (status == 1) {
            if (selection == 0) {
                action(1, 0, 0); //Move to Next
            } else if (selection == 1) {
                SendGameInstructions();
            } else { //Packet Edits
                cm.dispose();
            }
        } else if (status == 2) {
            //Choose Game Type
            SendGameTypeSelectionMenu();
        } else if (status == 3) {
            if (CheckSelection(selection, 0, GameTypes.length - 1)) {
                cm.dispose();
                return;
            }
            GameType = selection;
            //Choose Board Size
            SendBoardSizeSelectionMenu();
        } else if (status == 4) {
            if (CheckSelection(selection, 0, BoardSizes.length - 1)) {
                cm.dispose();
                return;
            }
            BoardSize = selection;
            //Choose Difficulty
            SendDifficultySelectionMenu();
        } else if (status == 5) {
            if (CheckSelection(selection, 0, Difficulties.length - 1)) {
                cm.dispose();
                return;
            }
            Difficulty = selection;
            InitializeBoard();
            InitializeGems();
            //No Header while in game, it's just annoying
            cm.sendSimple(GetScoreString() + GetBoardSelectionString() + GetGameSettingsDescriptionString());
        } else if (status == 6) {
            if (CheckSelection(selection, 0, NumCols * NumRows - 1)) {
                cm.dispose();
                return;
            }
            if (GameStart == -1) {
                GameStart = (new Date()).getTime();
            }
            if (GameType == 1 &amp;&amp; GameStart + GameTime &lt; (new Date()).getTime()) {
                //Time Over
                status++;
                action(1, 0, 0);
                return;
            }
            var Move = GetPositionFromSelection(selection);
            var ValidMove = DoMove(Move);
            if (NoMoreMoves()) {
                status++;
                action(1, 0, 0);
            } else {
                cm.sendSimple(
                    (ValidMove ? &quot;&quot; : &quot;ç„¡æ•ˆçš„ç§»å‹•ï¼Œæ‚¨å¿…é ˆå–®æ“Šä¸€çµ„3å€‹æˆ–æ›´å¤šçš„ç¤¦çŸ³/å¯¶çŸ³ã€‚\r\n&quot;)
                    + GetScoreString()+ (GameType == 1 ? GetTimeLeftString() : &quot;&quot;)
                    + GetBoardSelectionString() + GetGameSettingsDescriptionString());
            }
        } else if (status == 8) {
            var SendStr = Header();
            SendStr += &quot;#e#rGame Over#k#n\r\n&quot;;
            SendStr += GetScoreString();
            SendStr += GetGameSettingsDescriptionString();
            SendStr += &quot;éŠæˆ²æ™‚é–“ï¼š &quot; + GetGameTime((new Date()).getTime()) + &quot;\r\n&quot;;
            SendStr += GetGameEndBoardString();
            cm.sendOk(SendStr);
        } else {
            cm.dispose();
        }
    }
} 
</code></pre>
<h2 id="oxéŠæˆ²">OXéŠæˆ²</h2>
<p>ä¾†æºï¼š<a href="http://forum.ragezone.com/f427/add-tic-tac-toe-npc-766436/">XxĞsirisxX</a><br>
<img src="https://xinchistory.com/ckeditor_upload/uploads/1582557835_ZZ66Ve6kiKWpRF9.PNG" alt=""></p>
<pre><code class="language-Javascript">status = -1;
playerFlag = 0;
computerFlag = 0;
var playerColor;
var computerColor;

function start() {
    cm.sendYesNo(&quot;å—¨ #h #.\r\næƒ³èˆ‡ç„¡è…¦çš„é›»è…¦ç©OXéŠæˆ²å—ï¼Ÿå‹åˆ©çš„è©±å¯ä»¥è´å¾—#b#t5220000##k1å¼µ&quot;);
}

function action (mode, type, selection) {
    if (mode != 1) {
        if (type == 1 &amp;&amp; mode == 0) {
            cm.sendNext(&quot;è†½å°é¬¼ã€‚&quot;);
        }
        cm.dispose();
        return;
    }
    status++;
    if (status == 0) {
        cm.sendSimple(&quot;ä½ æƒ³åš?\r\n\r\n#b#L0#å…ˆæ‰‹.\r\n#L1#å¾Œæ‰‹.&quot;);
    } else if (status == 1) {
        playerColor = selection == 0 ? 3991040 : 3991049;
        computerColor = selection == 0 ? 3991023 : 3991014;
        if (selection == 1) {
            computerMoves();
        }
        play();
    } else {
        if ((playerFlag &amp; (1 &lt;&lt; selection)) == (1 &lt;&lt; selection) || (computerFlag &amp; (1 &lt;&lt; selection)) == (1 &lt;&lt; selection) || selection &lt; 0 || selection &gt; 9) {
            cm.sendNext(&quot;ç¦æ­¢ä½œå¼Šã€‚&quot;);
            cm.dispose();
            return;
        }
        playerFlag |= 1 &lt;&lt; selection;
        if (((playerFlag | computerFlag) ^ 511) == 0) {
            tie();
            return;
        }
        for (var i = 0; i &lt; 3; ) {
            if (isWinner(playerFlag, i++)) {
                win();
                return;
            }
        }
        computerMoves();
        for (var i = 0; i &lt; 3; ) {
            if (isWinner(computerFlag, i++)) {
                lose();
                return;
            }
        }
        play();
    }
}

function play() {
    cm.sendSimple(loadText(true));
}

function win() {
    if (cm.canHold(5220000)) {
        cm.gainItem(5220000, 1);
        cm.sendNext(loadText(false) + &quot;\r\n\r\nå“‡ï¼ä½ åšåˆ°äº†ï¼æ­å–œä½ ï¼æ‚¨è´å¾—äº†#b#t5220000##k.&quot;);
    } else {
        cm.sendNext(&quot;å“‡ï¼ä½ åšåˆ°äº†ï¼æ­å–œä½ ï¼ä½†å¾ˆæŠ±æ­‰å‘Šè¨´æ‚¨ï¼Œæˆ‘ä¸èƒ½çµ¦æ‚¨ #b#t5220000##k å› ç‚ºæ‚¨çš„èƒŒåŒ…ä¼¼ä¹å·²æ»¿ã€‚ç¨å¾Œå†è©¦ã€‚&quot;);
    }
    cm.dispose();
}

function isWinner(player, val) {
    return (player &amp; (7 &lt;&lt; (val * 3))) == 7 &lt;&lt; (val * 3) || (player &amp; (73 &lt;&lt; val)) == (73 &lt;&lt; val) || (((player &amp; (1 &lt;&lt; 4)) == 1 &lt;&lt; 4) &amp;&amp; (player &amp; ((1 &lt;&lt; 6) &lt;&lt; (val * 2))) &amp;&amp; ((player &amp; (1 &lt;&lt; 2) &gt;&gt; (val * 2))));
}

function lose() {
    cm.sendNext(loadText(false) + &quot;\r\n\r\næ‚¨è¼•è¦–äº†é€™å°é›»è…¦ã€‚æ‚¨æ‡‰è©²å†è©¦ä¸€æ¬¡ï¼Œæ‚¨å¯èƒ½åªæ˜¯ç´¯äº†ã€‚&quot;);
    cm.dispose();
}

function computerMoves() {
    if (playerFlag == 0) {
        var rand = Math.random() * 9 | 0;
        computerFlag |= 1 &lt;&lt; (rand + 1 &amp; 1 == 1 ? rand : 4);
    } else {
        if (computerFlag == 0) {
            for (var i = 0; i &lt; 4; i++) {
                if (playerFlag &amp; (2 &lt;&lt; i) == 2 &lt;&lt; i) {
                    computerFlag |= 1 &lt;&lt; 4;
                    return;
                }
            }
            var rand = Math.random() * 9 | 0;
            if (playerFlag == 1 &lt;&lt; 4) {
                computerFlag |= 1 &lt;&lt; (rand + 1 &amp; 1 == 1 ? rand : 0);
            } else {
                if ((playerFlag &amp; 1) &lt;&lt; (rand + 1 &amp; 1 == 1 ? rand : 4) != 1 &lt;&lt; (rand + 1 &amp; 1 == 1 ? rand : 4)) {
                    computerFlag |= 1 &lt;&lt; (rand + 1 &amp; 1 == 1 ? rand : 4);
                } else {
                    computerFlag |= 1 &lt;&lt; 4;
                }
            }
        } else {
            for (var i = 0; i &lt; 9; i++) {
                if (((computerFlag | playerFlag) &amp; (1 &lt;&lt; i)) != 0) {
                    continue;
                }
                var nextMove = (computerFlag | (1 &lt;&lt; i));
                for (var x = 0; x &lt; 3; x++) {
                    if (isWinner(nextMove, x)) {
                        computerFlag |= 1 &lt;&lt; i;
                        return;
                    }
                }
                var playerPossibleMove = (playerFlag | (1 &lt;&lt; i));
                for (var x = 0; x &lt; 3; x++) {
                    if (isWinner(playerPossibleMove, x)) {
                        computerFlag |= 1 &lt;&lt; i;
                        return;
                    }
                }
            }
            for (var i = 0; i &lt; 9; i++) {
                if (((computerFlag | playerFlag) &amp; (1 &lt;&lt; i)) != 0) {
                    continue;
                }
                computerFlag |= 1 &lt;&lt; i;
                break;
            }
        }
    }
}

function loadText(sendSimple) {
    var text = (sendSimple ? &quot;é¸æ“‡ä½ çš„ä½ç½®.&quot; : &quot;æ¯”è³½çµæœ.&quot;) + &quot;\r\n\r\n&quot;;
    for (var i = 0; i &lt; 9; i++) {
        text += ((playerFlag &amp; (1 &lt;&lt; i)) == (1 &lt;&lt; i) ? &quot;#i&quot; + playerColor + &quot;#&quot; : (computerFlag &amp; (1 &lt;&lt; i)) == (1 &lt;&lt; i) ? &quot;#i&quot; + computerColor + &quot;#&quot; : ((sendSimple ? &quot;#L&quot; + i + &quot;#&quot; : &quot;&quot;) + &quot;___&quot;)) + &quot;\t\t&quot; + (((i + 1) % 3 == 0 ? &quot;\r\n&quot; : &quot;&quot;));
    }
    return text;
}

function tie() {
    cm.sendNext(loadText(false) + &quot;\r\n\r\nå“¦ï¼Œçœ‹èµ·ä¾†æ‚¨èˆ‡é›»è…¦å¹³æ‰‹äº†ã€‚ä½ éœ€è¦æ›´åŠ åŠªåŠ›ã€‚&quot;);
    cm.dispose();
}
</code></pre>
<h2 id="mastermind">Mastermind</h2>
<p>ä¾†æºï¼š<a href="http://forum.ragezone.com/f427/add-mastermind-npc-747150/">Emilyx3</a><br>
<img src="https://xinchistory.com/ckeditor_upload/uploads/1582557612_zxjLOKoH3x2ovIS.PNG" alt=""><br>
<img src="https://xinchistory.com/ckeditor_upload/uploads/1582557657_Ngmvlql8zgWiDyS.PNG" alt=""></p>
<pre><code class="language-JavaScript">/**
 * Mastermind NPC
 * Author: Emilyx3 of UMaple
 */
var status;
var CorrectCombo;
var CurrentCombo;
var PreviousGuesses = new Array();
var NumSpaces, NumColors;
var SpaceDiffSelected, PieceDiffSelected;
var Pieces = [4030002,4030003,4030004,4030005,4030006,4030007,4030008];
var SpaceDifficulties = [[&quot;Beginner(3)&quot;, 3], [&quot;Easy(4)&quot;, 4], [&quot;Intermediate(5)&quot;, 5], [&quot;Hard(6)&quot;, 6], [&quot;Expert(7)&quot;, 7]];
var PieceDifficulties = [[&quot;Beginner&quot;, 3], [&quot;Easy&quot;, 4], [&quot;Intermediate&quot;, 5], [&quot;Hard&quot;, 6], [&quot;Expert&quot;, 7]];
var MaxGuesses = 25;
//var CorrectPiece = 4031140, CorrectPieceAndSpace = 4005004;
var CorrectPiece = 4001007, CorrectPieceAndSpace = 4001008, Blank = 4031325, DeletePrevious =3991002;
var mount = Math.random()*50; //çå‹µç²å¾—çš„æ•¸é‡

function Header() {
    return &quot;#d============#k Mastermind #d============#k\r\n\r\n&quot;;
}
function SendMainMenu() {
    cm.sendSimple(
        Header() +
        &quot;#L0#é–‹å§‹éŠæˆ²#l\r\n&quot; +
        &quot;#L1#éŠæˆ²ä»‹ç´¹#l&quot;
    );
}
function SendGameInstructions() {
    cm.sendNext(Header() +
        &quot;#b#eæ­¡è¿ä¾†åˆ° game Mastermind.#k#n\r\n&quot; +
        &quot;#eéŠæˆ²ä»‹ç´¹:#n\r\n&quot; +
        &quot;1)éŠæˆ²ç›®æ¨™æ˜¯çŒœæ¸¬æ­£ç¢ºçš„æ–¹å¡Šçµ„åˆã€‚\r\n&quot; +
        &quot;2)æ¯æ¬¡çŒœæ¸¬ä¹‹å¾Œï¼Œæ‚¨å°‡æ”¶åˆ°åé¥‹ï¼Œä»¥äº†è§£å¦‚ä½•æ­£ç¢ºæ¨è«–ã€‚\r\n&quot; +
        &quot;    #v&quot;+CorrectPieceAndSpace+&quot;# - è¡¨ç¤º#bæ­£ç¢º#ké›¶ä»¶åœ¨#bæ­£ç¢º#kä½ç½®\r\n&quot; +
        &quot;    #v&quot;+CorrectPiece+&quot;# - è¡¨ç¤º#bæ­£ç¢º#ké›¶ä»¶åœ¨#bä¸æ­£ç¢º#kä½ç½®\r\n\r\n&quot; +
        &quot;    Example: &quot; + GetFeedback([1,2]) + &quot; - 1å€‹æ­£ç¢ºé›¶ä»¶åœ¨æ­£ç¢ºä½ç½®ï¼Œä»¥åŠ2å€‹æ­£ç¢ºé›¶ä»¶åœ¨éŒ¯èª¤ä½ç½®ã€‚\r\n&quot; +
        &quot;3)æ‚¨æ“æœ‰æœ€å¤š#r&quot; + MaxGuesses + &quot;#kæ¬¡æ©Ÿæœƒä¾†å˜—è©¦ç²å¾—æ­£ç¢ºçš„çµ„åˆã€‚\r\n&quot;
    );
}
function SendNumSpacesSelectionMenu() {
    var SendStr = Header();
    SendStr += &quot;#eè«‹é¸æ“‡æ‚¨è¦éŠæˆ²çš„çŒœæ¸¬æ•¸ï¼š#n\r\n&quot;
    for (var i = 0;i &lt; SpaceDifficulties.length;i++) {
        SendStr += &quot;#L&quot; + i + &quot;#&quot; + SpaceDifficulties[i][0] + &quot; - çŒœæ¸¬æ•¸ï¼š&quot; + SpaceDifficulties[i][1] + &quot;\r\n&quot;;
    }
    cm.sendSimple(SendStr);
}
function SendNumPiecesSelectionMenu() {
    var SendStr = Header();
    SendStr += &quot;#eè«‹é¸æ“‡æ‚¨æƒ³ç©çš„é›¶ä»¶æ•¸ï¼š#n\r\n&quot;
    for (var i = 0;i &lt; PieceDifficulties.length;i++) {
        SendStr += &quot;#L&quot; + i + &quot;#&quot; + PieceDifficulties[i][0] + &quot; - é›¶ä»¶æ•¸ï¼š&quot; + PieceDifficulties[i][1] + &quot;\r\n&quot;;
    }
    cm.sendSimple(SendStr);
}
function GetGameSettingsDescription() {
    return &quot;\r\n#d#eéŠæˆ²è¨­å®š:#n#k\r\n&quot; +
        SpaceDifficulties[SpaceDiffSelected][0] + &quot; - çŒœæ¸¬æ•¸ï¼š&quot; + SpaceDifficulties[SpaceDiffSelected][0] + &quot;\r\n&quot; +
        PieceDifficulties[PieceDiffSelected][0] + &quot; - é›¶ä»¶æ•¸ï¼š&quot; +  PieceDifficulties[PieceDiffSelected][1] + &quot;\r\n&quot;;
}
function InitializeCorrectSequence() {
    Shuffle(Pieces);
    CorrectCombo = new Array(NumSpaces);
    for (var i = 0;i &lt; CorrectCombo.length;i++) {
        CorrectCombo[i] = Math.floor(Math.random() * NumColors);
    }
}
function GetSequenceString(Sequence) {
    var Ret = &quot;&quot;;
    for (var i = 0;i &lt; Sequence.length;i++) {
        Ret += &quot;#v&quot; + Pieces[Sequence[i]] + &quot;#&quot;;
    }
    return Ret;
}
function GetCurrentCombo() {
    var Ret = &quot;ä½ ç›®å‰çš„çŒœæ¸¬: &quot;;
    for (var i = 0;i &lt; CurrentCombo.length;i++) {
        Ret += &quot;#v&quot; + Pieces[CurrentCombo[i]] + &quot;#&quot;;
    }
    for (var j = 0;j &lt; NumSpaces - CurrentCombo.length;j++) {
        Ret += &quot;#v&quot; + Blank + &quot;#&quot;;
    }
    return Ret + &quot;\r\n&quot;;
}
function GetPieceSelectionString() {
    var Ret = &quot;è«‹é¸æ“‡ä¸€å€‹æ–¹å¡Š:\r\n&quot;;
    for (var i = 0;i &lt; NumColors;i++) {
        Ret += &quot;#L&quot; + i + &quot;##v&quot; + Pieces[i] + &quot;##l &quot;;
    }
    if (CurrentCombo.length &gt; 0) {
        Ret += &quot;#L&quot; + NumColors + &quot;##v&quot; + DeletePrevious + &quot;##l&quot;;
    }
    return Ret + &quot;\r\n&quot;;

}
function CalculateMatch() {
    var Correct = new Array();
    for (var i = 0;i &lt; NumSpaces;i++) {
        if (CorrectCombo[i] == CurrentCombo[i]) {
            Correct.push(i);
        }
    }
    var Ret1 = Correct.length;
    for (var j = 0;j &lt; NumSpaces;j++) {
        if (!Contains(j, Correct)) {
            for (var k = 0;k &lt; NumSpaces;k++) {
                if (!Contains(k, Correct)) {
                    if (CurrentCombo[j] == CorrectCombo[k]) {
                        Correct.push(k);
                        break;
                    }
                }
            }
        }
    }
    return [Ret1, Correct.length - Ret1];
}
function Contains(i, arr) {
    for (var j = 0;j &lt; arr.length;j++) {
        if (arr[j] == i) {
            return true;
        }
    }
    return false;
}
function GetFeedback(CorrectNumbers) {
    var Ret = &quot;&quot;;
    for (var i = 0;i &lt; CorrectNumbers[0];i++) {
        Ret += &quot;#v&quot; + CorrectPieceAndSpace + &quot;#&quot;;
    }
    for (var j = 0;j &lt; CorrectNumbers[1];j++) {
        Ret += &quot;#v&quot; + CorrectPiece + &quot;#&quot;;
    }
    return Ret;
}
function GetPreviousCombos() {
    if (PreviousGuesses.length == 0) {
        return &quot;&quot;;
    }
    var Ret = &quot;\r\n=== #eä¸Šä¸€è¼ªçŒœæ¸¬#n ===\r\n&quot;;
    for (var i = PreviousGuesses.length - 1;i &gt;= 0;i--) {
        var PreviousGuess = PreviousGuesses[i];
        Ret += ((i + 1) + &quot;. &quot;) + GetSequenceString(PreviousGuess[0]) + &quot;   &quot; + GetFeedback(PreviousGuess[1]) + &quot;\r\n&quot;;
    }
    return Ret + &quot;\r\n&quot;;
}
function Shuffle(arr) {
    var i = arr.length;
    if (i == 0)
        return;
    while (--i) {
        var j = Math.floor( Math.random() * ( i + 1 ) );
        var tempi = arr[i];
        var tempj = arr[j];
        arr[i] = tempj;
        arr[j] = tempi;
    }
}
function CheckSelection(s, low, high) {
    return s &lt; low &amp;&amp; s &gt; high;
}
function start() {
    status = -1;
    action(1, 0, 0);
}
function action(mode, type, selection) {
    if (mode == -1 || (mode == 0 &amp;&amp; (status != 5 || CurrentCombo == null || CurrentCombo.length != NumSpaces))) {
        cm.dispose();
        return;
    }
    if (status != 5)
        status++;

    if (status == 0) {
        SendMainMenu();
    } else if (status == 1) {
        if (selection == 0) {
            action(1, 0, 0);
        } else if (selection == 1) {
            SendGameInstructions();
        } else {
            cm.dispose();
        }
    } else if (status == 2) {
        SendNumSpacesSelectionMenu();
    } else if (status == 3) {
        if (CheckSelection(selection, 0, SpaceDifficulties.length - 1)) {
            cm.dispose();
            return;
        }
        SpaceDiffSelected = selection;
        NumSpaces = SpaceDifficulties[selection][1];
        SendNumPiecesSelectionMenu();
    } else if (status == 4) {
        if (CheckSelection(selection, 0, PieceDifficulties.length - 1)) {
            cm.dispose();
            return;
        }
        PieceDiffSelected = selection;
        NumColors = PieceDifficulties[selection][1];
        InitializeCorrectSequence();
        CurrentCombo = new Array();
        cm.sendSimple(Header() + GetCurrentCombo() + GetPieceSelectionString()
            + GetPreviousCombos() + GetGameSettingsDescription());
    } else if (status == 5) {
        if (CurrentCombo.length == NumSpaces) {
            if (mode == 0) { //No
                CurrentCombo.pop();
                cm.sendSimple(Header() + GetCurrentCombo() + GetPieceSelectionString()
                    + GetPreviousCombos() + GetGameSettingsDescription());
            } else if (mode == 1) { //Yes
                var Match = CalculateMatch();
                if (Match[0] == NumSpaces) {
                    //Win
                    cm.sendOk(Header() + &quot;#b#eæ­å–œä½ ,ä½ åªèŠ±äº† &quot;+(PreviousGuesses.length + 1)+&quot; æ¬¡çŒœæ¸¬å°±è´äº†!#n#k\r\n&quot;
                        + GetSequenceString(CurrentCombo) + &quot;    &quot; + GetFeedback(Match) + &quot;\r\n&quot;
                        + GetPreviousCombos() + GetGameSettingsDescription());
                    cm.gainItem(4001126,mount); //è´çš„çå‹µ
                    cm.dispose();
                } else if (PreviousGuesses.length + 1 == MaxGuesses) {
                    //Lose
                    PreviousGuesses.push([CurrentCombo, Match]);
                    cm.sendOk(Header() + &quot;#b#eæŠ±æ­‰,ä½ è¼¸äº†!æ‚¨è¶…éäº†æœ€å¤§çŒœæ¸¬æ•¸ (&quot;+MaxGuesses+&quot;)!#n#k\r\n&quot;
                        + &quot;æ­£ç¢ºçš„çµ„åˆæ˜¯ï¼š&quot; +  GetSequenceString(CorrectCombo) + &quot;\r\n&quot;
                        + GetPreviousCombos() + GetGameSettingsDescription());
                    cm.dispose();
                } else {
                    //Continue
                    PreviousGuesses.push([CurrentCombo, Match]);
                    CurrentCombo = new Array();
                    cm.sendSimple(Header() +
                        &quot;#ræŠ±æ­‰ï¼Œåºåˆ—ä¸æ­£ç¢ºã€‚#k\r\n&quot;
                        + GetCurrentCombo() + GetPieceSelectionString()
                        + GetPreviousCombos() + GetGameSettingsDescription());
                }
            }
        } else {
            if (CheckSelection(selection, 0, (CurrentCombo.length &gt; 0 ? NumColors : NumColors - 1))) {
                cm.dispose();
                return;
            }
            if (selection == NumColors) {
                CurrentCombo.pop();
            } else {
                CurrentCombo.push(selection);
            }
            if (CurrentCombo.length == NumSpaces) {
                cm.sendYesNo(Header() + &quot;#rè«‹ç¢ºèªæ‚¨çš„é¸æ“‡ï¼š#k\r\n&quot;
                    + GetCurrentCombo() + GetPreviousCombos() + GetGameSettingsDescription()
                );
            } else {
                cm.sendSimple(Header() + GetCurrentCombo() + GetPieceSelectionString()
                    + GetPreviousCombos() + GetGameSettingsDescription());
            }
        }
    } else {
        cm.dispose();
    }
} 
</code></pre>
<h2 id="è·³æ£‹">è·³æ£‹</h2>
<p>ä¾†æºï¼š<a href="http://forum.ragezone.com/f427/checkers-npc-812398/">Lapje</a><br>
<img src="https://xinchistory.com/ckeditor_upload/uploads/1582563256_xY3hVp7ke9g9YLq.PNG" alt=""></p>
<h2 id="æ•¸å­—çŒœçŒœçŒœ">æ•¸å­—çŒœçŒœçŒœ</h2>
<p><img src="https://Z1Nhouse.github.io//post-images/1582707399837.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582707403673.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582707410714.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1582707414391.PNG" alt=""></p>
<p>é€™å€‹ç¨å¾®è¤‡é›œé»ï¼Œè¨»è§£å¿…çœ‹ã€‚<br>
çæ± ç‰©å“éš¨ä¾¿æ”¾çš„ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ã€‚</p>
<pre><code class="language-JS">/*æ•¸å­—çŒœçŒœçŒœ

å¦‚æœéœ€è¦æª¢æ¸¬èƒŒåŒ…å®¹é‡åŠŸèƒ½,è«‹åœ¨MapleCharacteråŠ ä¸Š

    public short getSpace(int type) {
        return getInventory(MapleInventoryType.getByType((byte) type)).getNumFreeSlot();
    }

    public boolean haveSpace(int type) {
        short slot = getInventory(MapleInventoryType.getByType((byte) type)).getNextFreeSlot();
        return (slot != -1);
    }

    public boolean haveSpaceForId(int itemid) {
        short slot = getInventory(GameConstants.getInventoryType(itemid)).getNextFreeSlot();
        return (slot != -1);
    }

PS.æˆ‘çš„bosslogæ˜¯getBossLog2å’ŒsetBossLog2ï¼Œçœ‹ä½ è‡ªå·±çš„å¯«æ³•ï¼Œåˆ¥ç…§æˆ‘çš„æ‰“ã€‚

*/

var a = 0;
var randomNumber = Array();
var n1;
var n2;
var n3;
var itemData = Array(
        1102275, 
        1042187, 
        1042174, 
        1042149, 
        1072437, 
        1072448, 
        1022005,
        1022006,
        1022007,
        1022009,
        1112414,
        1022097,
        1702256,
        1702257,
        1702258,
        1702259,
        1702260,
        1102040,
        1102041,
        1102042,
        1102043,
        1482073,
        1492073,
        1122075
        );
var pass = true;
var correct = 0
var NumberPosition = Array();


function start() {
    a = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1) {
        cm.dispose();
    } else {
        if (mode == 1)
            a++;
        else
            cm.dispose();
        if (a == -1) {
            cm.dispose();
        } else if (a == 0) {
            /* æ²’æœ‰æª¢æ¸¬èƒŒåŒ…å®¹é‡åŠŸèƒ½é€™é‚Šå°±ä¸éœ€è¦ï¼Œæœ‰å°±å¯ä»¥æŠŠæ³¨é‡‹æ¶ˆæ‰ã€‚
            for (var i = 1; i &lt; 5; i++) {
                if (cm.getSpace(i) &lt; 5) {
                    pass = false;
                }
            }*/
            if (cm.getBossLog2(&quot;æ•¸å­—çŒœçŒœçŒœ&quot;) &gt;= 5) {
                cm.sendOk(&quot;å°ä¸èµ·ï¼Œæ•¸å­—çŒœçŒœçŒœæ´»å‹•ä¸€å¤©åªèƒ½é€²è¡Œäº”æ¬¡ã€‚&quot;);
                cm.dispose();
            } else {
                cm.sendSimple(&quot;è¬çœ¾æœŸå¾…çš„HOTTIMEæ™‚é–“åˆåˆ°äº†ï¼è¦ªæ„›çš„å†’éšªå®¶ï¼Œè«‹å•ä½ è¦åšä»€éº¼å‘¢ï¼Ÿ \r\n#b#L0# æˆ‘è¦ç©æ•¸å­—çŒœçŒœçŒœæ´»å‹•ï¼ \r\n#L1# ä»‹ç´¹ä¸€ä¸‹æ­¤æ´»å‹•ã€‚&quot;);
            }
        } else if (a == 1) {
            if (selection == 0) {//æˆ‘è¦ç©æ•¸å­—çŒœçŒœçŒœæ´»å‹•ï¼
                if (pass) {
                    cm.sendNextS(&quot;ç³»çµ±å°‡éš¨æ©Ÿç”¢ç”Ÿ10å€‹æ•¸å­—ï¼Œè«‹æ‚¨åšå¥½æº–å‚™è¨˜éŒ„ä¸‹é€™10å€‹æ•¸å­—ã€‚ \r\n#r -- é»æ“Šä¸‹ä¸€æ­¥é–‹å§‹ç”¢ç”Ÿã€‚ \r\n #r-- å¦‚æœåˆ‡æ–·å°è©±ï¼ŒåƒåŠ æ´»å‹•æ‰€éœ€çš„ç‰©å“ä¸æ­¸é‚„ã€‚&quot;, 3);
                } else {
                    cm.sendOk(&quot;è«‹è®“ä½ çš„æ‰€æœ‰èƒŒåŒ…æ¬„ç©ºå‡º5å€‹æ ¼å­ã€‚&quot;);
                    cm.dispose();
                }
            } else if (selection == 1) {//ä»‹ç´¹ä¸€ä¸‹æ­¤æ´»å‹•ã€‚
                a = -1;
                cm.sendNext(&quot;#eæ•¸å­—çŒœçŒœçŒœæ´»å‹•éŠæˆ²è¦å‰‡ï¼š#n#d\r\n\r\n1ï¼‰ç³»çµ±æœƒéš¨æ©Ÿçµ¦å‡º10å€‹æ•¸å­—ï¼Œä¸¦ä¸”å…¬ç¤ºã€‚ \r\n2ï¼‰é€™10å€‹æ•¸å­—å°‡è¢«æ‰“äº‚ï¼Œä¸”éš±è—ã€‚ \r\n3ï¼‰ç©å®¶æœƒè¢«éš¨æ©Ÿæå•ç¬¬Nå€‹æ•¸å­—æ˜¯ä»€éº¼\r\nå¦‚æœå›ç­”æ­£ç¢ºå³å¯å¾—åˆ°çå‹µï¼ \r\n4ï¼‰ç©å®¶ä¸€å…±æœ‰3æ¬¡æå•çš„æ©Ÿæœƒã€‚ #e\r\n\r\n5ï¼‰çæ± ä¸­æœ‰éš¨æ©Ÿ5å€‹é“å…· \r\n - å›ç­”æ­£ç¢º1æ¬¡ï¼Œéš¨æ©Ÿå¾è£¡é¢å¾—åˆ°1å€‹é“å…·ã€‚ \r\n - å›ç­”æ­£ç¢º2æ¬¡ï¼Œéš¨æ©Ÿå¾è£¡é¢å¾—åˆ°3å€‹é“å…·ã€‚ \r\n - å›ç­”æ­£ç¢º3æ¬¡ï¼Œçæ± å…§æ‰€æœ‰é“å…·éƒ½å¸¶èµ°ï¼ #n\r\n\r\n åƒåŠ æ´»å‹•çš„æ™‚å€™åˆ‡è¨˜æ‚¨çš„æ‰€æœ‰èƒŒåŒ…ç©ºæ ¼éƒ½æœ‰5æ ¼ä»¥ä¸Šçš„ç©ºé–“ã€‚&quot;);
            }//selection
        } else if (a == 2) {
            var temp;
            var i = 0;
            while (i &lt; 10) {
                temp = Math.floor(Math.random() * 40);
                if (checkid(temp)) {
                    randomNumber.push(temp);//éš¨æ©Ÿ0~39
                    i++;
                }
            }
            var text = &quot;é€™10å€‹éš¨æ©Ÿæ•¸å­—ä¾æ¬¡ç‚ºï¼š\r\n #r- è«‹æ‹¿èµ·æ‚¨çš„ç­†è¨˜ä¸‹é€™éš¨æ©Ÿçš„æ•¸å­—ï¼\r\n\r\n#d&quot;;
            for (var i = 0; i &lt; randomNumber.length; i++) {
                text += &quot;ç¬¬&quot; + (i + 1) + &quot;å€‹æ•¸å­—ç‚ºï¼š - &quot; + randomNumber[i] + &quot;\r\n&quot;;
            }
            cm.sendNextS(text, 3);
        } else if (a == 3) {
            cm.sendNextS(&quot;æ­£åœ¨æ‰“äº‚é€™10å€‹æ•¸å­—ï¼Œè«‹é»æ“Šä¸‹ä¸€æ­¥â€¦â€¦ã€‚&quot;, 3)
        } else if (a == 4) {
            randomNumber.sort(function() {
                return 0.5 - Math.random();
            })//éš¨æ©Ÿæ‰“äº‚
            var temp = Math.floor(Math.random() * 10) + 1;
            var i = 0;
            while (i &lt; 3) {
                temp = Math.floor(Math.random() * 10) + 1;
                //cm.sendY(temp)
                if (checkNumberPosition(temp)) {
                    NumberPosition.push(temp);//éš¨æ©Ÿ1~10
                    i++;
                }
            }//éš¨æ©Ÿä½æ•¸çš„æ•¸å­—çŒœ
            cm.sendGetNumber(&quot;ç¾åœ¨è«‹æ‚¨è¼¸å…¥ç¬¬&quot; + NumberPosition[0] + &quot;å€‹æ•¸å­—ï¼š\r\n #r-- å¦‚æœåˆ‡æ–·å°è©±ï¼ŒåƒåŠ æ´»å‹•æ‰€éœ€çš„ç‰©å“ä¸æ­¸é‚„ã€‚\r\n&quot;, 0, 0, 999);
        } else if (a == 5) {
            n1 = selection; //è¨˜éŒ„ç©å®¶ç¬¬ä¸€æ¬¡è¼¸å…¥
            cm.sendGetNumber(&quot;ç¾åœ¨è«‹æ‚¨è¼¸å…¥ç¬¬&quot; + NumberPosition[1] + &quot;å€‹æ•¸å­—ï¼š\r\n #r-- å¦‚æœåˆ‡æ–·å°è©±ï¼ŒåƒåŠ æ´»å‹•æ‰€éœ€çš„ç‰©å“ä¸æ­¸é‚„ã€‚\r\n&quot;, 0, 0, 999);
        } else if (a == 6) {
            n2 = selection;
            cm.sendGetNumber(&quot;ç¾åœ¨è«‹æ‚¨è¼¸å…¥ç¬¬&quot; + NumberPosition[2] + &quot;å€‹æ•¸å­—ï¼š\r\n #r-- å¦‚æœåˆ‡æ–·å°è©±ï¼ŒåƒåŠ æ´»å‹•æ‰€éœ€çš„ç‰©å“ä¸æ­¸é‚„ã€‚\r\n&quot;, 0, 0, 999);
        } else if (a == 7) {
            n3 = selection;
            cm.sendNextS(&quot;ä½ æ‰€è¼¸å…¥çš„æ•¸å­—ç‚ºï¼š\r\n\r\n ç¬¬&quot; + NumberPosition[0] + &quot;å€‹æ•¸å­— -- &quot; + n1 + &quot;\r\n ç¬¬&quot; + NumberPosition[1] + &quot;å€‹æ•¸å­— -- &quot; + n2 + &quot;\r\n ç¬¬&quot; + NumberPosition[2] + &quot;å€‹æ•¸å­— -- &quot; + n3 + &quot;.&quot;, 3);
        } else if (a == 8) {
            var text = &quot;ç¾åœ¨æˆ‘ä¾†å…¬ä½ˆçµæœï¼š\r\n ç¶“éæ‰“äº‚å¾Œçš„10å€‹æ•¸å­—ç‚ºï¼š\r\n\r\n#b&quot;;
            for (var i = 0; i &lt; randomNumber.length; i++) {
                if (i == (NumberPosition[0] - 1)) {
                    text += &quot;ç¬¬&quot; + (i + 1) + &quot;å€‹æ•¸å­—ç‚ºï¼š - &quot; + randomNumber[i] + &quot; #r( æ‚¨çš„ç­”æ¡ˆç‚ºï¼š&quot; + n1 + &quot;)#b\r\n&quot;;
                } else if (i == (NumberPosition[1] - 1)) {
                    text += &quot;ç¬¬&quot; + (i + 1) + &quot;å€‹æ•¸å­—ç‚ºï¼š - &quot; + randomNumber[i] + &quot; #r( æ‚¨çš„ç­”æ¡ˆç‚ºï¼š&quot; + n2 + &quot;)#b\r\n&quot;;
                } else if (i == (NumberPosition[2] - 1)) {
                    text += &quot;ç¬¬&quot; + (i + 1) + &quot;å€‹æ•¸å­—ç‚ºï¼š - &quot; + randomNumber[i] + &quot; #r( æ‚¨çš„ç­”æ¡ˆç‚ºï¼š&quot; + n3 + &quot;)#b\r\n&quot;;
                } else {
                    text += &quot;ç¬¬&quot; + (i + 1) + &quot;å€‹æ•¸å­—ç‚ºï¼š - &quot; + randomNumber[i] + &quot;\r\n&quot;;
                }
            }
            cm.sendNextS(text, 3);
        } else if (a == 9) {//åˆ¤æ–·æ˜¯å¦ç­”å°éƒ¨åˆ†
            if (randomNumber[NumberPosition[0] - 1] == n1) {
                correct += 1;
            }
            if (randomNumber[NumberPosition[1] - 1] == n2) {
                correct += 1;
            }
            if (randomNumber[NumberPosition[2] - 1] == n3) {
                correct += 1;
            }
            var text = &quot;ç³»çµ±åˆ¤æ–·æ‚¨ä¸€å…±ç­”å°äº†&quot; + correct + &quot;æ¬¡ã€‚\r\n\r\nç¾åœ¨çæ± è£¡é¢æœ‰ä¸‹åˆ—çš„é“å…·(éš¨æ©Ÿ5å€‹)ï¼š\r\n\r\n#b&quot;;

            itemData.sort(function(){return Math.random()&gt;0.5?-1:1;});
            //éš¨æ©Ÿæ‰“äº‚çæ± 
            for (var i = 0; i &lt; 5; i++) {//æ‹¿å‰5ä¸ª
                text += &quot;#i&quot; + itemData[i] + &quot;#   #z&quot; + itemData[i] + &quot;#\r\n\r\n&quot;;
            } 
            cm.sendNextS(text + &quot;#d\r\n\r\n - å›ç­”æ­£ç¢º1æ¬¡ï¼Œéš¨æ©Ÿå¾è£¡é¢å¾—åˆ°1å€‹é“å…·ã€‚ \r\n - å›ç­”æ­£ç¢º2æ¬¡ï¼Œéš¨æ©Ÿå¾è£¡é¢å¾—åˆ°3å€‹é“å…·ã€‚ \r\n - å›ç­”æ­£ç¢º3æ¬¡ï¼Œçæ± å…§æ‰€æœ‰é“å…·éƒ½å¸¶èµ°ï¼&quot;, 3);
        } else if (a == 10) {
            if (correct == 0) {//æ²’å›ç­”æ­£ç¢º
                cm.sendOk(&quot;å°ä¸èµ·ï¼Œä½ æ²’æœ‰å›ç­”æ­£ç¢ºã€‚ \r\né ˜å–ç‰©å“çš„å¿…è¦æ¢ä»¶æ˜¯å¿…é ˆè‡³å°‘å›ç­”ä¸€å€‹æ­£ç¢ºã€‚&quot;);
                cm.dispose();
            } else if (correct == 3) {//å…¨éƒ¨å›ç­”æ­£ç¢º
                var text = &quot;æ­å–œä½ ï¼å›ç­”3å€‹å…¨éƒ¨æ­£ç¢ºï¼ä½ å°‡ç²å–çæ± å…§çš„æ‰€æœ‰ç‰©å“ï¼\r\n\r\n#b&quot;;
                for (var i = 0; i &lt; 5; i++) {//æ‹¿å‰5ä¸ª
                    text += &quot;#i&quot; + itemData[i] + &quot;#   #z&quot; + itemData[i] + &quot;#\r\n\r\n&quot;;
                }
                cm.sendNextS(text + &quot;#d\r\n\r\nè«‹å¦¥å–„ä¿ç®¡å“¦ï¼&quot;, 3);
            } else if (correct == 1) {//æ­£ç¢º1å€‹
                cm.gainItem(itemData[0], 1);
                cm.sendOk(&quot;è´ˆé€æˆåŠŸï¼å–œæ­¡çæ± è£¡é¢çš„é“å…·å—ï¼Ÿ&quot;);
                cm.dispose();
            } else if (correct == 2) {//2å€‹æ­£ç¢º
                var text = &quot;æ­å–œä½ ï¼å›ç­”æ­£ç¢º&quot; + correct + &quot;æ¬¡ï¼ŒæŒ‰ç…§è¦å‰‡ï¼Œä½ å°‡ç²å–çæ± å…§çš„ï¼š\r\n\r\n#b&quot;;
                for (var i = 0; i &lt; 3; i++) {
                    text += &quot;#i&quot; + itemData[i] + &quot;#   #z&quot; + itemData[i] + &quot;#\r\n\r\n&quot;;
                }
                a = 11;
                cm.sendNextS(text + &quot;#d\r\n\r\nè«‹å¦¥å–„ä¿ç®¡å“¦ï¼&quot;, 3);
            } else {
                cm.sendOk(&quot;éŒ¯èª¤ï¼è«‹å’Œç®¡ç†å“¡è¯ç¹«ã€‚\r\néŒ¯èª¤ä»£ç¢¼ï¼š&quot; + correct);
            }
            cm.setBossLog2(&quot;æ•¸å­—çŒœçŒœçŒœ&quot;);
        } else if (a == 11) {//å…¨éƒ¨æ­£ç¢º
            for (var i = 0; i &lt; 5; i++) {//æ‹¿å‰5ä¸ª
                cm.gainItem(itemData[i], 1);
            }
            cm.sendOk(&quot;è´ˆé€æˆåŠŸï¼å–œæ­¡çæ± è£¡é¢çš„é“å…·å—ï¼Ÿ&quot;);
            cm.dispose();
        } else if (a == 12) {//2é¡Œ
            for (var i = 0; i &lt; 3; i++) {
                cm.gainItem(itemData[i], 1);
            }
            cm.sendOk(&quot;è´ˆé€æˆåŠŸï¼å–œæ­¡çæ± è£¡é¢çš„é“å…·å—ï¼Ÿ&quot;);
            cm.dispose();
        }//a
    }//mode
}//f


function checkid(number) {//æª¢æŸ¥æ˜¯å¦é‡è¤‡
    var i = 0;
    while (randomNumber.length &gt;= i) {
        if (randomNumber[i] == number) {
            return false;
        }
        i++;
    }
    return true;
}

function checkNumberPosition(number) {//æª¢æŸ¥æ˜¯å¦é‡è¤‡
    var i = 0;
    while (NumberPosition.length &gt;= i) {
        if (NumberPosition[i] == number) {
            return false;
        }
        i++;
    }
    return true;
}
</code></pre>
<p>å¤§æ¦‚å°±æ˜¯é€™æ¨£ï¼Œèƒ½éš¨æ„æ›´æ”¹çš„éƒ¨åˆ†æˆ‘å¤§å¤šéƒ½æœ‰æ¨™ä¸Šè¨»è§£ï¼Œç•¶ç„¶ï¼Œåªè¦æœ‰å‰µæ„æ€éº¼æ”¹éƒ½è¡Œã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœv120 æŠ€èƒ½0CD/ç¯„åœæ“´å¤§/æ•¸é‡å¢åŠ /æ”»æ“Šæ¬¡æ•¸å¢åŠ ...]]></title>
        <id>https://Z1Nhouse.github.io//post/v-am4i5fY</id>
        <link href="https://Z1Nhouse.github.io//post/v-am4i5fY">
        </link>
        <updated>2020-02-16T17:31:29.000Z</updated>
        <content type="html"><![CDATA[<p>æš«æ™‚åªæ”¾æ¼”ç¤ºï¼Œä»¥ä¸‹GIFç„¡åŠ é€Ÿï¼Œçš†ç‚ºåŸé€Ÿã€‚</p>
<ul>
<li>
<p>å¤©æ€’ å…¨åœ–+æ–½æ”¾å»¶é²æ™‚é–“ç¸®çŸ­<br>
<img src="https://upload.cc/i1/2020/02/17/zZlbQV.gif" alt=""></p>
</li>
<li>
<p>é¾å’†å“® å…¨åœ–+å»¶é²æ™‚é–“ç¸®çŸ­<br>
<img src="https://media.giphy.com/media/MdGVtWG4nCTuMQWBfb/giphy.gif" alt=""></p>
</li>
<li>
<p>é–ƒé€£æ®º æ¬¡æ•¸ç”±6ä¸‹æ”¹ç‚º12ä¸‹<br>
<img src="https://media.giphy.com/media/RJEJs7CaWSNs6q7q93/giphy.gif" alt=""></p>
</li>
<li>
<p>é­”é¾é™è‡¨ æ•¸é‡ç”±6éš»æ”¹ç‚º12éš»<br>
<img src="https://media.giphy.com/media/LrRMuYsrAjZLLUTMKC/giphy.gif" alt=""></p>
</li>
</ul>
<p>æš«æ™‚åªæ”¹äº†é€™äº›ï¼Œå…¶ä»–æœ‰æƒ³ç©çš„è·æ¥­å†æ”¹ã€‚<br>
åªéœ€è¦æ”¹Skill.wzèˆ‡Character.wzå°±å¥½ï¼Œç­‰å“ªå¤©å¿ƒæƒ…å¥½äº†å†æ”¾æ•™ç¨‹ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœv120 ä¸­æ–‡åŒ–101æ™‚ç©ºçš„è£‚ç¸«]]></title>
        <id>https://Z1Nhouse.github.io//post/NyJ2cyQTk</id>
        <link href="https://Z1Nhouse.github.io//post/NyJ2cyQTk">
        </link>
        <updated>2020-02-13T18:25:37.000Z</updated>
        <content type="html"><![CDATA[<p>æ¶‰åŠç›¸é—œNPCèˆ‡åœ°åœ–ä»£ç¢¼ï¼š</p>
<p><strong>æ„›å¥§æ–¯å¡”101æ¨“ 221024500</strong><br>
NPCæ¨™ç¤ºç‰Œ 2040034</p>
<p><strong>ç¬¬ä¸€é—œ ç©å¶ä¹‹å®¶ 922010100</strong><br>
ç´…æ°£çƒ2040036<br>
å£«å…µå®‰å¾·æ£®2040047</p>
<p><strong>ç¬¬äºŒé—œ éºæ£„ä¹‹å¡” 922010200</strong><br>
æ©˜æ°£çƒ2040037</p>
<p><strong>ç¬¬ä¸‰é—œ éºæ£„ä¹‹å¡” 922010300</strong><br>
é»ƒæ°£çƒ2040038</p>
<p><strong>ç¬¬å››é—œ éºæ£„ä¹‹å¡” 922010400</strong><br>
é»ƒç¶ æ°£çƒ 2040039</p>
<p><strong>ç¬¬äº”é—œ éºæ£„ä¹‹å¡” 922010500</strong><br>
ç¶ æ°£çƒ 2040040</p>
<p><strong>ç¬¬å…­é—œ éºæ£„ä¹‹å¡” 922010600</strong><br>
æµ·è—æ°£çƒ 2040041</p>
<p><strong>ç¬¬ä¸ƒé—œ éºæ£„ä¹‹å¡” 922010700</strong><br>
å¤©è—æ°£çƒ 2040042</p>
<p><strong>ç¬¬å…«é—œ éºæ£„ä¹‹å¡” 922010800</strong><br>
è—æ°£çƒ 2040043</p>
<p><strong>ç¬¬ä¹é—œ æ™‚ç©ºçš„è£‚ç¸« 922010900</strong><br>
ç´«æ°£çƒ 2040044</p>
<p><strong>Bonus 922011000</strong><br>
ç²‰ç´…æ°£çƒ 2040045</p>
<h2 id="bug">BUG</h2>
<p>å„ªåŒ–æœ€çµ‚Bonusé—œå¡å¯ä»¥é»æ“ŠNPCé›¢é–‹åœ°åœ–ï¼Œä½†æ˜¯çå“å°±è¦å¦å¤–è¨­ç½®äº†ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ‰€æœ‰é—œå¡NPC JSè…³æœ¬çš„æª”æ¡ˆä¸‹è¼‰ï¼š<a href="http://www.funp.net/683502">Download</a><br>
é™„ä¸ŠLudiPQçš„Eventï¼š<a href="http://www.funp.net/833496">Download</a></p>
<h2 id="åœ–ç‰‡ç¤ºæ„">åœ–ç‰‡ç¤ºæ„</h2>
<p><img src="https://Z1Nhouse.github.io//post-images/1581868674986.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868677602.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868680228.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868682413.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868684612.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868689862.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868687475.PNG" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¥“ä¹‹è°·ç§æœv120 é»è£é™„é­”ç³»çµ±]]></title>
        <id>https://Z1Nhouse.github.io//post/ttJAM9tXu</id>
        <link href="https://Z1Nhouse.github.io//post/ttJAM9tXu">
        </link>
        <updated>2020-01-31T16:25:01.000Z</updated>
        <content type="html"><![CDATA[<p><img src="https://Z1Nhouse.github.io//post-images/1580488136327.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1580488139108.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1580488141737.PNG" alt=""></p>
<h2 id="src">SRC</h2>
<ol>
<li>æ‰“é–‹<code>scripting\NPCConversationManager.java</code> åœ¨æœ€ä¸‹æ–¹}å‰åŠ ä¸Šï¼š<br>
ä»”ç´°çœ‹ï¼Œè£¡é ­å¯ä»¥ä¿®æ”¹é™„é­”çš„èƒ½åŠ›ï¼ŒæŒ‰ç…§å€‹äººå–œå¥½è¨­å®šã€‚</li>
</ol>
<pre><code class="language-java">//é»è£é™„é­”
   public String EnchantCashEqip(byte slot) {
        Equip item = (Equip) c.getPlayer().getInventory(MapleInventoryType.EQUIP).getItem(slot);
        Equip sel = (Equip) item;
        int itemid = c.getPlayer().getInventory(MapleInventoryType.EQUIP).getItem(slot).getItemId();
        boolean isCash = MapleItemInformationProvider.getInstance().isCash(itemid);
        String msg = &quot;&quot;;

        if (isCash) {
            msg += &quot;æ‚¨æ­¤æ¬¡æ‰€é™„é­”çš„é»è£ç‚º#b#z&quot; + itemid + &quot;##k\r\n&quot;;
            msg += &quot;æ‚¨æ­¤æ¬¡çš„é™„é­”ç‚º:\r\n&quot;;
            msg += &quot;ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼\r\n&quot;;

            short Str = (short) Randomizer.rand(5, 10);
            sel.setStr((short) (sel.getStr() + Str));
            msg += &quot;åŠ›é‡ +&quot; + &quot; &quot; + Str + &quot;\r\n&quot;;

            short Dex = (short) Randomizer.rand(5, 10);
            sel.setDex((short) (sel.getDex() + Dex));
            msg += &quot;æ•æ·: &quot; + &quot; &quot; + Dex + &quot;\r\n&quot;;

            short Int = (short) Randomizer.rand(5, 10);
            sel.setInt((short) (sel.getInt() + Int));
            msg += &quot;æ™ºåŠ›: &quot; + &quot; &quot; + Int + &quot;\r\n&quot;;

            short Luk = (short) Randomizer.rand(5, 10);
            sel.setLuk((short) (sel.getLuk() + Luk));
            msg += &quot;å¹¸é‹: &quot; + &quot; &quot; + Luk + &quot;\r\n&quot;;

            short Watk = (short) Randomizer.rand(5, 10);
            sel.setWatk((short) (sel.getWatk() + Watk));
            msg += &quot;ç‰©ç†æ”»æ“Š: &quot; + &quot; &quot; + Watk + &quot;\r\n&quot;;

            short Matk = (short) Randomizer.rand(5, 10);
            sel.setMatk((short) (sel.getMatk() + Matk));
            msg += &quot;é­”æ³•æ”»æ“Š: &quot; + &quot; &quot; + Matk + &quot;\r\n&quot;;
            msg += &quot;ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼\r\n&quot;;
            msg += &quot;è«‹å•æ‚¨æ˜¯å¦è¦ç¹¼çºŒé™„é­”?\r\n#d[é»é¸#ræ˜¯#d,ç¹¼çºŒé™„é­”] [é»é¸#rå¦#d,å­˜å–ç›®å‰é™„é­”]\r\n#dè‹¥è£å‚™ç´ è³ªæœªæ”¹è®Š,è«‹é‡æ–°ç™»å…¥æˆ–æ›é »å³å¯ç”Ÿæ•ˆ!&quot;;
            int used = StringTool.getIntFromString(sel.getOwner());
            used++;
            sel.setOwner(&quot;å·²é™„é­”&quot; + used + &quot;æ¬¡&quot;);
            item = (Equip) sel.copy();
            MapleInventoryManipulator.removeFromSlot(getClient(), MapleInventoryType.EQUIP, (short) slot, item.getQuantity(), false);
            MapleInventoryManipulator.addFromDrop(getClient(), item, false);
            c.getPlayer().equipChanged();
            return msg;
        } else {
            return &quot;æ­¤è£å‚™ä¸¦éé»è£å”·!åƒ…æœ‰é»è£æ‰å¯ä»¥é™„é­”~&quot;;
        }
    }
</code></pre>
<h2 id="npcè…³æœ¬">NPCè…³æœ¬</h2>
<p>éš¨ä¾¿æ‰¾ä¸€å€‹NPCå¡ä¸‹æ–¹çš„è…³æœ¬ï¼š</p>
<pre><code class="language-javascript">load('nashorn:mozilla_compat.js');
importPackage(java.lang);
var status = -1;
var slot = Array();
var sel;
var item = 4001126; //

function start() {
    //status = -1;
    action(1, 0, 0);
}
var icon01 = &quot;#fUI/UIWindow.img/CashTradingRoom/BtCoin/normal/0#&quot;;
var icon02 = &quot;#fUI/UIWindow.img/UserInfo/bossPetCrown#&quot;;
var icon03 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/0#&quot;;
var icon04 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/1#&quot;;
var icon05 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/2#&quot;;
var icon06 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/3#&quot;;
var icon07 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/4#&quot;;
var icon08 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/5#&quot;;
var icon09 = &quot;#fUI/UIWindow.img/Megaphone/0#&quot;;
var icon10 = &quot;#fUI/UIWindow.img/CashTradingRoom/icon1#&quot;;

var status = -1;

function action(mode, type, selection) {
    if (mode == 0 &amp;&amp; status == 0) {
        cm.dispose();
        return;
    }
    if (mode == 1) {
        status++;
    } else {
        status--;
    }
    if (status == 0) {
        cm.sendSimple(
		&quot;#bè«‹å•æ‚¨æ˜¯å¦è¦ä½¿ç”¨é»è£é™„é­”åŠŸèƒ½å‘¢?#d&quot;+	
		&quot;\r\n\r\n#L1#é™„é­”ä¸€æ¬¡éœ€è¦ä½¿ç”¨#r#z&quot;+item+&quot;##k#d350å€‹!#l&quot;
		);
    } else if (status == 1) {
		sel = selection;
        var avail = &quot;&quot;;
        for (var i = 0; i &lt; 96; i++) {
            if (cm.getInventory(1).getItem(i) != null) {
                if (Packages.server.MapleItemInformationProvider.getInstance().isCash(cm.getInventory(1).getItem(i).getItemId())) {
                    avail += &quot;#L&quot; + Math.abs(i) + &quot;##z&quot; + cm.getInventory(1).getItem(i).getItemId() + &quot;##l\r\n&quot;;
                }
            }
        }
        if(avail == &quot;&quot;){
             avail += &quot;å¾ˆæŠ±æ­‰,æ‚¨çš„è£å‚™æ¬„æ²’æœ‰ä»»ä½•çš„é»è£å“¦!!~&quot;;    
            }
        cm.sendSimple(&quot;æƒ³è¦é™„é­”å“ªä¸€ä»¶é»æ•¸è£å‚™å‘¢ï¼Ÿï¼Ÿ\r\n#b&quot; + avail);
    } else if (status == 2) {
        selected = selection;
        cm.sendYesNo(&quot;ä½ æƒ³è¦é™„é­”çš„é»è£æ˜¯ #b#t&quot; + cm.getInventory(1).getItem(selected).getItemId() + &quot;##k.\r\næ‚¨ç¢ºå®šè¦å°æ­¤é»è£è³¦é­”ï¼Ÿï¼Ÿ\r\n&quot;);
    } else if (status == 3) {
		var type ;
        if (cm.haveItem(item, 350)) {
            status = 5;
            cm.sendYesNo(cm.EnchantCashEqip(selected));
			cm.gainItem(item,-350);
        } else {
            status = 3;
            cm.sendOk(&quot;æ‚¨çš„#b#z&quot; + item + &quot;##kä¸è¶³å“¦!!&quot;);

        }
    } else if (status == 4) {
        //cm.getPlayer().fakeRelog();
        cm.dispose();

    } else if (status == 6) {
        status = 2;
        cm.sendOk(&quot;å³å°‡èŠ±è²»#b#z&quot;+item+&quot;##k350å€‹é‡æ–°é™„é­”æ­¤é»è£...&quot;);
    }
    
    }
</code></pre>
]]></content>
    </entry>
</feed>