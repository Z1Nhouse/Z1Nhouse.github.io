<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://Z1Nhouse.github.io/</id>
    <title>Z1N&apos;s house</title>
    <updated>2020-02-16T16:09:53.116Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://Z1Nhouse.github.io/"/>
    <link rel="self" href="https://Z1Nhouse.github.io//atom.xml"/>
    <subtitle>System.out.print(&quot;Welcome to Z1N&apos;s house！&quot;);</subtitle>
    <logo>https://Z1Nhouse.github.io//images/avatar.png</logo>
    <icon>https://Z1Nhouse.github.io//favicon.ico</icon>
    <rights>All rights reserved 2020, Z1N&apos;s house</rights>
    <entry>
        <title type="html"><![CDATA[楓之谷私服v120 中文化101時空的裂縫]]></title>
        <id>https://Z1Nhouse.github.io//post/NyJ2cyQTk</id>
        <link href="https://Z1Nhouse.github.io//post/NyJ2cyQTk">
        </link>
        <updated>2020-02-13T18:25:37.000Z</updated>
        <content type="html"><![CDATA[<p>涉及相關NPC與地圖代碼：</p>
<p><strong>愛奧斯塔101樓 221024500</strong><br>
NPC標示牌 2040034</p>
<p><strong>第一關 玩偶之家 922010100</strong><br>
紅氣球2040036<br>
士兵安德森2040047</p>
<p><strong>第二關 遺棄之塔 922010200</strong><br>
橘氣球2040037</p>
<p><strong>第三關 遺棄之塔 922010300</strong><br>
黃氣球2040038</p>
<p><strong>第四關 遺棄之塔 922010400</strong><br>
黃綠氣球 2040039</p>
<p><strong>第五關 遺棄之塔 922010500</strong><br>
綠氣球 2040040</p>
<p><strong>第六關 遺棄之塔 922010600</strong><br>
海藍氣球 2040041</p>
<p><strong>第七關 遺棄之塔 922010700</strong><br>
天藍氣球 2040042</p>
<p><strong>第八關 遺棄之塔 922010800</strong><br>
藍氣球 2040043</p>
<p><strong>第九關 時空的裂縫 922010900</strong><br>
紫氣球 2040044</p>
<p><strong>Bonus 922011000</strong><br>
粉紅氣球 2040045</p>
<h2 id="bug">BUG</h2>
<p>優化最終Bonus關卡可以點擊NPC離開地圖，但是獎品就要另外設置了。</p>
<p>以下是所有關卡NPC JS腳本的檔案下載：<a href="http://www.funp.net/683502">Download</a><br>
附上LudiPQ的Event：<a href="http://www.funp.net/833496">Download</a></p>
<h2 id="圖片示意">圖片示意</h2>
<p><img src="https://Z1Nhouse.github.io//post-images/1581868674986.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868677602.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868680228.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868682413.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868684612.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868689862.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868687475.PNG" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[楓之谷私服v120 點裝附魔系統]]></title>
        <id>https://Z1Nhouse.github.io//post/ttJAM9tXu</id>
        <link href="https://Z1Nhouse.github.io//post/ttJAM9tXu">
        </link>
        <updated>2020-01-31T16:25:01.000Z</updated>
        <content type="html"><![CDATA[<p><img src="https://Z1Nhouse.github.io//post-images/1580488136327.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1580488139108.PNG" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1580488141737.PNG" alt=""></p>
<h2 id="src">SRC</h2>
<ol>
<li>打開<code>scripting\NPCConversationManager.java</code> 在最下方}前加上：<br>
仔細看，裡頭可以修改附魔的能力，按照個人喜好設定。</li>
</ol>
<pre><code class="language-java">//點裝附魔
   public String EnchantCashEqip(byte slot) {
        Equip item = (Equip) c.getPlayer().getInventory(MapleInventoryType.EQUIP).getItem(slot);
        Equip sel = (Equip) item;
        int itemid = c.getPlayer().getInventory(MapleInventoryType.EQUIP).getItem(slot).getItemId();
        boolean isCash = MapleItemInformationProvider.getInstance().isCash(itemid);
        String msg = &quot;&quot;;

        if (isCash) {
            msg += &quot;您此次所附魔的點裝為#b#z&quot; + itemid + &quot;##k\r\n&quot;;
            msg += &quot;您此次的附魔為:\r\n&quot;;
            msg += &quot;－－－－－－－－－－－－－－－－－－－－－－－\r\n&quot;;

            short Str = (short) Randomizer.rand(5, 10);
            sel.setStr((short) (sel.getStr() + Str));
            msg += &quot;力量 +&quot; + &quot; &quot; + Str + &quot;\r\n&quot;;

            short Dex = (short) Randomizer.rand(5, 10);
            sel.setDex((short) (sel.getDex() + Dex));
            msg += &quot;敏捷: &quot; + &quot; &quot; + Dex + &quot;\r\n&quot;;

            short Int = (short) Randomizer.rand(5, 10);
            sel.setInt((short) (sel.getInt() + Int));
            msg += &quot;智力: &quot; + &quot; &quot; + Int + &quot;\r\n&quot;;

            short Luk = (short) Randomizer.rand(5, 10);
            sel.setLuk((short) (sel.getLuk() + Luk));
            msg += &quot;幸運: &quot; + &quot; &quot; + Luk + &quot;\r\n&quot;;

            short Watk = (short) Randomizer.rand(5, 10);
            sel.setWatk((short) (sel.getWatk() + Watk));
            msg += &quot;物理攻擊: &quot; + &quot; &quot; + Watk + &quot;\r\n&quot;;

            short Matk = (short) Randomizer.rand(5, 10);
            sel.setMatk((short) (sel.getMatk() + Matk));
            msg += &quot;魔法攻擊: &quot; + &quot; &quot; + Matk + &quot;\r\n&quot;;
            msg += &quot;－－－－－－－－－－－－－－－－－－－－－－－\r\n&quot;;
            msg += &quot;請問您是否要繼續附魔?\r\n#d[點選#r是#d,繼續附魔] [點選#r否#d,存取目前附魔]\r\n#d若裝備素質未改變,請重新登入或換頻即可生效!&quot;;
            int used = StringTool.getIntFromString(sel.getOwner());
            used++;
            sel.setOwner(&quot;已附魔&quot; + used + &quot;次&quot;);
            item = (Equip) sel.copy();
            MapleInventoryManipulator.removeFromSlot(getClient(), MapleInventoryType.EQUIP, (short) slot, item.getQuantity(), false);
            MapleInventoryManipulator.addFromDrop(getClient(), item, false);
            c.getPlayer().equipChanged();
            return msg;
        } else {
            return &quot;此裝備並非點裝唷!僅有點裝才可以附魔~&quot;;
        }
    }
</code></pre>
<h2 id="npc腳本">NPC腳本</h2>
<p>隨便找一個NPC塞下方的腳本：</p>
<pre><code class="language-javascript">load('nashorn:mozilla_compat.js');
importPackage(java.lang);
var status = -1;
var slot = Array();
var sel;
var item = 4001126; //

function start() {
    //status = -1;
    action(1, 0, 0);
}
var icon01 = &quot;#fUI/UIWindow.img/CashTradingRoom/BtCoin/normal/0#&quot;;
var icon02 = &quot;#fUI/UIWindow.img/UserInfo/bossPetCrown#&quot;;
var icon03 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/0#&quot;;
var icon04 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/1#&quot;;
var icon05 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/2#&quot;;
var icon06 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/3#&quot;;
var icon07 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/4#&quot;;
var icon08 = &quot;#fUI/UIWindow.img/AriantMatch/characterIcon/5#&quot;;
var icon09 = &quot;#fUI/UIWindow.img/Megaphone/0#&quot;;
var icon10 = &quot;#fUI/UIWindow.img/CashTradingRoom/icon1#&quot;;

var status = -1;

function action(mode, type, selection) {
    if (mode == 0 &amp;&amp; status == 0) {
        cm.dispose();
        return;
    }
    if (mode == 1) {
        status++;
    } else {
        status--;
    }
    if (status == 0) {
        cm.sendSimple(
		&quot;#b請問您是否要使用點裝附魔功能呢?#d&quot;+	
		&quot;\r\n\r\n#L1#附魔一次需要使用#r#z&quot;+item+&quot;##k#d350個!#l&quot;
		);
    } else if (status == 1) {
		sel = selection;
        var avail = &quot;&quot;;
        for (var i = 0; i &lt; 96; i++) {
            if (cm.getInventory(1).getItem(i) != null) {
                if (Packages.server.MapleItemInformationProvider.getInstance().isCash(cm.getInventory(1).getItem(i).getItemId())) {
                    avail += &quot;#L&quot; + Math.abs(i) + &quot;##z&quot; + cm.getInventory(1).getItem(i).getItemId() + &quot;##l\r\n&quot;;
                }
            }
        }
        if(avail == &quot;&quot;){
             avail += &quot;很抱歉,您的裝備欄沒有任何的點裝哦!!~&quot;;    
            }
        cm.sendSimple(&quot;想要附魔哪一件點數裝備呢？？\r\n#b&quot; + avail);
    } else if (status == 2) {
        selected = selection;
        cm.sendYesNo(&quot;你想要附魔的點裝是 #b#t&quot; + cm.getInventory(1).getItem(selected).getItemId() + &quot;##k.\r\n您確定要對此點裝賦魔？？\r\n&quot;);
    } else if (status == 3) {
		var type ;
        if (cm.haveItem(item, 350)) {
            status = 5;
            cm.sendYesNo(cm.EnchantCashEqip(selected));
			cm.gainItem(item,-350);
        } else {
            status = 3;
            cm.sendOk(&quot;您的#b#z&quot; + item + &quot;##k不足哦!!&quot;);

        }
    } else if (status == 4) {
        //cm.getPlayer().fakeRelog();
        cm.dispose();

    } else if (status == 6) {
        status = 2;
        cm.sendOk(&quot;即將花費#b#z&quot;+item+&quot;##k350個重新附魔此點裝...&quot;);
    }
    
    }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[楓之谷私服v120 當前地圖怪物掉寶查詢]]></title>
        <id>https://Z1Nhouse.github.io//post/6o_CeDq_a</id>
        <link href="https://Z1Nhouse.github.io//post/6o_CeDq_a">
        </link>
        <updated>2020-01-31T15:58:15.000Z</updated>
        <content type="html"><![CDATA[<p>照樣是搬來的，製作是彩虹工作室，但不記得從哪扒來的。<br>
<img src="https://Z1Nhouse.github.io//post-images/1580486644944.PNG" alt=""></p>
<h2 id="改src">改SRC</h2>
<p>其實應該看著NPC腳本就會知道怎麼改了...<br>
腳本的getAllMonstersThreadsafe是原端自帶<br>
真正要加的是getAllUniqueMonsters、checkMapDrop以及checkDrop函數</p>
<ol>
<li>打開<code>Sever\Maps\MapleMap.java</code><br>
在一串變數宣告下方貼上</li>
</ol>
<pre><code class="language-java">public List&lt;Integer&gt; getAllUniqueMonsters() {
        ArrayList&lt;Integer&gt; ret = new ArrayList&lt;&gt;();
        mapobjectlocks.get(MapleMapObjectType.MONSTER).readLock().lock();
        try {
            for (MapleMapObject mmo : mapobjects.get(MapleMapObjectType.MONSTER).values()) {
                int theId = ((MapleMonster) mmo).getId();
                if (!ret.contains(theId)) {
                    ret.add(theId);
                }
            }
        } finally {
            mapobjectlocks.get(MapleMapObjectType.MONSTER).readLock().unlock();
        }
        return ret;
    }

    /*怪物查詢*/
    private Map&lt;Integer, MapleMapObject&gt; mapobjects1 = new LinkedHashMap&lt;Integer, MapleMapObject&gt;();

    public Collection&lt;MapleMapObject&gt; getMapObjects() {
        return Collections.unmodifiableCollection(mapobjects1.values());
    }

    public List&lt;Integer&gt; getUniqueMonsters() {
        List&lt;Integer&gt; mobs = new ArrayList&lt;Integer&gt;();
        for (MapleMapObject obj : this.getMapObjects()) {
            MapleMonster mob = this.getMonsterByOid(obj.getObjectId());
            if (mob != null) {
                if (!mobs.contains(mob.getId())) {
                    mobs.add(mob.getId());
                }
            }
        }
        return mobs;
    }
</code></pre>
<ol start="2">
<li>打開<code>scripting\NPCConversationManager.java</code></li>
</ol>
<p>在最下方}前貼上</p>
<pre><code class="language-java">public String checkDrop(int mobId) {
        MapleItemInformationProvider ii = MapleItemInformationProvider.getInstance();
        List&lt;MonsterDropEntry&gt; ranks = MapleMonsterInformationProvider.getInstance().retrieveDrop(mobId);
        if (!ranks.isEmpty() &amp;&amp; ranks.size() &gt; 0) {
            int num = 0, itemId, chance;
            MonsterDropEntry de;
            StringBuilder name = new StringBuilder();
            for (MonsterDropEntry rank : ranks) {
                de = rank;
                if (de.chance &gt; 0 &amp;&amp; (de.questid &lt;= 0 || (de.questid &gt; 0 &amp;&amp; MapleQuest.getInstance(de.questid).getName().length() &gt; 0))) {
                    itemId = de.itemId;
                    if (itemId == 0) {
                        continue;
                    } else if (!ii.itemExists(itemId)) {
                        continue;
                    }
                    if (num == 0) {
                        name.append(&quot;當前怪物 #o&quot;).append(mobId).append(&quot;# 的掉寶率為:\r\n&quot;);
                        name.append(&quot;--------------------------------------\r\n&quot;);
                    }
                    String namez = &quot;&quot;;
                    if (itemId == 0) { //金幣 物品ID為0就是金幣道具
                        itemId = 4031041; //休咪的錢包 display sack of cash
                        namez = (de.Minimum * getClient().getChannelServer().getMesoRate()) + &quot; - &quot; + (de.Maximum * getClient().getChannelServer().getMesoRate()) + &quot; 的金幣&quot;;
                    } else {
                        namez = &quot;#z&quot; + itemId + &quot;#&quot;;
                    }
                    chance = de.chance * getClient().getChannelServer().getDropRate();
                    if (getPlayer().isAdmin()) {
                        name.append(num + 1).append(&quot;) #v&quot;).append(itemId).append(&quot;#&quot;).append(namez).append(&quot; - &quot;).append(Integer.valueOf(chance &gt;= 999999 ? 1000000 : chance).doubleValue() / 10000.0).append(&quot;%的掉寶率. &quot;).append(de.questid &gt; 0 &amp;&amp; MapleQuest.getInstance(de.questid).getName().length() &gt; 0 ? (&quot;需要接受任務: &quot; + MapleQuest.getInstance(de.questid).getName()) : &quot;&quot;).append(&quot;\r\n&quot;);
                    } else {
                        name.append(num + 1).append(&quot;) #v&quot;).append(itemId).append(&quot;#&quot;).append(namez).append(de.questid &gt; 0 &amp;&amp; MapleQuest.getInstance(de.questid).getName().length() &gt; 0 ? (&quot;需要接受任務: &quot; + MapleQuest.getInstance(de.questid).getName()) : &quot;&quot;).append(&quot;\r\n&quot;);
                    }
                    num++;
                }
            }
            if (name.length() &gt; 0) {
                return name.toString();
            }
        }
        return &quot;沒有找到這個怪物的掉寶率數據。&quot;;
    }

     public String checkMapDrop() {
        List&lt;MonsterGlobalDropEntry&gt; ranks = new ArrayList&lt;&gt;(MapleMonsterInformationProvider.getInstance().getGlobalDrop());
        int mapid = getPlayer().getMap().getId();
//        int cashServerRate = getClient().getChannelServer().getCashRate(); //點卷掉寶率
        //int globalServerRate = getClient().getChannelServer().getDropgRate(); //特殊數據庫道具掉寶率
        int globalServerRate = 1; //特殊數據庫道具掉寶率
        if (ranks != null &amp;&amp; ranks.size() &gt; 0) {
            int num = 0, itemId, chance;
            MonsterGlobalDropEntry de;
            StringBuilder name = new StringBuilder();
            for (MonsterGlobalDropEntry rank : ranks) {
                de = rank;
                if (de.continent &lt; 0 || (de.continent &lt; 10 &amp;&amp; mapid / 100000000 == de.continent) || (de.continent &lt; 100 &amp;&amp; mapid / 10000000 == de.continent) || (de.continent &lt; 1000 &amp;&amp; mapid / 1000000 == de.continent)) {
                    itemId = de.itemId;
                    if (num == 0) {
                        name.append(&quot;當前地圖 #r&quot;).append(mapid).append(&quot;#k - #m&quot;).append(mapid).append(&quot;# 的全局掉寶率為:&quot;);
                        name.append(&quot;\r\n--------------------------------------\r\n&quot;);
                    }
                    String names = &quot;#z&quot; + itemId + &quot;#&quot;;
//                    if (itemId == 0 &amp;&amp; cashServerRate != 0) {
//                        itemId = 4031041;
//                        names = (de.minimum * cashServerRate) + &quot; - &quot; + (de.maximum * cashServerRate) + &quot; 的抵用卷&quot;;
//                    }
                    chance = de.chance * globalServerRate;
                    if (getPlayer().isAdmin()) {
                        name.append(num + 1).append(&quot;) #v&quot;).append(itemId).append(&quot;#&quot;).append(names).append(&quot; - &quot;).append(Integer.valueOf(chance &gt;= 999999 ? 1000000 : chance).doubleValue() / 10000.0).append(&quot;%的掉寶率. &quot;).append(de.questid &gt; 0 &amp;&amp; MapleQuest.getInstance(de.questid).getName().length() &gt; 0 ? (&quot;需要接受任務: &quot; + MapleQuest.getInstance(de.questid).getName()) : &quot;&quot;).append(&quot;\r\n&quot;);
                    } else {
                        name.append(num + 1).append(&quot;) #v&quot;).append(itemId).append(&quot;#&quot;).append(names).append(de.questid &gt; 0 &amp;&amp; MapleQuest.getInstance(de.questid).getName().length() &gt; 0 ? (&quot;需要接受任務: &quot; + MapleQuest.getInstance(de.questid).getName()) : &quot;&quot;).append(&quot;\r\n&quot;);
                    }
                    num++;
                }
            }
            if (name.length() &gt; 0) {
                return name.toString();
            }
        }
        return &quot;當前地圖沒有設置全局掉寶率。&quot;;
    }
</code></pre>
<h2 id="npc腳本">NPC腳本</h2>
<p>隨便塞給一個NPC就行</p>
<pre><code class="language-javascript">/*
	製作：彩虹工作室
	功能：查看地圖怪物爆率
	時間：2016年12月23日
*/

var status = -1;

function action(mode, type, selection) {
    if (mode == 1) {
        status++;
    } else {
        if (status == 0) {
            cm.dispose();
        }
        status--;
    }
    if (status == 0) {
        if (cm.getMap().getAllMonstersThreadsafe().size() &lt;= 0) {
            cm.sendOk(&quot;當前地圖沒有刷新怪物，無法查看怪物掉寶資訊。&quot;);
            cm.dispose();
            return;
        }
        var selStr = &quot;請選擇你要查看怪物的掉寶資訊。\r\n\r\n#b&quot;;
        var iz = cm.getMap().getAllUniqueMonsters().iterator();
        while (iz.hasNext()) {
            var zz = iz.next();
            selStr += &quot;#L&quot; + zz + &quot;##o&quot; + zz + &quot;##l\r\n&quot;;
        }
        if (cm.getPlayer().isAdmin()) {
            selStr += &quot;\r\n#L0# #r查看全地圖掉寶資訊#k#l&quot;;
        }
        cm.sendSimple(selStr);
    } else if (status == 1) {
        if (selection == 0) {
            cm.sendNext(cm.checkMapDrop());
        } else {
             cm.sendOk(cm.checkDrop(selection));
        }
        cm.dispose();
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[楓之谷私服v120 每日簽到系統]]></title>
        <id>https://Z1Nhouse.github.io//post/Kfyq7c531</id>
        <link href="https://Z1Nhouse.github.io//post/Kfyq7c531">
        </link>
        <updated>2020-01-31T15:19:48.000Z</updated>
        <content type="html"><![CDATA[<p>網上絕對不會有人隨便分享這個...<br>
剛剛翻找之前檔案的時候看見的，隨手分享一下，<br>
這也不是我搞的，忘了從哪裡扒來的。<br>
時間有點久遠，如果有哪裡漏掉了自行研究吧。<br>
<img src="https://Z1Nhouse.github.io//post-images/1580485046227.PNG" alt=""><br>
簽到成功<br>
<img src="https://Z1Nhouse.github.io//post-images/1580485049904.PNG" alt=""><br>
簽到過或者時長不足<br>
<img src="https://Z1Nhouse.github.io//post-images/1580485053777.PNG" alt=""><br>
簽到後會在資料表中自動寫入今天日期以及簽到的帳號id。<br>
<img src="https://Z1Nhouse.github.io//post-images/1580484996486.PNG" alt=""><br>
概念就是：寫方法 - 用資料庫做紀錄 - 寫NPC腳本來使用<br>
很籠統，大概理解就行。<br>
即使無程式基礎也能自己改私服。</p>
<h2 id="新建資料表">新建資料表</h2>
<p>首先，在資料庫新增一個資料表<code>prizelog_n</code>：</p>
<ul>
<li>id/int/10/勾選主索引鍵/自動遞增</li>
<li>accid/int/10</li>
<li>bossid/varchar/20/字元集:utf8 整理:utf8_general_ci</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://Z1Nhouse.github.io//post-images/1580484064199.PNG" alt=""></figure>
<h2 id="改src">改SRC</h2>
<ol>
<li>打開<code>client\MapleCharacter.java</code>，在最後一個}前貼上：</li>
</ol>
<pre><code class="language-java">public int getPrizeLog_n(String bossid) {
        Connection con1 = DatabaseConnection.getConnection();
        try {
            int ret_count = 0;
            PreparedStatement ps;
            ps = con1.prepareStatement(&quot;select count(*) from prizelog_n where accid = ? and bossid = ?&quot;);
            ps.setInt(1, getClient().getAccID());
            ps.setString(2, bossid);
            ResultSet rs = ps.executeQuery();
            if (rs.next()) {
                ret_count = rs.getInt(1);
            } else {
                ret_count = -1;
            }
            rs.close();
            ps.close();
            return ret_count;
        } catch (Exception Wx) {
            return -1;
        }
    }
    
    public void setPrizeLog_n(String bossid) {
       Connection con1 = DatabaseConnection.getConnection();
        try {
            PreparedStatement ps;
            ps = con1.prepareStatement(&quot;insert into prizelog_n (accid, bossid) values (?,?)&quot;);
            ps.setInt(1, getClient().getAccID());
            ps.setString(2, bossid);
            ps.executeUpdate();
            ps.close();
        } catch (Exception Wx) {
        }
    }
</code></pre>
<ol start="2">
<li>同樣是<code>MapleCharacter.java</code></li>
</ol>
<p>在上方一串變數宣告附近加上</p>
<pre><code class="language-java">private long onlineTime;//上線時間
</code></pre>
<p>在一串變數宣告下方貼上</p>
<pre><code class="language-java">/** 
OnlineTime 系統
*/
    public void initOnlineTime() {
        onlineTime = getEventCount(&quot;OnlineTime&quot;, 0);
    }
//獲得在線時間
    public int getOnlineTime() {
        long l2;
        long l3 = getDaybyDay(1).getTimeInMillis() - getLogintime();
        if (onlineTime &lt; 0) {
            resetEventCount(&quot;OnlineTime&quot;, 0);
            initOnlineTime();
        }
        if (l3 &gt;= 86400000) {//86400000 = 一天毫秒
            l2 = getDaybyDay(1).getTimeInMillis() - 86400000;
            setLogintime(getDaybyDay(0).getTimeInMillis());
        } else {
            l2 = getLogintime() - onlineTime;
        }
        return (int) (System.currentTimeMillis() - l2);
    }

    public void setOnlineTime() {
        if (getLogintime() &gt; 0) {
            long l2 = getDaybyDay(1).getTimeInMillis() - getLogintime();
            if (onlineTime &lt; 0) {
                resetEventCount(&quot;OnlineTime&quot;, 0);
            }
            setEventCount(&quot;OnlineTime&quot;, 0, (int) (System.currentTimeMillis() - (l2 &gt;= 86400000 ? getDaybyDay(1).getTimeInMillis() - 86400000 : getLogintime())));
            setLogintime(System.currentTimeMillis());
        }
    }

    public void setOnlineTime(long onlineTime) {
        this.onlineTime = onlineTime;
    }
</code></pre>
<h2 id="簽到npc腳本">簽到NPC腳本</h2>
<p>最後一步就是找個NPC把腳本貼上，當成每日簽到的NPC來用。<br>
腳本直接放上..自行研究吧。<br>
可以調整每日贈送不一樣的物品或者點數，當然也可以都給..看你開心。</p>
<pre><code class="language-javascript">var status = 0;
var objDate=new Date();
var day=objDate.getDay();
var Month= objDate.getMonth();
var MonthS =[&quot;1月&quot;,&quot;2月&quot;,&quot;3月&quot;,&quot;4月&quot;,&quot;5月&quot;,&quot;6月&quot;,&quot;7月&quot;,&quot;8月&quot;,&quot;9月&quot;,&quot;10月&quot;,&quot;11月&quot;,&quot;12月&quot;];
var weekday = [&quot;日&quot;, &quot;一&quot;, &quot;二&quot;, &quot;三&quot;, &quot;四&quot;, &quot;五&quot;, &quot;六&quot;];
var MonthB=objDate.getMonth()-1;
var tzc =objDate.getDate();
var Year =objDate.getFullYear();

var itemList = Array(
Array(5561000, 5),//從下一個開始
Array(5561000, 3),//1 任意門高級劵
Array(5220000, 10),//2 轉蛋劵
Array(2450000, 3),//3 獵人的幸運
Array(2022179, 5),//4 紫色的蘋果
Array(2022462, 3),//5 卡4
Array(2022463, 3),//6 卡5
Array(2450000, 2),//7 獵人的幸運
Array(5220010, 3),//8 超級轉蛋劵
Array(5510000, 5),//9 原地復活術
Array(5201003, 2),//10 小鋼珠盒子(100)
Array(2101120, 5),//11 魚怪召喚袋
Array(2450000, 1),//12 獵人的幸運
Array(2450000, 1),//13 獵人的幸運
Array(2450000, 1),//14 獵人的幸運
Array(5201001, 1),//15 小鋼珠盒子(500)
Array(4000313, 200),//16 黃金楓葉
Array(2101120, 5), //17 魚怪召喚袋
Array(2101120, 5),//18 魚怪召喚袋
Array(5220010, 1),//19 超級轉蛋劵
Array(2022179, 5),//20 紫色的蘋果
Array(2022179, 5),//21 紫色的蘋果
Array(4000313, 200),//22 黃金楓葉
Array(5220000, 30),//23 轉蛋劵
Array(2022462, 5),//24 卡4
Array(2022463, 5),//25 卡5
Array(5201003, 3),//26 小鋼珠盒子(100)
Array(4000313, 200),//27 黃金楓葉
Array(5561000 , 10),//28 任意門高級劵
Array(5220000, 50),//29 轉蛋劵
Array(5510000, 10),//30 原地復活術
Array(5201001, 1) //31 小鋼珠盒子(500)

); // 因為沒0日 從第1開始設置物品 第一格道具id 第二格設置數量

var debug = false;

function start() {
    status = -1;
	if(debug &amp;&amp; cm.getPlayer().getGMLevel() &lt; 4){
		cm.dispose();
		return;
	}
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1) {
        cm.dispose();
    } else {
        if (mode == 0 &amp;&amp; status == 0) {
            cm.dispose();
            return;
        }
        if (mode == 1) status++;
        else status--;
        if (status == 0) {


var tt=31;
if (Month == 0 || Month == 2 || Month == 4 || Month == 6|| Month == 7 || Month == 9 || Month == 11) { // 1月 3月 5月 78 月 10月 12月
tt=32;
}
if (Month == 1) { // 2月的話
tt=29;
}			
              var text3 = 0;
for(var i=1; i&lt;tt; i++) {
text3+= cm.getPlayer().getPrizeLog_n(&quot;&quot;+Year+&quot;年&quot;+MonthS[Month]+i+&quot;日&quot;);}
             
              var ta=&quot;#b&quot;;

              var text = &quot;&quot;;

		for(var i=1,ytz=1; i&lt;tt; i++,ytz++) {
if (cm.getPlayer().getPrizeLog_n(&quot;&quot;+Year+&quot;年&quot;+MonthS[Month]+i+&quot;日&quot;) == 0) {
ta=&quot;#b&quot;;
}
if (cm.getPlayer().getPrizeLog_n(&quot;&quot;+Year+&quot;年&quot;+MonthS[Month]+i+&quot;日&quot;) != 0) {
ta=&quot;#r&quot;;
}
			text+=ta+ytz+&quot;#i&quot;+itemList[i][0]+&quot;#&quot;+((i + 0) % 7 == 0 ? &quot;\r\n&quot;: &quot;&quot;);
		}
            var text2 = 0;

 cm.sendSimple(&quot;#e現在時間:#b&quot;+Year+&quot;年&quot;+MonthS[Month]+tzc+&quot;日星期&quot;+weekday[day]+&quot;\r\n#k本月累積簽到【 #r&quot;+ text3 +&quot;#k 】天&quot;+&quot;\r\n#k本日在線時間【 #r&quot;+ cm.getOnlineTime() +&quot;#k 】分&quot;+&quot;\r\n#b上線時間需滿60分鐘才可進行每日簽到&quot;+&quot;\r\n#k&quot;+&quot;\r\n#L0# #r每日簽到獲得100點#l\r\n\r\n#k&quot;);
} else if (status == 1) {


            if (selection == 0) {
 if(!cm.canHold(itemList[tzc][0], itemList[tzc][1])){
             cm.sendOk(&quot;您的背包空間不足&quot;);
             cm.dispose();
             return;   
             }
  if (cm.getPlayer().getPrizeLog_n(&quot;&quot;+Year+&quot;年&quot;+MonthS[Month]+tzc+&quot;日&quot;) &lt; 1 &amp;&amp; cm.getOnlineTime() &gt;= 60) { // 在線時數
                    cm.getPlayer().setPrizeLog_n(&quot;&quot;+Year+&quot;年&quot;+MonthS[Month]+tzc+&quot;日&quot;);
           
                  //  cm.gainItem(itemList[tzc][0], itemList[tzc][1]);
					cm.getPlayer().modifyCSPoints(1, 100, true);

                    cm.sendOk(&quot;恭喜您成功進行簽到並獲取100點!!&quot;);
     cm.worldMessage(5,&quot;『xx谷』&quot; + &quot; : &quot; + &quot;玩家 &quot; + cm.getChar().getName() + &quot; 已進行每日簽到!!!&quot;);
                    cm.dispose();
                        
                } else{ 
                    cm.sendOk(&quot;已進行每日簽到或上線時間未達60分鐘!。&quot;);
                    cm.dispose();
                 } 


        } //else if (selection == 1) {

/*if(MonthB &lt; 0)
MonthB=11;
cm.sendSimple(&quot;#r★★★★★★★★★★★★\r\n#b#L0#&quot;+MonthS[Month]+&quot;限定簽到獎勵#l\r\n\r\n#r★★★★★★★★★★★★&quot;);
                    

}
}else if (status == 2) {
 cm.dispose();
   if (selection == 0) {
              cm.openNpc(9010000, &quot;累積簽到&quot;);
            /*} else if (selection == 1) {
            cm.openNpc(9010000, &quot;累積簽到&quot;);*/
         } 
}

}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[楓之谷私服武陵道場NPC JS腳本]]></title>
        <id>https://Z1Nhouse.github.io//post/dIb0rHox</id>
        <link href="https://Z1Nhouse.github.io//post/dIb0rHox">
        </link>
        <updated>2020-01-30T07:15:11.000Z</updated>
        <content type="html"><![CDATA[<p>適用端口：120白狐端</p>
<h2 id="演示">演示：</h2>
<p>兌換道具數量可在腳本內自行更改。<br>
<img src="https://Z1Nhouse.github.io//post-images/1581868964190.png" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868967442.png" alt=""><br>
<img src="https://Z1Nhouse.github.io//post-images/1581868972678.png" alt=""></p>
<ul>
<li>中文化：本人</li>
<li>NPC：2091005</li>
</ul>
<h2 id="腳本">腳本：</h2>
<pre><code class="language-javascript">var status = -1;
var sel;
var mapid;

function start() {
    mapid = cm.getMapId();

    if (mapid == 925020001) {
	cm.sendSimple(&quot;我的師傅是武陵中擁有最高功力的人，您現在是想告訴我您要挑戰我的師傅嗎？不要說我沒有警告過你。#b \n\r #L0#我想單人挑戰他#l \n\r #L1#我想組隊挑戰他#l \n\r #L2#我想兌換腰帶#l \n\r #L3#我想重設訓練點#l \n\r #L5#什麼是武陵修煉場？#l&quot;);
    } else if (isRestingSpot(mapid)) {
	cm.sendSimple(&quot;我很驚訝你已經安全地達到了這個樓層，但是不會再這麼容易了。你怎麼想？你想繼續嗎？#b \n\r #L0#是的，我要繼續。#l \n\r #L1#我想離開。#l \n\r #L2#我想儲存我的紀錄。#l&quot;);
    } else {
	cm.sendYesNo(&quot;什麼？你準備要離開了？您還可以進入下一個級別呢！你確定真的要離開？&quot;);
    }
}

function action(mode, type, selection) {
    if (mapid == 925020001) {
	if (mode == 1) {
	    status++;
	} else {
	    cm.dispose();
		return;
	}
	if (status == 0) {
	    sel = selection;

	    if (sel == 5) {
		cm.sendNext(&quot;我的師傅是武陵中擁有最高功力的人，且他也是建立這個武陵修練塔的人。武陵道場是一個龐大的訓練設施，共有38層。 每個樓層難度級別都不同。當然，憑藉您的功力，到達頂樓是不可能的...&quot;);
		cm.dispose();
	    } else if (sel == 3) {
		cm.sendYesNo(&quot;您知道如果重新設置訓練點，它將恢復為0，對吧？老實說，這不一定是壞事。重置訓練點並重新開始後，那麼您就可以再次收到皮帶了。 你想重設訓練點嗎？&quot;);
	    } else if (sel == 2) {
		cm.sendSimple(&quot;到目前為止，您的總訓練點數是 #b&quot;+cm.getDojoPoints()+&quot;#k。 我的師父惜愛有才華的人，因此，如果您積累了足夠的訓練點， 您將可以根據自己的訓練點獲得腰帶...\n\r #L0##i1132000:# #t1132000# (50)#l \n\r #L1##i1132001:# #t1132001# (150)#l \n\r #L2##i1132002:# #t1132002# (300)#l \n\r #L3##i1132003:# #t1132003# (450)#l \n\r #L4##i1132004:# #t1132004# (600)#l\r\n&quot;);
	    } else if (sel == 1) {
		if (cm.getParty() != null) {
		    if (cm.isLeader()) {
			cm.sendOk(&quot;您要立即進入嗎？&quot;);
		    } else {
			cm.sendOk(&quot;嘿，您甚至都不是隊長。您想偷偷溜進去做什麼？如果您想進入該場所，請告訴您的隊長與我交談。&quot;);
		    }
		}
	    } else if (sel == 0) {
		if (cm.getParty() != null) {
			cm.sendOk(&quot;請離開你的隊伍。&quot;);
			cm.dispose();
		}
		var record = cm.getQuestRecord(150000);
		var data = record.getCustomData();

		if (data != null) {
		    var idd = get_restinFieldID(parseInt(data));
		    if (idd != 925020002) {
		        cm.dojoAgent_NextMap(true, true , idd );
		        record.setCustomData(null);
		    } else {
			cm.sendOk(&quot;請等等再嘗試一次。&quot;);
		    }
		} else {
		    cm.start_DojoAgent(true, false);
		}
		cm.dispose();
	    // cm.sendYesNo(&quot;The last time you took the challenge yourself, you were able to reach Floor #18. I can take you straight to that floor, if you want. Are you interested?&quot;);
	    }
	} else if (status == 1) {
	    if (sel == 3) {
		cm.setDojoRecord(true);
		cm.sendOk(&quot;我已將您的訓練點重設為0&quot;);
	    } else if (sel == 2) {
		var record = cm.getDojoRecord();
		var required = 0;
		
		switch (record) {
		    case 0:
			required = 500;
			break;
		    case 1:
			required = 1500;
			break;
		    case 2:
			required = 3000;
			break;
		    case 3:
			required = 4500;
			break;
		    case 4:
			required = 6000;
			break;
			case 5:
			required = 9000;
			break;
			case 6:
			required = 11000;
			break;
			case 7:
			required = 15000;
			break;
		}

		if (record == selection &amp;&amp; cm.getDojoPoints() &gt;= required) {
		    var item = 1132000 + record;
		    if (cm.canHold(item)) {
			cm.gainItem(item, 1);
			cm.setDojoRecord(false);
		    } else {
			cm.sendOk(&quot;請檢查背包中是否還有空位。&quot;);
		    }
		} else {
		    cm.sendOk(&quot;您已經擁有或訓練點不足。請嘗試先獲取較低階的腰帶。&quot;);
		}
		cm.dispose();
	    } else if (sel == 1) {
		cm.start_DojoAgent(true, true);
		cm.dispose();
	    }
	}
    } else if (isRestingSpot(mapid)) {
	if (mode == 1) {
	    status++;
	} else {
	    cm.dispose();
	    return;
	}

	if (status == 0) {
	    sel = selection;

	    if (sel == 0) {
		if (cm.getParty() == null || cm.isLeader()) {
		    cm.dojoAgent_NextMap(true, true);
		} else {
		    cm.sendOk(&quot;只有隊長可以繼續前進。&quot;);
		}
		//cm.getQuestRecord(150000).setCustomData(null);
		cm.dispose();
	    } else if (sel == 1) {
		cm.askAcceptDecline(&quot;你想退出嗎？你真的想離開這裡嗎？&quot;);
	    } else if (sel == 2) {
		if (cm.getParty() == null) {
			var stage = get_stageId(cm.getMapId());

			cm.getQuestRecord(150000).setCustomData(stage);
			cm.sendOk(&quot;我剛剛記錄了您的進度。下次您到達這裡時，我會直接將您送到此樓層。&quot;);
			cm.dispose();
		} else {
			cm.sendOk(&quot;嘿..您無法記錄與隊伍合作的進度...&quot;);
			cm.dispose();
		}
	    }
	} else if (status == 1) {
	    if (sel == 1) {
		if (cm.isLeader()) {
			cm.warpParty(925020002);
		} else {
			cm.warp(925020002);
		}
	    }
	    cm.dispose();
	}
    } else {
	if (mode == 1) {
		if (cm.isLeader()) {
			cm.warpParty(925020002);
		} else {
			cm.warp(925020002);
		}
	}
	cm.dispose();
    }
}

function get_restinFieldID(id) {
	var idd = 925020002;
    switch (id) {
	case 1:
	    idd =  925020600;
	    break;
	case 2:
	    idd =  925021200;
	    break;
	case 3:
	    idd =  925021800;
	    break;
	case 4:
	    idd =  925022400;
	    break;
	case 5:
	    idd =  925023000;
	    break;
	case 6:
	    idd =  925023600;
	    break;
    }
    for (var i = 0; i &lt; 10; i++) {
	var canenterr = true;
	for (var x = 1; x &lt; 39; x++) {
		var map = cm.getMap(925020000 + 100 * x + i);
		if (map.getCharactersSize() &gt; 0) {
			canenterr = false;
			break;
		}
	}
	if (canenterr) {
		idd += i;
		break;
	}
}
	return idd;
}

function get_stageId(mapid) {
    if (mapid &gt;= 925020600 &amp;&amp; mapid &lt;= 925020614) {
	return 1;
    } else if (mapid &gt;= 925021200 &amp;&amp; mapid &lt;= 925021214) {
	return 2;
    } else if (mapid &gt;= 925021800 &amp;&amp; mapid &lt;= 925021814) {
	return 3;
    } else if (mapid &gt;= 925022400 &amp;&amp; mapid &lt;= 925022414) {
	return 4;
    } else if (mapid &gt;= 925023000 &amp;&amp; mapid &lt;= 925023014) {
	return 5;
    } else if (mapid &gt;= 925023600 &amp;&amp; mapid &lt;= 925023614) {
	return 6;
    }
    return 0;
}

function isRestingSpot(id) {
    return (get_stageId(id) &gt; 0);
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[【JAVA】UVA 10056 - What is the Probability? ]]></title>
        <id>https://Z1Nhouse.github.io//post/OnsEcwuX-</id>
        <link href="https://Z1Nhouse.github.io//post/OnsEcwuX-">
        </link>
        <updated>2020-01-14T15:00:16.000Z</updated>
        <content type="html"><![CDATA[<p>題目原文：<a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=12&amp;page=show_problem&amp;problem=997">https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=12&amp;page=show_problem&amp;problem=997</a></p>
<p><strong>Sample Input:</strong><br>
2<br>
2 0.166666 1<br>
2 0.166666 2</p>
<p><strong>Sample Output:</strong><br>
0.5455<br>
0.4545</p>
<p><strong>題目大意：給你一個骰子，設現在有n人，骰到某數獲勝(1/6)，計算出獲勝的機率。</strong></p>
<p>第一行輸入<code>幾組測資</code><br>
第二行輸入<code>參加遊戲的人數、獲勝的機率、第幾個人獲勝</code></p>
<p>※設N=人數、P=獲勝機率、I=第幾個人獲勝</p>
<p>那麼每個回合獲勝的機率即為：<br>
<img src="https://Z1Nhouse.github.io//post-images/1579014935551.png" alt=""></p>
<pre><code class="language-java">import java.util.*;
public class main{
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
		int count = sc.nextInt();

		for (int i = 0; i &lt; count; i++) {
		int N = sc.nextInt();
		double P = sc.nextDouble();
		int I = sc.nextInt();
	
		System.out.printf(&quot;%.4f&quot;, P == 0 ? P : P * Math.pow(1 - P, I - 1) / (1 - Math.pow(1 - P, N)));
		System.out.println();
		}

		sc.close();
    }
};

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[【JAVA】UVA 299 - Train Swapping]]></title>
        <id>https://Z1Nhouse.github.io//post/1eStMfufa</id>
        <link href="https://Z1Nhouse.github.io//post/1eStMfufa">
        </link>
        <updated>2020-01-14T14:28:30.000Z</updated>
        <content type="html"><![CDATA[<p>題目原文：<a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=24&amp;page=show_problem&amp;problem=235">https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;category=24&amp;page=show_problem&amp;problem=235</a></p>
<p><strong>題目大意：首行輸入有幾台車需要排列，第二行輸入有幾節車廂，第三行輸入車廂的號碼，最後輸出需要幾次才能將車廂號碼由小到大排序完成(一次只能和一台換)。</strong></p>
<p>解題方向：使用氣泡排序法(Bubble Sort)</p>
<p>範例：假設今天有4節車廂，號碼為<code>4,3,2,1</code>，依照氣泡排序法排序：<br>
4 3 2 1<br>
3 2 1 4  3次(4→3,4→2,4→1)<br>
2 1 3 4  2次(3→2,3→1)<br>
1 2 3 4  1次(2→1)<br>
####################<br>
6次</p>
<pre><code class="language-java">import java.util.*;
public class main{
    public static void main(String[] args) {
        
            Scanner sc=new Scanner(System.in);
            
            int cases=sc.nextInt();
            
            for(int i =0;i&lt;cases;i++){
            	int L = sc.nextInt();
            	int arr[]=new int[L];
            	
            	for(int j=0;j&lt;L;j++){
            		arr[j] = sc.nextInt();
            	}
            	
            	int count=0;
            	
            	for(int j=0;j&lt;L-1;j++){
            		for(int k=0;k&lt;L-j-1;k++){
            			if(arr[k]&gt;arr[k+1]){
            				int temp=arr[k];
            				arr[k] = arr[k+1];
            				arr[k+1] = temp;
            				count++;
            			}
            		}
            	}
            	
            	System.out.println(&quot;Optimal train swapping takes &quot;+count+&quot; swaps.&quot;);
            }
            
            
    }
};
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[【JAVA】UVA 10071 - Back to High School Physics]]></title>
        <id>https://Z1Nhouse.github.io//post/YvvDHQ42k</id>
        <link href="https://Z1Nhouse.github.io//post/YvvDHQ42k">
        </link>
        <updated>2020-01-14T14:23:34.000Z</updated>
        <content type="html"><![CDATA[<p>題目原文：<a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1012">https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1012</a></p>
<p><strong>Sample Input</strong><br>
0 0<br>
5 12<br>
<strong>Sample Output</strong><br>
0<br>
120</p>
<p>從範例大概也能推測出來，輸入結果為兩數相乘的兩倍。</p>
<p><strong>題目大意：求出2倍時間的距離。</strong></p>
<p>可能是最簡單的題目了</p>
<pre><code class="language-java">import java.util.*;
public class main{
    public static void main(String[] args) {
        
            Scanner sc=new Scanner(System.in);
           	while(sc.hasNextInt()){
           		int v = sc.nextInt(),t = sc.nextInt();
           		System.out.println(v*t*2);
           	}
    }
};
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[【JAVA】UVA 10409 - die game]]></title>
        <id>https://Z1Nhouse.github.io//post/eE2IFK7r0</id>
        <link href="https://Z1Nhouse.github.io//post/eE2IFK7r0">
        </link>
        <updated>2020-01-14T14:07:01.000Z</updated>
        <content type="html"><![CDATA[<p>題目原文：<a href="https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1350">https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1350</a></p>
<p><strong>Sample Input</strong><br>
1<br>
north<br>
3<br>
north<br>
east<br>
south<br>
0</p>
<p><strong>Sample Output</strong><br>
5<br>
1</p>
<p><strong>題目大意：先輸入一個數字，表示要翻轉幾次，最後輸出翻轉到的骰子點數。</strong></p>
<h2 id="骰子攤開圖">骰子攤開圖</h2>
<figure data-type="image" tabindex="1"><img src="http://www.mathland.idv.tw/life/dice.gif" alt=""></figure>
<h2 id="程式碼">程式碼</h2>
<pre><code class="language-java">Scanner sc=new Scanner(System.in);
		
		int cases; 
		while(sc.hasNextInt() &amp;&amp; (cases=sc.nextInt())!=0){
			
			int currPost=1;
			int N=2,W=3,S=5,E=4;
			
			for(int i=0;i&lt;cases;i++){
				String st=sc.next();
				if(st.equals(&quot;north&quot;)){
					N=currPost;
					currPost=S;
					S=7-N;
				}else if(st.equals(&quot;south&quot;)){
					S=currPost;
					currPost=N;
					N=7-S;
				}else if(st.equals(&quot;east&quot;)){
					E=currPost;
					currPost=W;
					W=7-E;
				}else if(st.equals(&quot;west&quot;)){
					W=currPost;
					currPost=E;
					E=7-W;
				}
			}
			
			System.out.println(currPost);
		}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[【楓之谷私服架設 相關問題彙整+解決辦法】]]></title>
        <id>https://Z1Nhouse.github.io//post/WV7f4tGkt</id>
        <link href="https://Z1Nhouse.github.io//post/WV7f4tGkt">
        </link>
        <updated>2020-01-14T08:11:18.000Z</updated>
        <summary type="html"><![CDATA[<p>不限定版本，目前已成功架設的版本有：118,120,134,155,189... (目前專注於120白狐端)<br>
架設過程中遇到的問題都會列出來，順便分享當時的解決辦法。</p>
]]></summary>
        <content type="html"><![CDATA[<p>不限定版本，目前已成功架設的版本有：118,120,134,155,189... (目前專注於120白狐端)<br>
架設過程中遇到的問題都會列出來，順便分享當時的解決辦法。</p>
<!-- more -->
<h2 id="架設教程">架設教程</h2>
<p>先放上文字版的私服架設教程(Youtube上很多教程,87楓谷也有詳細的教程)：<br>
首先需要安裝<code>WAMP、N8、JDK8</code>，並且準備好端口以及相對應版本的客戶端。</p>
<ol>
<li>開啟WAMP並將WAMP切換到上線狀態</li>
<li>將端口內dist資料夾裡的java檔放到：</li>
</ol>
<pre><code>C:\Program Files\Java\jdk1.8.0_231\jre\lib\ext
C:\Program Files\Java\jdk1.8.0_231\jre\lib\security
C:\Program Files\Java\jre1.8.0_231\lib\ext
C:\Program Files\Java\jre1.8.0_231\lib\security
</code></pre>
<p>依照個人JAVA安裝位置的不同請自行尋找對應的位置。<br>
3. 打開N8 檔案 - 新增連線 - 名稱<code>localhost</code>其他不動，按確定<br>
4. 在localhost上右鍵 - 新增資料庫 - <code>maplestory</code><br>
5. 點擊maplestory，在maplestory上按右鍵 - 執行批次任務檔案*(勾選遇到錯誤繼續) - 選擇端口內的sql檔案後按開始<br>
6. 開啟伺服器<br>
7. 製作登入器(若已有就直接打開吧，成功按play就可以開啟遊戲了)</p>
<p>下方為相關問題彙總：</p>
<h2 id="wamp">WAMP</h2>
<p>首先是新手最容易卡住的部分<strong>WAMP</strong>：</p>
<ol>
<li><strong>WAMP亮黃燈怎麼辦？或者提示could not execute menu item internal error怎麼辦？</strong></li>
</ol>
<p>A：首先測試<code>80</code>端口是否被占用，若有被占用很有可能是你安裝其他的東西被占用到端口。<br>
例如你可能安裝過xampp或者appserv(裡頭有自帶apache,MySQL...等)。</p>
<p><strong>如何測試？在wamp圖示上按<code>左鍵 - Apache - service - 測試80port</code></strong></p>
<p>如果發現80端被占用了，只需要把wamp的port改掉,把80改成8080或者8088...</p>
<p>如果還是不亮白色，看看你的<code>MySQL</code>是不是也被佔用了，以至於wamp的MySQL無法啟用</p>
<p><strong>Win+R輸入services.msc，找到mysql，如果啟動的話請關閉。</strong></p>
<p>圖文步驟：<a href="https://jingyan.baidu.com/article/48b37f8d0a02811a6564887b.html">https://jingyan.baidu.com/article/48b37f8d0a02811a6564887b.html</a><br>
─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
<ol start="2">
<li>特別要注意的一點是，請一定要讓wamp在上線狀態...</li>
</ol>
<figure data-type="image" tabindex="1"><img src="https://Z1Nhouse.github.io//post-images/1578989823252.PNG" alt=""></figure>
<hr>
<h2 id="mysql">MySQL</h2>
<p><strong>MySQL</strong>相關問題：</p>
<ol>
<li>當點擊資料庫卻出現下方提示：<br>
<img src="https://Z1Nhouse.github.io//post-images/1578990068270.PNG" alt=""><br>
A：WAMP沒打開，或者沒將WAMP上線。</li>
</ol>
<hr>
<h2 id="伺服器">伺服器</h2>
<p>接著是開啟<strong>伺服器</strong>會遇到的問題：</p>
<ol>
<li>假設你有遇到如下的問題：</li>
</ol>
<figure data-type="image" tabindex="2"><img src="https://Z1Nhouse.github.io//post-images/1578989859254.PNG" alt=""></figure>
<p>A：請重新安裝<a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">JDK8</a>並記得設定環境變數。<br>
設定java環境變數的方法：<a href="https://dotblogs.com.tw/897920/2017/04/29/031442">https://dotblogs.com.tw/897920/2017/04/29/031442</a><br>
─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
<ol start="2">
<li>開啟伺服器時出現Invalid maximum heap size ....</li>
</ol>
<p>A：將開啟伺服器的檔案用記事本打開，把15000M改成1024M。<br>
<img src="https://Z1Nhouse.github.io//post-images/1578990014444.PNG" alt=""></p>
<hr>
<h2 id="遊戲開啟">遊戲開啟</h2>
<ol>
<li>
<p><strong>[Error:32a1000b]認證檔案無法下載%1</strong><br>
A：將破解過的ijl15.dll檔案覆蓋到主程式資料夾。<br>
<img src="https://truth.bahamut.com.tw/s01/201107/27ec263add9d1280c6d1abbbbf489f8b.JPG" alt=""><br>
─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
</li>
<li>
<p><strong>Error code: Failed in finding proper screen made for Gr2D</strong><br>
A：將MapleStory.exe 右鍵 - 內容 - 相容性 -勾選以相容模式執行這個程式(Windows7)、以系統管理員的身分執行此程式<br>
<img src="https://static.wixstatic.com/media/2344aa_cffdd31e05b442be93b9ba483f0ee001~mv2.png/v1/fill/w_394,h_114,al_c,lg_1,q_85/2344aa_cffdd31e05b442be93b9ba483f0ee001~mv2.webp" alt=""></p>
</li>
</ol>
<h2 id="登入器製作">登入器製作</h2>
<ol>
<li>在客戶端資料夾內新增一個文字文件並打開編輯</li>
<li>輸入<code>start MapleStory.exe 127.0.0.1 8484</code></li>
<li>另存成<code>.bat</code>檔</li>
</ol>
<p>注意：127.0.0.1為本機位置，若是想給其他人玩，記得要修改成hamachi上的IP。</p>
<h2 id="改wz-腳本-src相關">改WZ、腳本、SRC相關</h2>
<p>常改的java檔：</p>
<pre><code>MapleServerHandler //把拍賣改成呼叫NPC改這個檔案的ENTER_MTS處
MaplePacketCreator //120白狐端高級美髮無效請改這個檔案
NPCConversationManager //改NPC的指令函數
MapleCharacter //角色的設定
client\messages //改指令
...其他的記不得
</code></pre>
<p>─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
<ol>
<li>
<p>使用HaRepacker導出xml錯誤率高，建議導出xml一律使用WzRepacker<br>
像我有一次改String用HaRepacker導出xml，結果出現了下方的錯誤訊息，特別去翻了翻這個檔案才知道是<code>eqp.img</code>這個檔案的問題。<br>
<img src="https://Z1Nhouse.github.io//post-images/1580132657706.PNG" alt=""><br>
─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
</li>
<li>
<p>WZ從新版本加東西進舊版本，記得要刪除舊版本沒有的節點，最基本的就是要刪除info裡頭的<code>setItemId</code>，還有要注意info裡頭圖標如果是使用連結記得把outlink跟hash刪除，然後把圖標重傳。<br>
─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
</li>
<li>
<p><code>120白狐端</code>高級美髮沒反應的解決辦法(tools/MaplePacketCreator.java)：</p>
</li>
</ol>
<pre><code class="language-JAVA">public static MaplePacket getNPCTalkStyle(int npc, String talk, int... args)
mplew.writeShort(7);
將這句改成
mplew.writeShort(8);
</code></pre>
<p>─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
<ol>
<li><code>120白狐端</code>將拍賣改成呼叫NPC<br>
記得在最開始先import</li>
</ol>
<pre><code>import tools.MaplePacketCreator;
import scripting.NPCScriptManager;
</code></pre>
<p>然後再搜索ENTER_MTS改成以下內容：</p>
<pre><code class="language-JAVA">case ENTER_MTS:

if (c.getPlayer().getLevel() &lt; 10) {
    c.getPlayer().dropMessage(5, &quot;尚未達到10級將無法使用。&quot;);
    } else {
    NPCScriptManager.getInstance().start(c, 9000020); //9000020為NPC id
    }
    c.getSession().write(MaplePacketCreator.enableActions());
break;
</code></pre>
<p>─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
<ol start="5">
<li>商城的東西跟商店的東西在sql改；NPC腳本在端口的<code>Libs\scripts\npc</code>改；WZ的話不只要改端口的xml還有客戶端的WZ檔；再其他的就是改SRC了。</li>
</ol>
<p>─═♤═─‧─═♥═─‧─═♤═─‧─═♥═─‧─═♤═─</p>
<ol start="6">
<li>商城販賣的商品如何統一一個價錢？<br>
打開http://127.0.0.1/phpmyadmin/ 選擇你私服的資料庫，在sql輸入sql語法</li>
</ol>
<pre><code class="language-sql">UPDATE `cashshop_modified_items` SET `discount_price`='1'   
</code></pre>
<p>這是將商城sql裡頭的價格欄位全部調至1，若你想個別調整，則輸入：</p>
<pre><code class="language-sql">UPDATE `cashshop_modified_items` SET `discount_price`='1' WHERE (`serial`='20000026')
</code></pre>
<p><strong>serial = 商品序列號，你也可以將serial調整成其他條件，比如只改某一種類別的商品。</strong></p>
<hr>
<h2 id="相關檔案">相關檔案</h2>
<ul>
<li><code>ijl15.dll</code>：<a href="https://mega.nz/#!5wY3hAjL!IH1hoWXOp52swXgiuIW7dn6YMRNhGltf6bMQ_s-gNJk">點擊下載</a></li>
<li></li>
<li>87楓之谷私服架設教學及工具包：<a href="https://www.87ms.net/erection">私服架設教學及工具包</a></li>
</ul>
<h2 id="推薦網站">推薦網站</h2>
<ol>
<li>代碼搜索</li>
</ol>
<ul>
<li><a href="https://bingfeng.tw/wz/map.html">地圖</a></li>
<li><a href="https://bingfeng.tw/wz/item.html">物品</a></li>
<li><a href="https://bingfeng.tw/wz/npc.html">NPC</a></li>
</ul>
<ol start="2">
<li>
<p>簡易 JS 語法<br>
<a href="http://aicltw.blogspot.com/2017/06/js.html">http://aicltw.blogspot.com/2017/06/js.html</a></p>
</li>
<li>
<p>臉型新增的邏輯與概念攻略(髮型也相同)<br>
<a href="http://aicltw.blogspot.com/2017/07/blog-post_15.html">http://aicltw.blogspot.com/2017/07/blog-post_15.html</a></p>
</li>
<li>
<p>新增戒指戰略指南<br>
<a href="http://aicltw.blogspot.com/2018/05/blog-post_8.html">http://aicltw.blogspot.com/2018/05/blog-post_8.html</a></p>
</li>
</ol>
]]></content>
    </entry>
</feed>